<html>
  <head>
    <title>Metagenomics Visualisation Framework</title>

    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <!-- D3 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>

    <!-- Visualiations -->
    <link href="../assets/stylesheets/tooltip.css" rel="stylesheet">
    <script src="../assets/javascripts/treeview.js"></script>

    <script>
      $(function() {

        $("#treeview-reset").click(function() {
          $("#d3TreeView").treeview('reset');
        });

        nodeStrokeColor = function nodeStokeColor(d) {
          if (d.data.valid_taxon !== 1) {
            return "red";
          }
          if (d.data.rank === "no rank") {
            return "gray";
          }
          if (d.selected) {
            return d._children ? d.color || "#aaa" : "#fff";
            } else {
            return "#aaa";
          }
        };

        d3.json("../sample-data/hierarchical-taxons-flat.json", function(error, data) {
          if (error) return console.warn(error);

          $("#d3TreeView").treeview({
            data: data,
            width: 1400,
            height: 800,
            nodeStrokeColor: nodeStrokeColor,
          });
        });
      });
    </script>

  </head>

  <body>
        <span class="dir">
          <a class="btn btn-xs btn-default" id="treeview-reset" title="reset visualisation"><i class="glyphicon glyphicon-repeat"></i></a>
        </span>
        <span class="dir text">Scroll to zoom, drag to pan, click a node to expand, right click a node to set as root</span>
        <div id="d3TreeView"></div>
  </body>
</html>
