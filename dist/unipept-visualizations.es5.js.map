{"version":3,"sources":["unipept-visualizations.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAMA,CAAC,YAAY;AACT,QAAI,WAAW,SAAS,QAAT,CAAkB,OAAlB,EAA2B,IAA3B,EAA+C;AAAA,YAAd,OAAc,yDAAJ,EAAI;;AAC1D,YAAI,OAAO,EAAX;;AAEA,YAAM,SAAS;AACP,iBAAK,CADE;AAEP,mBAAO,CAFA;AAGP,oBAAQ,CAHD;AAIP,kBAAM;AAJC,SAAf;AAAA,YAMI,WAAW,GANf;AAAA,YAOI,cAAc,GAAG,KAAH,CAAS,UAAT,EAPlB;AAAA,YAQI,WAAW;AACP,oBAAQ,GADD;AAEP,mBAAO,GAFA;;AAIP,oBAAQ;AAAA,uBAAK,YAAY,EAAE,IAAd,CAAL;AAAA,aAJD;AAKP,2BAAe,aALR;AAMP,6BAAiB,eANV;AAOP,6BAAiB,eAPV;;AASP,qBAAS,IATF;AAUP,wBAAY,UAVL;AAWP,6BAAiB,eAXV;AAYP,4BAAgB;AAZT,SARf;;AAuBA,YAAI,iBAAJ;;AAEA,YAAI,oBAAJ;AAAA,YACI,qBADJ;;AAGA,YAAI,SAAS,CAAb;AAAA,YACI,aADJ;;AAGA,YAAI,aAAJ;AAAA,YACI,gBADJ;AAAA,YAEI,iBAFJ;AAAA,YAGI,mBAHJ;AAAA,YAII,iBAJJ;AAAA,YAKI,iBALJ;AAAA,YAMI,qBANJ;AAAA,YAOI,YAPJ;;AASA,iBAAS,IAAT,GAAgB;AACZ,uBAAW,SAAc,EAAd,EAAkB,QAAlB,EAA4B,OAA5B,CAAX;;AAEA,qBAAS,KAAT,GAAiB,SAAS,KAAT,GAAiB,OAAO,KAAxB,GAAgC,OAAO,IAAxD;AACA,qBAAS,MAAT,GAAkB,SAAS,MAAT,GAAkB,OAAO,GAAzB,GAA+B,OAAO,MAAxD;;AAEA,gBAAI,SAAS,OAAb,EAAsB;AAClB;AACH;;AAED,mBAAO,GAAG,MAAH,CAAU,IAAV,GACF,QADE,CACO,CAAC,CAAD,EAAI,EAAJ,CADP,EAEF,UAFE,CAES,UAAC,CAAD,EAAI,CAAJ,EAAU;AAClB,oBAAI,QAAS,SAAS,CAAT,IAAc,SAAS,CAAT,CAA3B;AAAA,oBACI,WAAW,QAAQ,CAAR,GAAY,CAD3B;AAEA,uBAAQ,EAAE,MAAF,KAAa,EAAE,MAAhB,GAA0B,QAA1B,GAAqC,WAAW,CAAvD;AACH,aANE,CAAP;;AAQA,uBAAW,GAAG,GAAH,CAAO,QAAP,GAAkB,UAAlB,CAA6B;AAAA,uBAAK,CAAC,EAAE,CAAH,EAAM,EAAE,CAAR,CAAL;AAAA,aAA7B,CAAX;;AAEA,yBAAa,GAAG,KAAH,CAAS,MAAT,GAAkB,KAAlB,CAAwB,CAAC,CAAD,EAAI,GAAJ,CAAxB,CAAb;AACA,uBAAW,GAAG,KAAH,CAAS,MAAT,GAAkB,KAAlB,CAAwB,CAAC,CAAD,EAAI,IAAI,KAAK,EAAb,CAAxB,CAAX;;AAEA,uBAAW,GAAG,GAAH,CAAO,GAAP,GACN,WADM,CACM,QADN,EAEN,UAFM,CAEK,CAFL,EAGN,QAHM,CAGG,OAHH,CAAX;;;AAMA,2BAAe,GAAG,QAAH,CAAY,IAAZ,GACV,WADU,CACE,CAAC,GAAD,EAAM,CAAN,CADF,EAEV,EAFU,CAEP,MAFO,EAEC,YAAM;AACd,oBAAI,IAAJ,CAAS,WAAT,iBAAmC,GAAG,KAAH,CAAS,SAA5C,eAA+D,GAAG,KAAH,CAAS,KAAxE;AACH,aAJU,CAAf;;AAMA,kBAAM,GAAG,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,KAA1B,EACD,IADC,CACI,SADJ,EACe,KADf,EAED,IAFC,CAEI,OAFJ,EAEa,4BAFb,EAGD,IAHC,CAGI,SAHJ,YAGsB,SAAS,KAAT,GAAiB,OAAO,KAAxB,GAAgC,OAAO,IAH7D,WAGqE,SAAS,MAAT,GAAkB,OAAO,GAAzB,GAA+B,OAAO,MAH3G,GAID,IAJC,CAII,OAJJ,EAIa,SAAS,KAAT,GAAiB,OAAO,KAAxB,GAAgC,OAAO,IAJpD,EAKD,IALC,CAKI,QALJ,EAKc,SAAS,MAAT,GAAkB,OAAO,GAAzB,GAA+B,OAAO,MALpD,EAMD,IANC,CAMI,YANJ,EAOD,MAPC,CAOM,GAPN,EAQD,IARC,CAQI,WARJ,iBAQ8B,OAAO,IARrC,SAQ6C,OAAO,GARpD,QASD,MATC,CASM,GATN,CAAN;;AAWA,iBAAK,KAAK,UAAL,CAAgB,IAAhB,CAAL;AACH;;AAED,iBAAS,WAAT,GAAuB;AACnB,sBAAU,GAAG,MAAH,CAAU,MAAV,EACL,MADK,CACE,KADF,EAEL,IAFK,CAEA,IAFA,EAEM,QAAQ,EAAR,GAAa,UAFnB,EAGL,IAHK,CAGA,OAHA,EAGS,KAHT,EAIL,KAJK,CAIC,UAJD,EAIa,UAJb,EAKL,KALK,CAKC,SALD,EAKY,IALZ,EAML,KANK,CAMC,YAND,EAMe,QANf,EAOL,KAPK,CAOC,kBAPD,EAOqB,OAPrB,EAQL,KARK,CAQC,SARD,EAQY,KARZ,EASL,KATK,CASC,QATD,EASW,mBATX,EAUL,KAVK,CAUC,eAVD,EAUkB,MAVlB,CAAV;AAWH;;AAED,iBAAS,IAAT,CAAc,IAAd,EAAoB;AAChB,uBAAW,MAAX,CAAkB,CAAC,CAAD,EAAI,KAAK,IAAL,CAAU,KAAd,CAAlB;;AAEA,mBAAO,IAAP;AACA,iBAAK,EAAL,GAAU,SAAS,MAAT,GAAkB,CAA5B;AACA,iBAAK,EAAL,GAAU,CAAV;;;AAGA,iBAAK,UAAL;;;AAGA,qBAAS,KAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAAwB;AACpB,oBAAI,CAAJ,EAAO;AACH,sBAAE,KAAF,GAAU,CAAV;AACH,iBAFD,MAEO;AACH,sBAAE,KAAF,GAAU,GAAG,OAAH,CAAW,SAAS,MAApB,EAA4B,IAA5B,CAAiC,IAAjC,EAAuC,CAAvC,EAA0C,CAA1C,CAAV;AACH;AACD,oBAAI,EAAE,QAAN,EAAgB;AACZ,sBAAE,QAAF,CAAW,OAAX,CAAmB,UAAC,IAAD,EAAU;AACzB,8BAAM,IAAN,EAAY,CAAZ,EAAe,EAAE,KAAjB;AACH,qBAFD;AAGH;AACJ;AACD,iBAAK,QAAL,CAAc,OAAd,CAAsB,UAAC,IAAD,EAAO,CAAP,EAAa;AAC/B,sBAAM,IAAN,EAAY,CAAZ;AACH,aAFD;;;AAKA,iBAAK,WAAL;AACA,iBAAK,MAAL;;AAEA,mBAAO,IAAP;AACA,uBAAW,IAAX;AACH;;AAED,iBAAS,MAAT,CAAgB,MAAhB,EAAwB;;AAEpB,gBAAI,QAAQ,KAAK,KAAL,CAAW,IAAX,EAAiB,OAAjB,EAAZ;AAAA,gBACI,QAAQ,KAAK,KAAL,CAAW,KAAX,CADZ;;;AAIA,kBAAM,OAAN,CAAc,aAAK;AACf,kBAAE,CAAF,GAAM,EAAE,KAAF,GAAU,GAAhB;AACH,aAFD;;;AAKA,gBAAI,OAAO,IAAI,SAAJ,CAAc,QAAd,EACN,IADM,CACD,KADC,EACM;AAAA,uBAAK,EAAE,EAAF,KAAS,EAAE,EAAF,GAAO,EAAE,MAAlB,CAAL;AAAA,aADN,CAAX;;;AAIA,gBAAI,YAAY,KAAK,KAAL,GAAa,MAAb,CAAoB,GAApB,EACX,IADW,CACN,OADM,EACG,MADH,EAEX,KAFW,CAEL,QAFK,EAEK,SAFL,EAGX,IAHW,CAGN,WAHM,EAGO;AAAA,uCAAkB,OAAO,CAAP,IAAY,CAA9B,WAAmC,OAAO,EAAP,IAAa,CAAhD;AAAA,aAHP,EAIX,EAJW,CAIR,OAJQ,EAIC,KAJD,EAKX,EALW,CAKR,WALQ,EAKK,SALL,EAMX,EANW,CAMR,UANQ,EAMI,UANJ,EAOX,EAPW,CAOR,aAPQ,EAOO,UAPP,CAAhB;;AASA,sBAAU,MAAV,CAAiB,QAAjB,EACK,IADL,CACU,GADV,EACe,IADf,EAEK,KAFL,CAEW,cAFX,EAE2B,OAF3B,EAGK,KAHL,CAGW,QAHX,EAGqB,SAAS,eAH9B,EAIK,KAJL,CAIW,MAJX,EAImB,SAAS,aAJ5B;;AAMA,sBAAU,MAAV,CAAiB,MAAjB,EACK,IADL,CACU,GADV,EACe,QADf,EAEK,KAFL,CAEW,MAFX,EAEmB,SAAS,eAF5B,EAGK,KAHL,CAGW,cAHX,EAG2B,CAH3B;;AAKA,sBAAU,MAAV,CAAiB,MAAjB,EACK,IADL,CACU,GADV,EACe;AAAA,uBAAK,EAAE,MAAF,KAAa,CAAC,EAAd,GAAmB,EAAxB;AAAA,aADf,EAEK,IAFL,CAEU,IAFV,EAEgB,OAFhB,EAGK,IAHL,CAGU,aAHV,EAGyB;AAAA,uBAAK,EAAE,MAAF,KAAa,KAAb,GAAqB,OAA1B;AAAA,aAHzB,EAIK,IAJL,CAIU;AAAA,uBAAK,EAAE,IAAP;AAAA,aAJV,EAKK,KALL,CAKW,MALX,EAKmB,iBALnB,EAMK,KANL,CAMW,cANX,EAM2B,IAN3B;;;AASA,gBAAI,aAAa,KAAK,UAAL,GACZ,QADY,CACH,QADG,EAEZ,IAFY,CAEP,WAFO,EAEM;AAAA,sCAAkB,EAAE,CAApB,SAAyB,EAAE,CAA3B;AAAA,aAFN,CAAjB;;AAIA,uBAAW,MAAX,CAAkB,QAAlB,EACK,IADL,CACU,GADV,EACe,QADf,EAEK,KAFL,CAEW,cAFX,EAE2B;AAAA,uBAAK,EAAE,SAAF,GAAc,CAAd,GAAkB,CAAvB;AAAA,aAF3B,EAGK,KAHL,CAGW,QAHX,EAGqB,SAAS,eAH9B,EAIK,KAJL,CAIW,MAJX,EAImB,SAAS,aAJ5B;;AAMA,uBAAW,MAAX,CAAkB,MAAlB,EACK,KADL,CACW,cADX,EAC2B,CAD3B;;AAGA,uBAAW,MAAX,CAAkB,MAAlB,EACK,QADL,CACc,QADd,EAEK,IAFL,CAEU,GAFV,EAEe,QAFf,EAGK,KAHL,CAGW,cAHX,EAG2B,GAH3B;;;AAMA,gBAAI,WAAW,KAAK,IAAL,GAAY,UAAZ,GACV,QADU,CACD,QADC,EAEV,IAFU,CAEL,WAFK,EAEQ;AAAA,sCAAkB,OAAO,CAAzB,SAA8B,OAAO,CAArC;AAAA,aAFR,EAGV,MAHU,EAAf;;AAKA,qBAAS,MAAT,CAAgB,QAAhB,EACK,IADL,CACU,GADV,EACe,IADf;;AAGA,qBAAS,MAAT,CAAgB,MAAhB,EACK,KADL,CACW,cADX,EAC2B,IAD3B;;AAGA,qBAAS,MAAT,CAAgB,MAAhB,EACK,KADL,CACW,cADX,EAC2B,IAD3B;;;AAIA,gBAAI,OAAO,IAAI,SAAJ,CAAc,WAAd,EACN,IADM,CACD,KADC,EACM;AAAA,uBAAK,EAAE,MAAF,CAAS,EAAd;AAAA,aADN,CAAX;;;AAIA,iBAAK,KAAL,GAAa,MAAb,CAAoB,MAApB,EAA4B,GAA5B,EACK,IADL,CACU,OADV,EACmB,MADnB,EAEK,KAFL,CAEW,MAFX,EAEmB,MAFnB,EAGK,KAHL,CAGW,gBAHX,EAG6B,KAH7B,EAIK,KAJL,CAIW,gBAJX,EAI6B,OAJ7B,EAKK,KALL,CAKW,QALX,EAKqB,SAAS,eAL9B,EAMK,KANL,CAMW,cANX,EAM2B,IAN3B,EAOK,IAPL,CAOU,GAPV,EAOe,aAAK;AACZ,oBAAI,IAAI;AACJ,uBAAI,OAAO,EAAP,IAAa,CADb;AAEJ,uBAAI,OAAO,EAAP,IAAa;AAFb,iBAAR;AAIA,uBAAO,SAAS;AACZ,4BAAQ,CADI;AAEZ,4BAAQ;AAFI,iBAAT,CAAP;AAIH,aAhBL;;;AAmBA,iBAAK,UAAL,GACK,QADL,CACc,QADd,EAEK,IAFL,CAEU,GAFV,EAEe,QAFf,EAGK,KAHL,CAGW,QAHX,EAGqB,SAAS,eAH9B,EAIK,KAJL,CAIW,cAJX,EAI2B,aAAK;AACxB,oBAAI,EAAE,MAAF,CAAS,QAAb,EAAuB;AACnB,2BAAO,WAAW,EAAE,MAAF,CAAS,IAAT,CAAc,KAAzB,IAAkC,IAAzC;AACH,iBAFD,MAEO;AACH,2BAAO,KAAP;AACH;AACJ,aAVL;;;AAaA,iBAAK,IAAL,GAAY,UAAZ,GACK,QADL,CACc,QADd,EAEK,KAFL,CAEW,cAFX,EAE2B,IAF3B,EAGK,IAHL,CAGU,GAHV,EAGe,aAAK;AACZ,oBAAI,IAAI;AACJ,uBAAG,OAAO,CADN;AAEJ,uBAAG,OAAO;AAFN,iBAAR;AAIA,uBAAO,SAAS;AACZ,4BAAQ,CADI;AAEZ,4BAAQ;AAFI,iBAAT,CAAP;AAIH,aAZL,EAaK,MAbL;;;AAgBA,kBAAM,OAAN,CAAc,aAAK;AAAA,2BACA,CAAC,EAAE,CAAH,EAAM,EAAE,CAAR,CADA;AACd,kBAAE,EADY;AACR,kBAAE,EADM;AAElB,aAFD;AAGH;;AAED,iBAAS,QAAT,CAAkB,CAAlB,EAAqB;AACjB,gBAAI,EAAE,QAAN,EAAgB;AACZ,uBAAO,WAAW,EAAE,IAAF,CAAO,KAAlB,IAA2B,CAAlC;AACH,aAFD,MAEO;AACH,uBAAO,CAAP;AACH;AACJ;;AAED,iBAAS,OAAT,CAAiB,CAAjB,EAAoB;AAChB,mBAAO,SAAS,EAAE,IAAF,CAAO,UAAP,GAAoB,EAAE,IAAF,CAAO,KAApC,KAA8C,CAArD;AACH;;;AAGD,iBAAS,KAAT,CAAe,CAAf,EAAkB;;AAEd,gBAAI,GAAG,KAAH,CAAS,gBAAb,EAA+B;AAC3B;AACH;;AAED,gBAAI,GAAG,KAAH,CAAS,QAAb,EAAuB;AACnB,kBAAE,SAAF;AACH,aAFD,MAEO,IAAI,EAAE,QAAN,EAAgB;AACnB,kBAAE,QAAF;AACH,aAFM,MAEA;AACH,kBAAE,MAAF;AACH;AACD,mBAAO,CAAP;AACA,uBAAW,CAAX;AACH;;;AAGD,iBAAS,UAAT,CAAoB,CAApB,EAAuB;AACnB,gBAAI,MAAM,WAAN,IAAqB,MAAM,IAA/B,EAAqC;AACjC,2BAAW,IAAX;AACA;AACH;AACD,0BAAc,CAAd;;;AAGA,iBAAK,WAAL,CAAiB,KAAjB;AACA,cAAE,WAAF,CAAc,IAAd;;;AAGA,uBAAW,MAAX,CAAkB,CAAC,CAAD,EAAI,EAAE,IAAF,CAAO,KAAX,CAAlB;;AAEA,cAAE,MAAF;;;AAGA,gBAAI,GAAG,KAAH,KAAa,IAAjB,EAAuB;AACnB,mBAAG,KAAH,CAAS,cAAT;AACH;AACD,mBAAO,CAAP;AACA,uBAAW,CAAX;AACH;;;AAGD,iBAAS,UAAT,CAAoB,MAApB,EAA4B;AACxB,gBAAI,QAAQ,aAAa,KAAb,EAAZ;AAAA,gBACI,IAAI,CAAC,OAAO,EADhB;AAAA,gBAEI,IAAI,CAAC,OAAO,EAFhB;AAGA,gBAAI,IAAI,KAAJ,GAAY,SAAS,KAAT,GAAiB,CAAjC;AACA,gBAAI,IAAI,KAAJ,GAAY,SAAS,MAAT,GAAkB,CAAlC;AACA,gBAAI,UAAJ,GACK,QADL,CACc,QADd,EAEK,IAFL,CAEU,WAFV,iBAEoC,CAFpC,SAEyC,CAFzC,eAEoD,KAFpD;AAGA,yBAAa,KAAb,CAAmB,KAAnB;AACA,yBAAa,SAAb,CAAuB,CAAC,CAAD,EAAI,CAAJ,CAAvB;AACH;;;AAGD,iBAAS,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB;AACrB,gBAAI,CAAC,SAAS,OAAd,EAAuB;AACnB;AACH;AACD,oBAAQ,IAAR,CAAa,SAAS,UAAT,CAAoB,CAApB,CAAb,EACK,KADL,CACW,KADX,EACmB,GAAG,KAAH,CAAS,KAAT,GAAiB,CAAlB,GAAuB,IADzC,EAEK,KAFL,CAEW,MAFX,EAEoB,GAAG,KAAH,CAAS,KAAT,GAAiB,EAAlB,GAAwB,IAF3C;;AAIA,2BAAe,WAAW,YAAM;AAC5B,wBAAQ,KAAR,CAAc,YAAd,EAA4B,SAA5B;AACH,aAFc,EAEZ,IAFY,CAAf;AAIH;;AAED,iBAAS,UAAT,CAAoB,CAApB,EAAuB,CAAvB,EAA0B;AACtB,gBAAI,CAAC,SAAS,OAAd,EAAuB;AACnB;AACH;AACD,yBAAa,YAAb;AACA,oBAAQ,KAAR,CAAc,YAAd,EAA4B,QAA5B;AACH;;;;AAID,iBAAS,aAAT,CAAuB,CAAvB,EAA0B;AACtB,gBAAI,EAAE,QAAN,EAAgB;AACZ,uBAAO,EAAE,SAAF,GAAc,EAAE,KAAF,IAAW,MAAzB,GAAkC,MAAzC;AACH,aAFD,MAEO;AACH,uBAAO,MAAP;AACH;AACJ;;;AAGD,iBAAS,eAAT,CAAyB,CAAzB,EAA4B;AACxB,gBAAI,EAAE,QAAN,EAAgB;AACZ,uBAAO,EAAE,KAAF,IAAW,MAAlB;AACH,aAFD,MAEO;AACH,uBAAO,MAAP;AACH;AACJ;;;AAGD,iBAAS,eAAT,CAAyB,CAAzB,EAA4B;AACxB,gBAAI,EAAE,MAAF,CAAS,QAAb,EAAuB;AACnB,uBAAO,EAAE,MAAF,CAAS,KAAhB;AACH,aAFD,MAEO;AACH,uBAAO,MAAP;AACH;AACJ;;AAED,iBAAS,UAAT,CAAoB,CAApB,EAAuB;AACnB,8CAAgC,SAAS,eAAT,CAAyB,CAAzB,CAAhC,gBAAsE,SAAS,cAAT,CAAwB,CAAxB,CAAtE;AACH;;AAED,iBAAS,eAAT,CAAyB,CAAzB,EAA4B;AACxB,mBAAO,EAAE,IAAT;AACH;;AAED,iBAAS,cAAT,CAAwB,CAAxB,EAA2B;AACvB,mBAAU,EAAE,IAAF,CAAO,KAAjB;AACH;;AAtZyD,YAwZpD,IAxZoD;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAAA,yCAia7C;AACL,2BAAO,KAAK,QAAL,IAAiB,KAAK,SAA7B;AACH;;;;AAnaqD;AAAA;AAAA,6CAsazC;AACT,yBAAK,QAAL,GAAgB,IAAhB;AACA,wBAAI,KAAK,QAAT,EAAmB;AACf,6BAAK,QAAL,CAAc,OAAd,CAAsB,aAAK;AACvB,8BAAE,UAAF;AACH,yBAFD;AAGH;AACJ;AA7aqD;AAAA;AAAA,4CA+a1C,KA/a0C,EA+anC;AACf,yBAAK,QAAL,GAAgB,KAAhB;AACA,wBAAI,KAAK,QAAT,EAAmB;AACf,6BAAK,QAAL,CAAc,OAAd,CAAsB,aAAK;AACvB,8BAAE,WAAF,CAAc,KAAd;AACH,yBAFD;AAGH,qBAJD,MAIO,IAAI,KAAK,SAAT,EAAoB;AACvB,6BAAK,SAAL,CAAe,OAAf,CAAuB,aAAK;AACxB,8BAAE,WAAF,CAAc,KAAd;AACH,yBAFD;AAGH;AACJ;;;;AA1bqD;AAAA;AAAA,8CA6bxC;AACV,wBAAI,KAAK,QAAL,IAAiB,KAAK,QAAL,CAAc,MAAd,KAAyB,CAA9C,EAAiD;AAC7C,6BAAK,QAAL,GAAgB,IAAhB;AACH;AACD,wBAAI,KAAK,QAAT,EAAmB;AACf,6BAAK,SAAL,GAAiB,KAAK,QAAtB;AACA,6BAAK,SAAL,CAAe,OAAf,CAAuB,aAAK;AACxB,8BAAE,WAAF;AACH,yBAFD;AAGA,6BAAK,QAAL,GAAgB,IAAhB;AACH;AACJ;;;;AAxcqD;AAAA;AAAA,2CA2c3C;AACP,wBAAI,KAAK,QAAT,EAAmB;AACf,6BAAK,SAAL,GAAiB,KAAK,QAAtB;AACA,6BAAK,QAAL,GAAgB,IAAhB;AACH;AACJ;AAhdqD;AAAA;AAAA,4CAkd1C;AACR,yBAAK,MAAL,CAAY,EAAZ;AACH;;;;AApdqD;AAAA;AAAA,yCAudxC;AAAA,wBAAP,CAAO,yDAAH,CAAG;;AACV,wBAAI,IAAI,CAAR,EAAW;AACP,4BAAI,KAAK,SAAT,EAAoB;AAChB,iCAAK,QAAL,GAAgB,KAAK,SAArB;AACA,iCAAK,SAAL,GAAiB,IAAjB;AACH;AACD,4BAAI,KAAK,QAAT,EAAmB;AACf,iCAAK,QAAL,CAAc,OAAd,CAAsB,aAAK;AACvB,kCAAE,MAAF,CAAS,IAAI,CAAb;AACH,6BAFD;AAGH;AACJ;AACJ;AAneqD;AAAA;AAAA,2CAyZpC,IAzZoC,EAyZ9B;AACpB,wBAAI,KAAK,QAAT,EAAmB;AACf,6BAAK,QAAL,GAAgB,KAAK,QAAL,CAAc,GAAd,CAAkB;AAAA,mCAAK,KAAK,UAAL,CAAgB,CAAhB,CAAL;AAAA,yBAAlB,CAAhB;AACH;AACD,2BAAO,SAAc,IAAI,IAAJ,EAAd,EAA0B,IAA1B,CAAP;AACH;AA9ZqD;;AAAA;AAAA;;;;;AAue1D,aAAK,KAAL,GAAa,SAAS,KAAT,GAAiB;AAC1B,yBAAa,KAAb,CAAmB,CAAnB;AACA,uBAAW,IAAX;AACH,SAHD;;;AAMA;;;AAGA,eAAO,IAAP;AACH,KAjfD;;AAmfA,aAAS,MAAT,CAAgB,QAAhB,EAA0B,MAA1B,EAAkC;AAC9B,eAAO,KAAK,IAAL,CAAU,YAAY;AACzB,gBAAI,QAAQ,EAAE,IAAF,CAAZ;AACA,gBAAI,OAAO,MAAM,IAAN,CAAW,cAAX,CAAX;AACA,gBAAI,UAAU,EAAE,MAAF,CAAS,EAAT,EAAa,MAAM,IAAN,EAAb,EAA2B,QAAO,MAAP,yCAAO,MAAP,OAAkB,QAAlB,IAA8B,MAAzD,CAAd;;AAEA,gBAAI,CAAC,IAAL,EAAW;AACP,sBAAM,IAAN,CAAW,cAAX,EAA4B,OAAO,IAAI,QAAJ,CAAa,IAAb,EAAmB,QAAnB,EAA6B,OAA7B,CAAnC;AACH;AACD,gBAAI,OAAO,MAAP,KAAkB,QAAtB,EAAgC;AAC5B,qBAAK,MAAL;AACH;AACJ,SAXM,CAAP;AAYH;;AAED,MAAE,EAAF,CAAK,QAAL,GAAgB,MAAhB;AACA,MAAE,EAAF,CAAK,QAAL,CAAc,WAAd,GAA4B,QAA5B;AACH,CArgBD","file":"unipept-visualizations.es5.js","sourcesContent":["/**\n * Zoomable treeview, inspiration from\n * - http://bl.ocks.org/mbostock/4339083\n * - https://gist.github.com/robschmuecker/7880033\n * - http://www.brightpointinc.com/interactive/budget/index.html?source=d3js\n */\n(function () {\n    var TreeView = function TreeView(element, data, options = {}) {\n        let that = {};\n\n        const MARGIN = {\n                top: 5,\n                right: 5,\n                bottom: 5,\n                left: 5\n            },\n            DURATION = 750,\n            COLOR_SCALE = d3.scale.category10(),\n            DEFAULTS = {\n                height: 300,\n                width: 600,\n\n                colors: d => COLOR_SCALE(d.name),\n                nodeFillColor: nodeFillColor,\n                nodeStrokeColor: nodeStrokeColor,\n                linkStrokeColor: linkStrokeColor,\n\n                tooltip: true,\n                getTooltip: getTooltip,\n                getTooltipTitle: getTooltipTitle,\n                getTooltipText: getTooltipText\n            };\n\n        let settings;\n\n        let visibleRoot,\n            tooltipTimer;\n\n        let nodeId = 0,\n            root;\n\n        let tree,\n            tooltip,\n            diagonal,\n            widthScale,\n            arcScale,\n            innerArc,\n            zoomListener,\n            svg;\n\n        function init() {\n            settings = Object.assign({}, DEFAULTS, options);\n\n            settings.width = settings.width - MARGIN.right - MARGIN.left;\n            settings.height = settings.height - MARGIN.top - MARGIN.bottom;\n\n            if (settings.tooltip) {\n                initTooltip();\n            }\n\n            tree = d3.layout.tree()\n                .nodeSize([2, 10])\n                .separation((a, b) => {\n                    let width = (nodeSize(a) + nodeSize(b)),\n                        distance = width / 2 + 4;\n                    return (a.parent === b.parent) ? distance : distance + 4;\n                });\n\n            diagonal = d3.svg.diagonal().projection(d => [d.y, d.x]);\n\n            widthScale = d3.scale.linear().range([2, 105]);\n            arcScale = d3.scale.linear().range([0, 2 * Math.PI]);\n\n            innerArc = d3.svg.arc()\n                .outerRadius(nodeSize)\n                .startAngle(0)\n                .endAngle(arcSize);\n\n            // define the zoomListener which calls the zoom function on the \"zoom\" event constrained within the scaleExtents\n            zoomListener = d3.behavior.zoom()\n                .scaleExtent([0.1, 3])\n                .on(\"zoom\", () => {\n                    svg.attr(\"transform\", `translate(${d3.event.translate})scale(${d3.event.scale})`);\n                });\n\n            svg = d3.select(element).append(\"svg\")\n                .attr(\"version\", \"1.1\")\n                .attr(\"xmlns\", \"http://www.w3.org/2000/svg\")\n                .attr(\"viewBox\", `0 0 ${settings.width + MARGIN.right + MARGIN.left} ${settings.height + MARGIN.top + MARGIN.bottom}`)\n                .attr(\"width\", settings.width + MARGIN.right + MARGIN.left)\n                .attr(\"height\", settings.height + MARGIN.top + MARGIN.bottom)\n                .call(zoomListener)\n                .append(\"g\")\n                .attr(\"transform\", `translate(${MARGIN.left},${MARGIN.top})`)\n                .append(\"g\");\n\n            draw(Node.createNode(data));\n        }\n\n        function initTooltip() {\n            tooltip = d3.select(\"body\")\n                .append(\"div\")\n                .attr(\"id\", element.id + \"-tooltip\")\n                .attr(\"class\", \"tip\")\n                .style(\"position\", \"absolute\")\n                .style(\"z-index\", \"10\")\n                .style(\"visibility\", \"hidden\")\n                .style(\"background-color\", \"white\")\n                .style(\"padding\", \"2px\")\n                .style(\"border\", \"1px solid #dddddd\")\n                .style(\"border-radius\", \"3px;\");\n        }\n\n        function draw(data) {\n            widthScale.domain([0, data.data.count]);\n\n            root = data;\n            root.x0 = settings.height / 2;\n            root.y0 = 0;\n\n            // set everything visible\n            root.setVisible();\n\n            // set colors\n            function color(d, i, c) {\n                if (c) {\n                    d.color = c;\n                } else {\n                    d.color = d3.functor(settings.colors).call(this, d, i);\n                }\n                if (d.children) {\n                    d.children.forEach((node) => {\n                        color(node, i, d.color);\n                    });\n                }\n            }\n            root.children.forEach((node, i) => {\n                color(node, i);\n            });\n\n            // collapse everything\n            root.collapseAll();\n            root.expand();\n\n            update(root);\n            centerNode(root);\n        }\n\n        function update(source) {\n            // Compute the new tree layout.\n            let nodes = tree.nodes(root).reverse(),\n                links = tree.links(nodes);\n\n            // Normalize for fixed-depth.\n            nodes.forEach(d => {\n                d.y = d.depth * 180;\n            });\n\n            // Update the nodes…\n            let node = svg.selectAll(\"g.node\")\n                .data(nodes, d => d.id || (d.id = ++nodeId));\n\n            // Enter any new nodes at the parent's previous position.\n            let nodeEnter = node.enter().append(\"g\")\n                .attr(\"class\", \"node\")\n                .style(\"cursor\", \"pointer\")\n                .attr(\"transform\", d => `translate(${source.y || 0},${source.x0 || 0})`)\n                .on(\"click\", click)\n                .on(\"mouseover\", tooltipIn)\n                .on(\"mouseout\", tooltipOut)\n                .on(\"contextmenu\", rightClick);\n\n            nodeEnter.append(\"circle\")\n                .attr(\"r\", 1e-6)\n                .style(\"stroke-width\", \"1.5px\")\n                .style(\"stroke\", settings.nodeStrokeColor)\n                .style(\"fill\", settings.nodeFillColor);\n\n            nodeEnter.append(\"path\")\n                .attr(\"d\", innerArc)\n                .style(\"fill\", settings.nodeStrokeColor)\n                .style(\"fill-opacity\", 0);\n\n            nodeEnter.append(\"text\")\n                .attr(\"x\", d => d.isLeaf() ? -10 : 10)\n                .attr(\"dy\", \".35em\")\n                .attr(\"text-anchor\", d => d.isLeaf() ? \"end\" : \"start\")\n                .text(d => d.name)\n                .style(\"font\", \"10px sans-serif\")\n                .style(\"fill-opacity\", 1e-6);\n\n            // Transition nodes to their new position.\n            let nodeUpdate = node.transition()\n                .duration(DURATION)\n                .attr(\"transform\", d => `translate(${d.y},${d.x})`);\n\n            nodeUpdate.select(\"circle\")\n                .attr(\"r\", nodeSize)\n                .style(\"fill-opacity\", d => d._children ? 1 : 0)\n                .style(\"stroke\", settings.nodeStrokeColor)\n                .style(\"fill\", settings.nodeFillColor);\n\n            nodeUpdate.select(\"text\")\n                .style(\"fill-opacity\", 1);\n\n            nodeUpdate.select(\"path\")\n                .duration(DURATION)\n                .attr(\"d\", innerArc)\n                .style(\"fill-opacity\", 0.8);\n\n            // Transition exiting nodes to the parent's new position.\n            let nodeExit = node.exit().transition()\n                .duration(DURATION)\n                .attr(\"transform\", d => `translate(${source.y},${source.x})`)\n                .remove();\n\n            nodeExit.select(\"circle\")\n                .attr(\"r\", 1e-6);\n\n            nodeExit.select(\"path\")\n                .style(\"fill-opacity\", 1e-6);\n\n            nodeExit.select(\"text\")\n                .style(\"fill-opacity\", 1e-6);\n\n            // Update the links…\n            let link = svg.selectAll(\"path.link\")\n                .data(links, d => d.target.id);\n\n            // Enter any new links at the parent's previous position.\n            link.enter().insert(\"path\", \"g\")\n                .attr(\"class\", \"link\")\n                .style(\"fill\", \"none\")\n                .style(\"stroke-opacity\", \"0.5\")\n                .style(\"stroke-linecap\", \"round\")\n                .style(\"stroke\", settings.linkStrokeColor)\n                .style(\"stroke-width\", 1e-6)\n                .attr(\"d\", d => {\n                    let o = {\n                        x: (source.x0 || 0),\n                        y: (source.y0 || 0)\n                    };\n                    return diagonal({\n                        source: o,\n                        target: o\n                    });\n                });\n\n            // Transition links to their new position.\n            link.transition()\n                .duration(DURATION)\n                .attr(\"d\", diagonal)\n                .style(\"stroke\", settings.linkStrokeColor)\n                .style(\"stroke-width\", d => {\n                    if (d.source.selected) {\n                        return widthScale(d.target.data.count) + \"px\";\n                    } else {\n                        return \"4px\";\n                    }\n                });\n\n            // Transition exiting nodes to the parent's new position.\n            link.exit().transition()\n                .duration(DURATION)\n                .style(\"stroke-width\", 1e-6)\n                .attr(\"d\", d => {\n                    let o = {\n                        x: source.x,\n                        y: source.y\n                    };\n                    return diagonal({\n                        source: o,\n                        target: o\n                    });\n                })\n                .remove();\n\n            // Stash the old positions for transition.\n            nodes.forEach(d => {\n                [d.x0, d.y0] = [d.x, d.y];\n            });\n        }\n\n        function nodeSize(d) {\n            if (d.selected) {\n                return widthScale(d.data.count) / 2;\n            } else {\n                return 2;\n            }\n        }\n\n        function arcSize(d) {\n            return arcScale(d.data.self_count / d.data.count) || 0;\n        }\n\n        // Toggle children on click.\n        function click(d) {\n            // check if click is triggered by panning on a node\n            if (d3.event.defaultPrevented) {\n                return;\n            }\n\n            if (d3.event.shiftKey) {\n                d.expandAll();\n            } else if (d.children) {\n                d.collapse();\n            } else {\n                d.expand();\n            }\n            update(d);\n            centerNode(d);\n        }\n\n        // Sets the width of the right clicked node to 100%\n        function rightClick(d) {\n            if (d === visibleRoot && d !== root) {\n                rightClick(root);\n                return;\n            }\n            visibleRoot = d;\n\n            // set Selection properties\n            root.setSelected(false);\n            d.setSelected(true);\n\n            // scale the lines\n            widthScale.domain([0, d.data.count]);\n\n            d.expand();\n\n            // redraw\n            if (d3.event !== null) {\n                d3.event.preventDefault();\n            }\n            update(d);\n            centerNode(d);\n        }\n\n        // Center a node\n        function centerNode(source) {\n            let scale = zoomListener.scale(),\n                x = -source.y0,\n                y = -source.x0;\n            x = x * scale + settings.width / 4;\n            y = y * scale + settings.height / 2;\n            svg.transition()\n                .duration(DURATION)\n                .attr(\"transform\", `translate(${x},${y})scale(${scale})`);\n            zoomListener.scale(scale);\n            zoomListener.translate([x, y]);\n        }\n\n        // tooltip functions\n        function tooltipIn(d, i) {\n            if (!settings.tooltip) {\n                return;\n            }\n            tooltip.html(settings.getTooltip(d))\n                .style(\"top\", (d3.event.pageY - 5) + \"px\")\n                .style(\"left\", (d3.event.pageX + 15) + \"px\");\n\n            tooltipTimer = setTimeout(() => {\n                tooltip.style(\"visibility\", \"visible\");\n            }, 1000);\n\n        }\n\n        function tooltipOut(d, i) {\n            if (!settings.tooltip) {\n                return;\n            }\n            clearTimeout(tooltipTimer);\n            tooltip.style(\"visibility\", \"hidden\");\n        }\n\n        /************** Default methods ***************/\n        // set fill color\n        function nodeFillColor(d) {\n            if (d.selected) {\n                return d._children ? d.color || \"#aaa\" : \"#fff\";\n            } else {\n                return \"#aaa\";\n            }\n        }\n\n        // set node stroke color\n        function nodeStrokeColor(d) {\n            if (d.selected) {\n                return d.color || \"#aaa\";\n            } else {\n                return \"#aaa\";\n            }\n        }\n\n        // set link stroke color\n        function linkStrokeColor(d) {\n            if (d.source.selected) {\n                return d.target.color;\n            } else {\n                return \"#aaa\";\n            }\n        }\n\n        function getTooltip(d) {\n            return `<h3 class='tip-title'>${settings.getTooltipTitle(d)}</h3><p>${settings.getTooltipText(d)}</p>`;\n        }\n\n        function getTooltipTitle(d) {\n            return d.name;\n        }\n\n        function getTooltipText(d) {\n            return `${d.data.count} hits`;\n        }\n\n        class Node {\n            static createNode(node) {\n                if (node.children) {\n                    node.children = node.children.map(n => Node.createNode(n));\n                }\n                return Object.assign(new Node(), node);\n            }\n\n            // Returns true if a node is a leaf\n            isLeaf() {\n                return this.children || this._children;\n            }\n\n            // set node and children visible\n            setVisible() {\n                this.selected = true;\n                if (this.children) {\n                    this.children.forEach(c => {\n                        c.setVisible();\n                    });\n                }\n            }\n\n            setSelected(value) {\n                this.selected = value;\n                if (this.children) {\n                    this.children.forEach(c => {\n                        c.setSelected(value);\n                    });\n                } else if (this._children) {\n                    this._children.forEach(c => {\n                        c.setSelected(value);\n                    });\n                }\n            }\n\n            // collapse everything\n            collapseAll() {\n                if (this.children && this.children.length === 0) {\n                    this.children = null;\n                }\n                if (this.children) {\n                    this._children = this.children;\n                    this._children.forEach(c => {\n                        c.collapseAll();\n                    });\n                    this.children = null;\n                }\n            }\n\n            // Collapses a node\n            collapse() {\n                if (this.children) {\n                    this._children = this.children;\n                    this.children = null;\n                }\n            }\n\n            expandAll() {\n                this.expand(30);\n            }\n\n            // Expands a node and its children\n            expand(i = 2) {\n                if (i > 0) {\n                    if (this._children) {\n                        this.children = this._children;\n                        this._children = null;\n                    }\n                    if (this.children) {\n                        this.children.forEach(c => {\n                            c.expand(i - 1);\n                        });\n                    }\n                }\n            }\n        }\n\n        /*************** Public methods ***************/\n        that.reset = function reset() {\n            zoomListener.scale(1);\n            rightClick(root);\n        };\n\n        // initialize the object\n        init();\n\n        // return the object\n        return that;\n    };\n\n    function Plugin(userData, option) {\n        return this.each(function () {\n            let $this = $(this);\n            let data = $this.data('vis.treeview');\n            let options = $.extend({}, $this.data(), typeof option === 'object' && option);\n\n            if (!data) {\n                $this.data('vis.treeview', (data = new TreeView(this, userData, options)));\n            }\n            if (typeof option === 'string') {\n                data[option]();\n            }\n        });\n    }\n\n    $.fn.treeview = Plugin;\n    $.fn.treeview.Constructor = TreeView;\n})();\n"]}