{"version":3,"sources":["unipept-visualizations.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","id","loaded","call","m","c","p","_treeview","_treeview2","_interopRequireDefault","_treemap","_treemap2","_sunburst","_sunburst2","obj","__esModule","default","Object","defineProperty","value","_typeof","Symbol","iterator","constructor","prototype","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","TreeView","_univis","_univis2","_treeviewNode","_treeviewNode2","element","data","options","undefined","that","MARGIN","top","right","bottom","left","DURATION","COLOR_SCALE","d3","scale","category10","DEFAULTS","height","width","nodeDistance","levelsToExpand","minNodeSize","maxNodeSize","countAccessor","d","count","colors","name","nodeFillColor","nodeStrokeColor","linkStrokeColor","enableInnerArcs","enableExpandOnClick","enableRightClick","enableLabels","getLabel","enableTooltips","getTooltip","getTooltipTitle","getTooltipText","settings","visibleRoot","tooltipTimer","nodeId","root","tree","tooltip","diagonal","widthScale","innerArc","zoomListener","svg","init","initTooltip","initInnerArcs","layout","nodeSize","separation","a","b","distance","parent","projection","y","x","linear","range","behavior","zoom","scaleExtent","on","attr","event","translate","select","append","draw","createNode","style","arcScale","Math","PI","arc","outerRadius","startAngle","endAngle","self_count","_this","domain","x0","y0","setSelected","children","forEach","color","functor","setRecursiveProperty","collapseAll","expand","expandAll","update","centerNode","nodes","reverse","links","depth","node","selectAll","nodeEnter","enter","click","tooltipIn","tooltipOut","rightClick","isLeaf","text","nodeUpdate","transition","duration","_children","nodeExit","exit","remove","link","insert","o","selected","_ref","defaultPrevented","shiftKey","collapse","reroot","preventDefault","html","pageY","pageX","setTimeout","clearTimeout","reset","Plugin","userData","option","each","$this","$","extend","fn","treeview","Constructor","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","_classCallCheck","instance","TypeError","Univis","stringHash","s","split","reduce","charCodeAt","getReadableColorFor","textColor","brightness","rgb","err","r","g","_node","_node2","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","TreeviewNode","_Node","getPrototypeOf","setCount","sum","_new","new","Node","property","getHeight","_height","max","getDepth","_depth","construct","map","n","TreeMap","_treemapNode","_treemapNode2","className","levels","getLevel","rerootCallback","getBreadcrumbTooltip","colorRoot","colorLeaf","colorBreadcrumbs","labelHeight","current","treemapLayout","breadcrumbs","treemap","colorScale","initCSS","elementClass","addClass","prop","appendTo","empty","size","padding","interpolate","interpolateLab","setBreadcrumbs","crumbs","temp","push","triggerCallback","tooltipMove","order","position","dx","dy","resize","setFullScreen","isFullScreen","w","h","window","TreemapNode","apply","Sunburst","_sunburstNode","_sunburstNode2","_toConsumableArray","arr","Array","isArray","arr2","from","COLORS","FIXED_COLORS","breadcrumbWidth","radius","fixedColors","useFixedColors","colorCounter","path","currentMaxLevel","addEmptyChildren","redraw","vis","partition","textEnter","sort","min","innerRadius","colour","getComputedTextLength","arcTween","my","maxY","xd","yd","yr","t","shift","breadArc","bc","rank","round","attrTween","e","isParentOf","multiline","angle","rotate","some","abs","colours","hsl","singleChild","l","getColor","redrawColors","sunburst","SunburstNode"],"mappings":";;;;AAAA,QAAS,CAAC,UAASA,OAAT,EAAkB;AAAE;AAC9B,SAD4B,CAClB;AACV,SAAU,IAAIC,mBAAmB,EAAvB;AACV;AACA,SAJ4B,CAIlB;AACV,SAAU,SAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AACjD;AACA,UAFiD,CAEtC;AACX,UAAW,IAAGF,iBAAiBE,QAAjB,CAAH;AACX,WAAY,OAAOF,iBAAiBE,QAAjB,EAA2BC,OAAlC;AACZ;AACA,UANiD,CAMtC;AACX,UAAW,IAAIC,SAASJ,iBAAiBE,QAAjB,IAA6B;AACrD,WAAYC,SAAS,EADgC;AAErD,WAAYE,IAAIH,QAFqC;AAGrD,WAAYI,QAAQ;AACpB,WAJqD,EAA1C;AAKX;AACA,UAbiD,CAatC;AACX,UAAWP,QAAQG,QAAR,EAAkBK,IAAlB,CAAuBH,OAAOD,OAA9B,EAAuCC,MAAvC,EAA+CA,OAAOD,OAAtD,EAA+DF,mBAA/D;AACX;AACA,UAhBiD,CAgBtC;AACX,UAAWG,OAAOE,MAAP,GAAgB,IAAhB;AACX;AACA,UAnBiD,CAmBtC;AACX,UAAW,OAAOF,OAAOD,OAAd;AACX;AAAW;AACX;AACA;AACA,SA7B4B,CA6BlB;AACV,SAAUF,oBAAoBO,CAApB,GAAwBT,OAAxB;AACV;AACA,SAhC4B,CAgClB;AACV,SAAUE,oBAAoBQ,CAApB,GAAwBT,gBAAxB;AACV;AACA,SAnC4B,CAmClB;AACV,SAAUC,oBAAoBS,CAApB,GAAwB,EAAxB;AACV;AACA,SAtC4B,CAsClB;AACV,SAAU,OAAOT,oBAAoB,CAApB,CAAP;AACV;AAAU,CAxCD;AAyCT;AACA,QAAU;AACV;AACA,KAAM,UAASG,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;;AAEpD;;AAEA,KAAIU,YAAYV,oBAAoB,CAApB,CAAhB;;AAEA,KAAIW,aAAaC,uBAAuBF,SAAvB,CAAjB;;AAEA,KAAIG,WAAWb,oBAAoB,CAApB,CAAf;;AAEA,KAAIc,YAAYF,uBAAuBC,QAAvB,CAAhB;;AAEA,KAAIE,YAAYf,oBAAoB,CAApB,CAAhB;;AAEA,KAAIgB,aAAaJ,uBAAuBG,SAAvB,CAAjB;;AAEA,UAASH,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAEhG;AAAO,CApBG;AAqBV;AACA,KAAM,UAASd,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;;AAEpD;;AAEAoB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIC,UAAU,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,SAAOA,OAAOC,QAAd,MAA2B,QAA3D,GAAsE,UAAUR,GAAV,EAAe;AAAE,gBAAcA,GAAd,0CAAcA,GAAd;AAAoB,EAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,SAAOA,OAAO,OAAOO,MAAP,KAAkB,UAAzB,IAAuCP,IAAIS,WAAJ,KAAoBF,MAA3D,IAAqEP,QAAQO,OAAOG,SAApF,GAAgG,QAAhG,UAAkHV,GAAlH,0CAAkHA,GAAlH,CAAP;AAA+H,EAA5Q;;AAEA,KAAIW,WAAWR,OAAOS,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,UAAUC,MAA9B,EAAsCF,GAAtC,EAA2C;AAAE,OAAIG,SAASF,UAAUD,CAAV,CAAb,CAA2B,KAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,QAAId,OAAOO,SAAP,CAAiBS,cAAjB,CAAgC9B,IAAhC,CAAqC4B,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,YAAOK,GAAP,IAAcD,OAAOC,GAAP,CAAd;AAA4B;AAAE;AAAE,GAAC,OAAOL,MAAP;AAAgB,EAAhQ,CAVoD,CAU8M;;;;;;;AAQlQ5B,SAAQiB,OAAR,GAAkBkB,QAAlB;;AAEA,KAAIC,UAAUtC,oBAAoB,CAApB,CAAd;;AAEA,KAAIuC,WAAW3B,uBAAuB0B,OAAvB,CAAf;;AAEA,KAAIE,gBAAgBxC,oBAAoB,CAApB,CAApB;;AAEA,KAAIyC,iBAAiB7B,uBAAuB4B,aAAvB,CAArB;;AAEA,UAAS5B,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,UAASoB,QAAT,CAAkBK,OAAlB,EAA2BC,IAA3B,EAAiC;AAC7B,MAAIC,UAAUZ,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAAlF;;AAEA,MAAIc,OAAO,EAAX;;AAEA,MAAIC,SAAS;AACTC,QAAK,CADI;AAETC,UAAO,CAFE;AAGTC,WAAQ,CAHC;AAITC,SAAM;AAJG,GAAb;AAAA,MAMIC,WAAW,GANf;AAAA,MAOIC,cAAcC,GAAGC,KAAH,CAASC,UAAT,EAPlB;AAAA,MAQIC,WAAW;AACXC,WAAQ,GADG;AAEXC,UAAO,GAFI;AAGXC,iBAAc,GAHH;AAIXC,mBAAgB,CAJL;AAKXC,gBAAa,CALF;AAMXC,gBAAa,GANF;;AAQXC,kBAAe,SAASA,aAAT,CAAuBC,CAAvB,EAA0B;AACrC,WAAOA,EAAEtB,IAAF,CAAOuB,KAAd;AACH,IAVU;;AAYXC,WAAQ,SAASA,MAAT,CAAgBF,CAAhB,EAAmB;AACvB,WAAOZ,YAAYY,EAAEG,IAAd,CAAP;AACH,IAdU;AAeXC,kBAAeA,aAfJ;AAgBXC,oBAAiBA,eAhBN;AAiBXC,oBAAiBA,eAjBN;;AAmBXC,oBAAiB,IAnBN;AAoBXC,wBAAqB,IApBV;AAqBXC,qBAAkB,IArBP;;AAuBXC,iBAAc,IAvBH;AAwBXC,aAAU,SAASA,QAAT,CAAkBX,CAAlB,EAAqB;AAC3B,WAAOA,EAAEG,IAAT;AACH,IA1BU;;AA4BXS,mBAAgB,IA5BL;AA6BXC,eAAYA,UA7BD;AA8BXC,oBAAiBxC,SAASpB,OAAT,CAAiB4D,eA9BvB;AA+BXC,mBAAgBzC,SAASpB,OAAT,CAAiB6D;AA/BtB,GARf;;AA0CA,MAAIC,WAAW,KAAK,CAApB;;AAEA,MAAIC,cAAc,KAAK,CAAvB;AAAA,MACIC,eAAe,KAAK,CADxB;;AAGA,MAAIC,SAAS,CAAb;AAAA,MACIC,OAAO,KAAK,CADhB;;AAGA,MAAIC,OAAO,KAAK,CAAhB;AAAA,MACIC,UAAU,KAAK,CADnB;AAAA,MAEIC,WAAW,KAAK,CAFpB;AAAA,MAGIC,aAAa,KAAK,CAHtB;AAAA,MAIIC,WAAW,KAAK,CAJpB;AAAA,MAKIC,eAAe,KAAK,CALxB;AAAA,MAMIC,MAAM,KAAK,CANf;;AAQA,WAASC,IAAT,GAAgB;AACZZ,cAAWrD,SAAS,EAAT,EAAa6B,QAAb,EAAuBb,OAAvB,CAAX;AACAH,kBAAetB,OAAf,CAAuB8D,QAAvB,GAAkCA,QAAlC;;AAEAA,YAAStB,KAAT,GAAiBsB,SAAStB,KAAT,GAAiBZ,OAAOE,KAAxB,GAAgCF,OAAOI,IAAxD;AACA8B,YAASvB,MAAT,GAAkBuB,SAASvB,MAAT,GAAkBX,OAAOC,GAAzB,GAA+BD,OAAOG,MAAxD;;AAEA,OAAI+B,SAASJ,cAAb,EAA6B;AACzBiB;AACH;;AAED,OAAIb,SAAST,eAAb,EAA8B;AAC1BuB;AACH;;AAEDT,UAAOhC,GAAG0C,MAAH,CAAUV,IAAV,GAAiBW,QAAjB,CAA0B,CAAC,CAAD,EAAI,EAAJ,CAA1B,EAAmCC,UAAnC,CAA8C,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AACjE,QAAIzC,QAAQsC,SAASE,CAAT,IAAcF,SAASG,CAAT,CAA1B;AAAA,QACIC,WAAW1C,QAAQ,CAAR,GAAY,CAD3B;AAEA,WAAOwC,EAAEG,MAAF,KAAaF,EAAEE,MAAf,GAAwBD,QAAxB,GAAmCA,WAAW,CAArD;AACH,IAJM,CAAP;;AAMAb,cAAWlC,GAAGsC,GAAH,CAAOJ,QAAP,GAAkBe,UAAlB,CAA6B,UAAUtC,CAAV,EAAa;AACjD,WAAO,CAACA,EAAEuC,CAAH,EAAMvC,EAAEwC,CAAR,CAAP;AACH,IAFU,CAAX;;AAIAhB,gBAAanC,GAAGC,KAAH,CAASmD,MAAT,GAAkBC,KAAlB,CAAwB,CAAC1B,SAASnB,WAAV,EAAuBmB,SAASlB,WAAhC,CAAxB,CAAb;;AAEA;AACA4B,kBAAerC,GAAGsD,QAAH,CAAYC,IAAZ,GAAmBC,WAAnB,CAA+B,CAAC,GAAD,EAAM,CAAN,CAA/B,EAAyCC,EAAzC,CAA4C,MAA5C,EAAoD,YAAY;AAC3EnB,QAAIoB,IAAJ,CAAS,WAAT,EAAsB,eAAe1D,GAAG2D,KAAH,CAASC,SAAxB,GAAoC,SAApC,GAAgD5D,GAAG2D,KAAH,CAAS1D,KAAzD,GAAiE,GAAvF;AACH,IAFc,CAAf;;AAIAqC,SAAMtC,GAAG6D,MAAH,CAAUzE,OAAV,EAAmB0E,MAAnB,CAA0B,KAA1B,EAAiCJ,IAAjC,CAAsC,SAAtC,EAAiD,KAAjD,EAAwDA,IAAxD,CAA6D,OAA7D,EAAsE,4BAAtE,EAAoGA,IAApG,CAAyG,SAAzG,EAAoH,UAAU/B,SAAStB,KAAT,GAAiBZ,OAAOE,KAAxB,GAAgCF,OAAOI,IAAjD,IAAyD,GAAzD,IAAgE8B,SAASvB,MAAT,GAAkBX,OAAOC,GAAzB,GAA+BD,OAAOG,MAAtG,CAApH,EAAmO8D,IAAnO,CAAwO,OAAxO,EAAiP/B,SAAStB,KAAT,GAAiBZ,OAAOE,KAAxB,GAAgCF,OAAOI,IAAxR,EAA8R6D,IAA9R,CAAmS,QAAnS,EAA6S/B,SAASvB,MAAT,GAAkBX,OAAOC,GAAzB,GAA+BD,OAAOG,MAAnV,EAA2V5C,IAA3V,CAAgWqF,YAAhW,EAA8WyB,MAA9W,CAAqX,GAArX,EAA0XJ,IAA1X,CAA+X,WAA/X,EAA4Y,eAAejE,OAAOI,IAAtB,GAA6B,GAA7B,GAAmCJ,OAAOC,GAA1C,GAAgD,GAA5b,EAAicoE,MAAjc,CAAwc,GAAxc,CAAN;;AAEAC,QAAK5E,eAAetB,OAAf,CAAuBmG,UAAvB,CAAkC3E,IAAlC,CAAL;AACH;;AAED,WAASmD,WAAT,GAAuB;AACnBP,aAAUjC,GAAG6D,MAAH,CAAU,MAAV,EAAkBC,MAAlB,CAAyB,KAAzB,EAAgCJ,IAAhC,CAAqC,IAArC,EAA2CtE,QAAQtC,EAAR,GAAa,UAAxD,EAAoE4G,IAApE,CAAyE,OAAzE,EAAkF,KAAlF,EAAyFO,KAAzF,CAA+F,UAA/F,EAA2G,UAA3G,EAAuHA,KAAvH,CAA6H,SAA7H,EAAwI,IAAxI,EAA8IA,KAA9I,CAAoJ,YAApJ,EAAkK,QAAlK,EAA4KA,KAA5K,CAAkL,kBAAlL,EAAsM,OAAtM,EAA+MA,KAA/M,CAAqN,SAArN,EAAgO,KAAhO,EAAuOA,KAAvO,CAA6O,QAA7O,EAAuP,mBAAvP,EAA4QA,KAA5Q,CAAkR,eAAlR,EAAmS,MAAnS,CAAV;AACH;;AAED,WAASxB,aAAT,GAAyB;AACrB,OAAIyB,WAAWlE,GAAGC,KAAH,CAASmD,MAAT,GAAkBC,KAAlB,CAAwB,CAAC,CAAD,EAAI,IAAIc,KAAKC,EAAb,CAAxB,CAAf;;AAEAhC,cAAWpC,GAAGsC,GAAH,CAAO+B,GAAP,GAAaC,WAAb,CAAyB3B,QAAzB,EAAmC4B,UAAnC,CAA8C,CAA9C,EAAiDC,QAAjD,CAA0D,UAAU7D,CAAV,EAAa;AAC9E,WAAOuD,SAASvD,EAAEtB,IAAF,CAAOoF,UAAP,GAAoB9D,EAAEtB,IAAF,CAAOuB,KAApC,KAA8C,CAArD;AACH,IAFU,CAAX;AAGH;;AAED,WAASmD,IAAT,CAAc1E,IAAd,EAAoB;AAChB,OAAIqF,QAAQ,IAAZ;;AAEAvC,cAAWwC,MAAX,CAAkB,CAAC,CAAD,EAAItF,KAAKA,IAAL,CAAUuB,KAAd,CAAlB;;AAEAmB,UAAO1C,IAAP;AACA0C,QAAK6C,EAAL,GAAUjD,SAASvB,MAAT,GAAkB,CAA5B;AACA2B,QAAK8C,EAAL,GAAU,CAAV;;AAEA;AACA9C,QAAK+C,WAAL,CAAiB,IAAjB;;AAEA/C,QAAKgD,QAAL,CAAcC,OAAd,CAAsB,UAAUrE,CAAV,EAAalC,CAAb,EAAgB;AAClCkC,MAAEsE,KAAF,GAAUjF,GAAGkF,OAAH,CAAWvD,SAASd,MAApB,EAA4B7D,IAA5B,CAAiC0H,KAAjC,EAAwC/D,CAAxC,EAA2ClC,CAA3C,CAAV;AACAkC,MAAEwE,oBAAF,CAAuB,OAAvB,EAAgCxE,EAAEsE,KAAlC;AACH,IAHD;;AAKA,OAAItD,SAASR,mBAAb,EAAkC;AAC9BY,SAAKqD,WAAL;AACArD,SAAKsD,MAAL;AACH,IAHD,MAGO;AACHtD,SAAKuD,SAAL;AACH;;AAEDC,UAAOxD,IAAP;AACAyD,cAAWzD,IAAX;AACH;;AAED,WAASwD,MAAT,CAAgB3G,MAAhB,EAAwB;AACpB;AACA,OAAI6G,QAAQzD,KAAKyD,KAAL,CAAW1D,IAAX,EAAiB2D,OAAjB,EAAZ;AAAA,OACIC,QAAQ3D,KAAK2D,KAAL,CAAWF,KAAX,CADZ;;AAGA;AACAA,SAAMT,OAAN,CAAc,UAAUrE,CAAV,EAAa;AACvBA,MAAEuC,CAAF,GAAMvC,EAAEiF,KAAF,GAAUjE,SAASrB,YAAzB;AACH,IAFD;;AAIA;AACA,OAAIuF,OAAOvD,IAAIwD,SAAJ,CAAc,QAAd,EAAwBzG,IAAxB,CAA6BoG,KAA7B,EAAoC,UAAU9E,CAAV,EAAa;AACxD,WAAOA,EAAE7D,EAAF,KAAS6D,EAAE7D,EAAF,GAAO,EAAEgF,MAAlB,CAAP;AACH,IAFU,CAAX;;AAIA;AACA,OAAIiE,YAAYF,KAAKG,KAAL,GAAalC,MAAb,CAAoB,GAApB,EAAyBJ,IAAzB,CAA8B,OAA9B,EAAuC,MAAvC,EAA+CO,KAA/C,CAAqD,QAArD,EAA+D,SAA/D,EAA0EP,IAA1E,CAA+E,WAA/E,EAA4F,UAAU/C,CAAV,EAAa;AACrH,WAAO,gBAAgB/B,OAAOsE,CAAP,IAAY,CAA5B,IAAiC,GAAjC,IAAwCtE,OAAOgG,EAAP,IAAa,CAArD,IAA0D,GAAjE;AACH,IAFe,EAEbnB,EAFa,CAEV,OAFU,EAEDwC,KAFC,EAEMxC,EAFN,CAES,WAFT,EAEsByC,SAFtB,EAEiCzC,EAFjC,CAEoC,UAFpC,EAEgD0C,UAFhD,EAE4D1C,EAF5D,CAE+D,aAF/D,EAE8E2C,UAF9E,CAAhB;;AAIAL,aAAUjC,MAAV,CAAiB,QAAjB,EAA2BJ,IAA3B,CAAgC,GAAhC,EAAqC,IAArC,EAA2CO,KAA3C,CAAiD,cAAjD,EAAiE,OAAjE,EAA0EA,KAA1E,CAAgF,QAAhF,EAA0FtC,SAASX,eAAnG,EAAoHiD,KAApH,CAA0H,MAA1H,EAAkItC,SAASZ,aAA3I;;AAEA,OAAIY,SAAST,eAAb,EAA8B;AAC1B6E,cAAUjC,MAAV,CAAiB,MAAjB,EAAyBJ,IAAzB,CAA8B,GAA9B,EAAmCtB,QAAnC,EAA6C6B,KAA7C,CAAmD,MAAnD,EAA2DtC,SAASX,eAApE,EAAqFiD,KAArF,CAA2F,cAA3F,EAA2G,CAA3G;AACH;;AAED,OAAItC,SAASN,YAAb,EAA2B;AACvB0E,cAAUjC,MAAV,CAAiB,MAAjB,EAAyBJ,IAAzB,CAA8B,GAA9B,EAAmC,UAAU/C,CAAV,EAAa;AAC5C,YAAOA,EAAE0F,MAAF,KAAa,EAAb,GAAkB,CAAC,EAA1B;AACH,KAFD,EAEG3C,IAFH,CAEQ,IAFR,EAEc,OAFd,EAEuBA,IAFvB,CAE4B,aAF5B,EAE2C,UAAU/C,CAAV,EAAa;AACpD,YAAOA,EAAE0F,MAAF,KAAa,OAAb,GAAuB,KAA9B;AACH,KAJD,EAIGC,IAJH,CAIQ3E,SAASL,QAJjB,EAI2B2C,KAJ3B,CAIiC,MAJjC,EAIyC,iBAJzC,EAI4DA,KAJ5D,CAIkE,cAJlE,EAIkF,IAJlF;AAKH;;AAED;AACA,OAAIsC,aAAaV,KAAKW,UAAL,GAAkBC,QAAlB,CAA2B3G,QAA3B,EAAqC4D,IAArC,CAA0C,WAA1C,EAAuD,UAAU/C,CAAV,EAAa;AACjF,WAAO,eAAeA,EAAEuC,CAAjB,GAAqB,GAArB,GAA2BvC,EAAEwC,CAA7B,GAAiC,GAAxC;AACH,IAFgB,CAAjB;;AAIAoD,cAAW1C,MAAX,CAAkB,QAAlB,EAA4BH,IAA5B,CAAiC,GAAjC,EAAsCf,QAAtC,EAAgDsB,KAAhD,CAAsD,cAAtD,EAAsE,UAAUtD,CAAV,EAAa;AAC/E,WAAOA,EAAE+F,SAAF,GAAc,CAAd,GAAkB,CAAzB;AACH,IAFD,EAEGzC,KAFH,CAES,QAFT,EAEmBtC,SAASX,eAF5B,EAE6CiD,KAF7C,CAEmD,MAFnD,EAE2DtC,SAASZ,aAFpE;;AAIA,OAAIY,SAASN,YAAb,EAA2B;AACvBkF,eAAW1C,MAAX,CAAkB,MAAlB,EAA0BI,KAA1B,CAAgC,cAAhC,EAAgD,CAAhD;AACH;;AAED,OAAItC,SAAST,eAAb,EAA8B;AAC1BqF,eAAW1C,MAAX,CAAkB,MAAlB,EAA0B4C,QAA1B,CAAmC3G,QAAnC,EAA6C4D,IAA7C,CAAkD,GAAlD,EAAuDtB,QAAvD,EAAiE6B,KAAjE,CAAuE,cAAvE,EAAuF,GAAvF;AACH;;AAED;AACA,OAAI0C,WAAWd,KAAKe,IAAL,GAAYJ,UAAZ,GAAyBC,QAAzB,CAAkC3G,QAAlC,EAA4C4D,IAA5C,CAAiD,WAAjD,EAA8D,UAAU/C,CAAV,EAAa;AACtF,WAAO,eAAe/B,OAAOsE,CAAtB,GAA0B,GAA1B,GAAgCtE,OAAOuE,CAAvC,GAA2C,GAAlD;AACH,IAFc,EAEZ0D,MAFY,EAAf;;AAIAF,YAAS9C,MAAT,CAAgB,QAAhB,EAA0BH,IAA1B,CAA+B,GAA/B,EAAoC,IAApC;;AAEAiD,YAAS9C,MAAT,CAAgB,MAAhB,EAAwBI,KAAxB,CAA8B,cAA9B,EAA8C,IAA9C;;AAEA0C,YAAS9C,MAAT,CAAgB,MAAhB,EAAwBI,KAAxB,CAA8B,cAA9B,EAA8C,IAA9C;;AAEA;AACA,OAAI6C,OAAOxE,IAAIwD,SAAJ,CAAc,WAAd,EAA2BzG,IAA3B,CAAgCsG,KAAhC,EAAuC,UAAUhF,CAAV,EAAa;AAC3D,WAAOA,EAAEnC,MAAF,CAAS1B,EAAhB;AACH,IAFU,CAAX;;AAIA;AACAgK,QAAKd,KAAL,GAAae,MAAb,CAAoB,MAApB,EAA4B,GAA5B,EAAiCrD,IAAjC,CAAsC,OAAtC,EAA+C,MAA/C,EAAuDO,KAAvD,CAA6D,MAA7D,EAAqE,MAArE,EAA6EA,KAA7E,CAAmF,gBAAnF,EAAqG,KAArG,EAA4GA,KAA5G,CAAkH,gBAAlH,EAAoI,OAApI,EAA6IA,KAA7I,CAAmJ,QAAnJ,EAA6JtC,SAASV,eAAtK,EAAuLgD,KAAvL,CAA6L,cAA7L,EAA6M,IAA7M,EAAmNP,IAAnN,CAAwN,GAAxN,EAA6N,UAAU/C,CAAV,EAAa;AACtO,QAAIqG,IAAI;AACJ7D,QAAGvE,OAAOgG,EAAP,IAAa,CADZ;AAEJ1B,QAAGtE,OAAOiG,EAAP,IAAa;AAFZ,KAAR;AAIA,WAAO3C,SAAS;AACZtD,aAAQoI,CADI;AAEZxI,aAAQwI;AAFI,KAAT,CAAP;AAIH,IATD;;AAWA;AACAF,QAAKN,UAAL,GAAkBC,QAAlB,CAA2B3G,QAA3B,EAAqC4D,IAArC,CAA0C,GAA1C,EAA+CxB,QAA/C,EAAyD+B,KAAzD,CAA+D,QAA/D,EAAyEtC,SAASV,eAAlF,EAAmGgD,KAAnG,CAAyG,cAAzG,EAAyH,UAAUtD,CAAV,EAAa;AAClI,QAAIA,EAAE/B,MAAF,CAASqI,QAAb,EAAuB;AACnB,YAAO9E,WAAWxB,EAAEnC,MAAF,CAASa,IAAT,CAAcuB,KAAzB,IAAkC,IAAzC;AACH,KAFD,MAEO;AACH,YAAO,KAAP;AACH;AACJ,IAND;;AAQA;AACAkG,QAAKF,IAAL,GAAYJ,UAAZ,GAAyBC,QAAzB,CAAkC3G,QAAlC,EAA4CmE,KAA5C,CAAkD,cAAlD,EAAkE,IAAlE,EAAwEP,IAAxE,CAA6E,GAA7E,EAAkF,UAAU/C,CAAV,EAAa;AAC3F,QAAIqG,IAAI;AACJ7D,QAAGvE,OAAOuE,CADN;AAEJD,QAAGtE,OAAOsE;AAFN,KAAR;AAIA,WAAOhB,SAAS;AACZtD,aAAQoI,CADI;AAEZxI,aAAQwI;AAFI,KAAT,CAAP;AAIH,IATD,EASGH,MATH;;AAWA;AACApB,SAAMT,OAAN,CAAc,UAAUrE,CAAV,EAAa;AACvB,QAAIuG,OAAO,CAACvG,EAAEwC,CAAH,EAAMxC,EAAEuC,CAAR,CAAX;AACAvC,MAAEiE,EAAF,GAAOsC,KAAK,CAAL,CAAP;AACAvG,MAAEkE,EAAF,GAAOqC,KAAK,CAAL,CAAP;AACH,IAJD;AAKH;;AAED,WAASvE,QAAT,CAAkBhC,CAAlB,EAAqB;AACjB,OAAIA,EAAEsG,QAAN,EAAgB;AACZ,WAAO9E,WAAWxB,EAAEtB,IAAF,CAAOuB,KAAlB,IAA2B,CAAlC;AACH,IAFD,MAEO;AACH,WAAO,CAAP;AACH;AACJ;;AAED;AACA,WAASqF,KAAT,CAAetF,CAAf,EAAkB;AACd,OAAI,CAACgB,SAASR,mBAAd,EAAmC;AAC/B;AACH;;AAED;AACA,OAAInB,GAAG2D,KAAH,CAASwD,gBAAb,EAA+B;AAC3B;AACH;;AAED,OAAInH,GAAG2D,KAAH,CAASyD,QAAb,EAAuB;AACnBzG,MAAE2E,SAAF;AACH,IAFD,MAEO,IAAI3E,EAAEoE,QAAN,EAAgB;AACnBpE,MAAE0G,QAAF;AACH,IAFM,MAEA;AACH1G,MAAE0E,MAAF;AACH;AACDE,UAAO5E,CAAP;AACA6E,cAAW7E,CAAX;AACH;;AAED,WAASyF,UAAT,CAAoBzF,CAApB,EAAuB;AACnB,OAAIgB,SAASP,gBAAb,EAA+B;AAC3BkG,WAAO3G,CAAP;AACH;AACJ;;AAED;AACA,WAAS2G,MAAT,CAAgB3G,CAAhB,EAAmB;AACf,OAAIA,MAAMiB,WAAN,IAAqBjB,MAAMoB,IAA/B,EAAqC;AACjCuF,WAAOvF,IAAP;AACA;AACH;AACDH,iBAAcjB,CAAd;;AAEA;AACAoB,QAAK+C,WAAL,CAAiB,KAAjB;AACAnE,KAAEmE,WAAF,CAAc,IAAd;;AAEA;AACA3C,cAAWwC,MAAX,CAAkB,CAAC,CAAD,EAAIhE,EAAEtB,IAAF,CAAOuB,KAAX,CAAlB;;AAEAD,KAAE0E,MAAF;;AAEA;AACA,OAAIrF,GAAG2D,KAAH,KAAa,IAAjB,EAAuB;AACnB3D,OAAG2D,KAAH,CAAS4D,cAAT;AACH;AACDhC,UAAO5E,CAAP;AACA6E,cAAW7E,CAAX;AACH;;AAED;AACA,WAAS6E,UAAT,CAAoB5G,MAApB,EAA4B;AACxB,OAAIqB,QAAQoC,aAAapC,KAAb,EAAZ;AAAA,OACIkD,IAAI,CAACvE,OAAOiG,EADhB;AAAA,OAEI3B,IAAI,CAACtE,OAAOgG,EAFhB;;AAIAzB,OAAIA,IAAIlD,KAAJ,GAAY0B,SAAStB,KAAT,GAAiB,CAAjC;AACA6C,OAAIA,IAAIjD,KAAJ,GAAY0B,SAASvB,MAAT,GAAkB,CAAlC;AACAkC,OAAIkE,UAAJ,GAAiBC,QAAjB,CAA0B3G,QAA1B,EAAoC4D,IAApC,CAAyC,WAAzC,EAAsD,eAAeP,CAAf,GAAmB,GAAnB,GAAyBD,CAAzB,GAA6B,SAA7B,GAAyCjD,KAAzC,GAAiD,GAAvG;AACAoC,gBAAapC,KAAb,CAAmBA,KAAnB;AACAoC,gBAAauB,SAAb,CAAuB,CAACT,CAAD,EAAID,CAAJ,CAAvB;AACH;;AAED;AACA,WAASgD,SAAT,CAAmBvF,CAAnB,EAAsBlC,CAAtB,EAAyB;AACrB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACDU,WAAQuF,IAAR,CAAa7F,SAASH,UAAT,CAAoBb,CAApB,CAAb,EAAqCsD,KAArC,CAA2C,KAA3C,EAAkDjE,GAAG2D,KAAH,CAAS8D,KAAT,GAAiB,CAAjB,GAAqB,IAAvE,EAA6ExD,KAA7E,CAAmF,MAAnF,EAA2FjE,GAAG2D,KAAH,CAAS+D,KAAT,GAAiB,EAAjB,GAAsB,IAAjH;;AAEA7F,kBAAe8F,WAAW,YAAY;AAClC1F,YAAQgC,KAAR,CAAc,YAAd,EAA4B,SAA5B;AACH,IAFc,EAEZ,IAFY,CAAf;AAGH;;AAED,WAASkC,UAAT,CAAoBxF,CAApB,EAAuBlC,CAAvB,EAA0B;AACtB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACDqG,gBAAa/F,YAAb;AACAI,WAAQgC,KAAR,CAAc,YAAd,EAA4B,QAA5B;AACH;;AAED;AACA;AACA,WAASlD,aAAT,CAAuBJ,CAAvB,EAA0B;AACtB,OAAIA,EAAEsG,QAAN,EAAgB;AACZ,WAAOtG,EAAE+F,SAAF,GAAc/F,EAAEsE,KAAF,IAAW,MAAzB,GAAkC,MAAzC;AACH,IAFD,MAEO;AACH,WAAO,MAAP;AACH;AACJ;;AAED;AACA,WAASjE,eAAT,CAAyBL,CAAzB,EAA4B;AACxB,OAAIA,EAAEsG,QAAN,EAAgB;AACZ,WAAOtG,EAAEsE,KAAF,IAAW,MAAlB;AACH,IAFD,MAEO;AACH,WAAO,MAAP;AACH;AACJ;;AAED;AACA,WAAShE,eAAT,CAAyBN,CAAzB,EAA4B;AACxB,OAAIA,EAAE/B,MAAF,CAASqI,QAAb,EAAuB;AACnB,WAAOtG,EAAEnC,MAAF,CAASyG,KAAhB;AACH,IAFD,MAEO;AACH,WAAO,MAAP;AACH;AACJ;;AAED,WAASzD,UAAT,CAAoBb,CAApB,EAAuB;AACnB,UAAO,2BAA2BgB,SAASF,eAAT,CAAyBd,CAAzB,CAA3B,GAAyD,UAAzD,GAAsEgB,SAASD,cAAT,CAAwBf,CAAxB,CAAtE,GAAmG,MAA1G;AACH;;AAED;AACAnB,OAAKqI,KAAL,GAAa,SAASA,KAAT,GAAiB;AAC1BxF,gBAAapC,KAAb,CAAmB,CAAnB;AACAqH,UAAOvF,IAAP;AACH,GAHD;;AAKA;AACAQ;;AAEA;AACA,SAAO/C,IAAP;AACH;;AAED,UAASsI,MAAT,CAAgBC,QAAhB,EAA0BC,MAA1B,EAAkC;AAC9B,SAAO,KAAKC,IAAL,CAAU,YAAY;AACzB,OAAIC,QAAQC,EAAE,IAAF,CAAZ;AACA,OAAI9I,OAAO6I,MAAM7I,IAAN,CAAW,cAAX,CAAX;AACA,OAAIC,UAAU6I,EAAEC,MAAF,CAAS,EAAT,EAAaF,MAAM7I,IAAN,EAAb,EAA2B,CAAC,OAAO2I,MAAP,KAAkB,WAAlB,GAAgC,WAAhC,GAA8C/J,QAAQ+J,MAAR,CAA/C,MAAoE,QAApE,IAAgFA,MAA3G,CAAd;;AAEA,OAAI,CAAC3I,IAAL,EAAW;AACP6I,UAAM7I,IAAN,CAAW,cAAX,EAA2BA,OAAO,IAAIN,QAAJ,CAAa,IAAb,EAAmBgJ,QAAnB,EAA6BzI,OAA7B,CAAlC;AACH;AACD,OAAI,OAAO0I,MAAP,KAAkB,QAAtB,EAAgC;AAC5B3I,SAAK2I,MAAL;AACH;AACJ,GAXM,CAAP;AAYH;;AAEDG,GAAEE,EAAF,CAAKC,QAAL,GAAgBR,MAAhB;AACAK,GAAEE,EAAF,CAAKC,QAAL,CAAcC,WAAd,GAA4BxJ,QAA5B;;AAED;AAAO,CAzcG;AA0cV;AACA,KAAM,UAASlC,MAAT,EAAiBD,OAAjB,EAA0B;;AAE/B;;AAEAkB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIwK,eAAe,YAAY;AAAE,WAASC,gBAAT,CAA0BjK,MAA1B,EAAkCkK,KAAlC,EAAyC;AAAE,QAAK,IAAIjK,IAAI,CAAb,EAAgBA,IAAIiK,MAAM/J,MAA1B,EAAkCF,GAAlC,EAAuC;AAAE,QAAIkK,aAAaD,MAAMjK,CAAN,CAAjB,CAA2BkK,WAAWC,UAAX,GAAwBD,WAAWC,UAAX,IAAyB,KAAjD,CAAwDD,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAWG,QAAX,GAAsB,IAAtB,CAA4BhL,OAAOC,cAAP,CAAsBS,MAAtB,EAA8BmK,WAAW9J,GAAzC,EAA8C8J,UAA9C;AAA4D;AAAE,GAAC,OAAO,UAAUJ,WAAV,EAAuBQ,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBN,iBAAiBF,YAAYlK,SAA7B,EAAwC0K,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBP,iBAAiBF,WAAjB,EAA8BS,WAA9B,EAA4C,OAAOT,WAAP;AAAqB,GAAhN;AAAmN,EAA9hB,EAAnB;;AAEA,UAASU,eAAT,CAAyBC,QAAzB,EAAmCX,WAAnC,EAAgD;AAAE,MAAI,EAAEW,oBAAoBX,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAIY,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,KAAIC,SAAS,YAAY;AACrB,WAASA,MAAT,GAAkB;AACdH,mBAAgB,IAAhB,EAAsBG,MAAtB;AACH;;AAEDZ,eAAaY,MAAb,EAAqB,IAArB,EAA2B,CAAC;AACxBvK,QAAK,YADmB;;AAIxB;;;;AAIAb,UAAO,SAASqL,UAAT,CAAoBC,CAApB,EAAuB;AAC1B,WAAOA,EAAEC,KAAF,CAAQ,EAAR,EAAYC,MAAZ,CAAmB,UAAU3G,CAAV,EAAaC,CAAb,EAAgB;AACtC,SAAI5F,IAAI,CAAC2F,KAAK,CAAN,IAAWA,CAAX,GAAeC,EAAE2G,UAAF,CAAa,CAAb,CAAvB;AACA,YAAOvM,IAAIA,CAAX;AACH,KAHM,EAGJ,CAHI,CAAP;AAIH;;AAED;;;;AAfwB,GAAD,EAmBxB;AACC2B,QAAK,qBADN;AAECb,UAAO,SAAS0L,mBAAT,CAA6BzE,KAA7B,EAAoC;AACvC,QAAI0E,YAAY,MAAhB;AACA,QAAI;AACAA,iBAAYP,OAAOQ,UAAP,CAAkB5J,GAAG6J,GAAH,CAAO5E,KAAP,CAAlB,IAAmC,GAAnC,GAAyC,MAAzC,GAAkD,MAA9D;AACH,KAFD,CAEE,OAAO6E,GAAP,EAAY,CAAC,WAAY;AAC3B,WAAOH,SAAP;AACH;;AAED;;;;;AAVD,GAnBwB,EAkCxB;AACC9K,QAAK,YADN;AAECb,UAAO,SAAS4L,UAAT,CAAoBC,GAApB,EAAyB;AAC5B,WAAOA,IAAIE,CAAJ,GAAQ,KAAR,GAAgBF,IAAIG,CAAJ,GAAQ,KAAxB,GAAgCH,IAAI/G,CAAJ,GAAQ,KAA/C;AACH;AAJF,GAlCwB,EAuCxB;AACCjE,QAAK,iBADN;AAECb,UAAO,SAASyD,eAAT,CAAyBd,CAAzB,EAA4B;AAC/B,WAAOA,EAAEG,IAAT;AACH;AAJF,GAvCwB,EA4CxB;AACCjC,QAAK,gBADN;AAECb,UAAO,SAAS0D,cAAT,CAAwBf,CAAxB,EAA2B;AAC9B,WAAOA,EAAEtB,IAAF,CAAOuB,KAAP,GAAe,OAAtB;AACH;AAJF,GA5CwB,CAA3B;;AAmDA,SAAOwI,MAAP;AACH,EAzDY,EAAb;;AA2DAxM,SAAQiB,OAAR,GAAkBuL,MAAlB;;AAED;AAAO,CAphBG;AAqhBV;AACA,KAAM,UAASvM,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;;AAEpD;;AAEAoB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIwK,eAAe,YAAY;AAAE,WAASC,gBAAT,CAA0BjK,MAA1B,EAAkCkK,KAAlC,EAAyC;AAAE,QAAK,IAAIjK,IAAI,CAAb,EAAgBA,IAAIiK,MAAM/J,MAA1B,EAAkCF,GAAlC,EAAuC;AAAE,QAAIkK,aAAaD,MAAMjK,CAAN,CAAjB,CAA2BkK,WAAWC,UAAX,GAAwBD,WAAWC,UAAX,IAAyB,KAAjD,CAAwDD,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAWG,QAAX,GAAsB,IAAtB,CAA4BhL,OAAOC,cAAP,CAAsBS,MAAtB,EAA8BmK,WAAW9J,GAAzC,EAA8C8J,UAA9C;AAA4D;AAAE,GAAC,OAAO,UAAUJ,WAAV,EAAuBQ,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBN,iBAAiBF,YAAYlK,SAA7B,EAAwC0K,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBP,iBAAiBF,WAAjB,EAA8BS,WAA9B,EAA4C,OAAOT,WAAP;AAAqB,GAAhN;AAAmN,EAA9hB,EAAnB;;AAEA,KAAI0B,QAAQvN,oBAAoB,CAApB,CAAZ;;AAEA,KAAIwN,SAAS5M,uBAAuB2M,KAAvB,CAAb;;AAEA,UAAS3M,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,UAASsL,eAAT,CAAyBC,QAAzB,EAAmCX,WAAnC,EAAgD;AAAE,MAAI,EAAEW,oBAAoBX,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAIY,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,UAASgB,0BAAT,CAAoCC,IAApC,EAA0CpN,IAA1C,EAAgD;AAAE,MAAI,CAACoN,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF,GAAC,OAAOrN,SAAS,QAAOA,IAAP,0CAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EoN,IAAjF;AAAwF;;AAEhP,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIrB,SAAJ,CAAc,qEAAoEqB,UAApE,0CAAoEA,UAApE,EAAd,CAAN;AAAsG,GAACD,SAASlM,SAAT,GAAqBP,OAAO2M,MAAP,CAAcD,cAAcA,WAAWnM,SAAvC,EAAkD,EAAED,aAAa,EAAEJ,OAAOuM,QAAT,EAAmB3B,YAAY,KAA/B,EAAsCE,UAAU,IAAhD,EAAsDD,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAI2B,UAAJ,EAAgB1M,OAAO4M,cAAP,GAAwB5M,OAAO4M,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAwG;;AAE9e,KAAII,eAAe,UAAUC,KAAV,EAAiB;AAChCP,YAAUM,YAAV,EAAwBC,KAAxB;;AAEA,WAASD,YAAT,GAAwB;AACpB,OAAI/E,OAAOnH,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAA/E;;AAEAuK,mBAAgB,IAAhB,EAAsB2B,YAAtB;;AAEA,OAAIlG,QAAQyF,2BAA2B,IAA3B,EAAiC,CAACS,aAAaD,SAAb,IAA0B7M,OAAOgN,cAAP,CAAsBF,YAAtB,CAA3B,EAAgE5N,IAAhE,CAAqE,IAArE,EAA2E6I,IAA3E,CAAjC,CAAZ;;AAEAnB,SAAM/C,QAAN,GAAiBiJ,aAAajJ,QAA9B;AACA+C,SAAMqG,QAAN;AACA,UAAOrG,KAAP;AACH;;AAED8D,eAAaoC,YAAb,EAA2B,CAAC;AACxB/L,QAAK,UADmB;AAExBb,UAAO,SAAS+M,QAAT,GAAoB;AACvB,QAAI,KAAKpJ,QAAL,CAAcjB,aAAd,CAA4B,IAA5B,CAAJ,EAAuC;AACnC,UAAKrB,IAAL,CAAUuB,KAAV,GAAkB,KAAKe,QAAL,CAAcjB,aAAd,CAA4B,IAA5B,CAAlB;AACH,KAFD,MAEO,IAAI,KAAKqE,QAAT,EAAmB;AACtB,UAAK1F,IAAL,CAAUuB,KAAV,GAAkB,KAAKmE,QAAL,CAAcyE,MAAd,CAAqB,UAAUwB,GAAV,EAAe9N,CAAf,EAAkB;AACrD,aAAO8N,MAAM9N,EAAEmC,IAAF,CAAOuB,KAApB;AACH,MAFiB,EAEf,CAFe,CAAlB;AAGH,KAJM,MAIA;AACH,UAAKvB,IAAL,CAAUuB,KAAV,GAAkB,CAAlB;AACH;AACJ;AAZuB,GAAD,EAaxB;AACC/B,QAAK,aADN;AAECb,UAAO,SAAS8G,WAAT,CAAqB9G,KAArB,EAA4B;AAC/B,SAAKmH,oBAAL,CAA0B,UAA1B,EAAsCnH,KAAtC;AACH;;AAED;;AAND,GAbwB,EAqBxB;AACCa,QAAK,aADN;AAECb,UAAO,SAASoH,WAAT,GAAuB;AAC1B,QAAI,KAAKL,QAAL,IAAiB,KAAKA,QAAL,CAAcpG,MAAd,KAAyB,CAA9C,EAAiD;AAC7C,UAAKoG,QAAL,GAAgB,IAAhB;AACH;AACD,QAAI,KAAKA,QAAT,EAAmB;AACf,UAAK2B,SAAL,GAAiB,KAAK3B,QAAtB;AACA,UAAK2B,SAAL,CAAe1B,OAAf,CAAuB,UAAU9H,CAAV,EAAa;AAChCA,QAAEkI,WAAF;AACH,MAFD;AAGA,UAAKL,QAAL,GAAgB,IAAhB;AACH;AACJ;;AAED;;AAfD,GArBwB,EAsCxB;AACClG,QAAK,UADN;AAECb,UAAO,SAASqJ,QAAT,GAAoB;AACvB,QAAI,KAAKtC,QAAT,EAAmB;AACf,UAAK2B,SAAL,GAAiB,KAAK3B,QAAtB;AACA,UAAKA,QAAL,GAAgB,IAAhB;AACH;AACJ;AAPF,GAtCwB,EA8CxB;AACClG,QAAK,WADN;AAECb,UAAO,SAASsH,SAAT,GAAqB;AACxB,SAAKD,MAAL,CAAY,GAAZ;AACH;;AAED;;AAND,GA9CwB,EAsDxB;AACCxG,QAAK,QADN;AAECb,UAAO,SAASqH,MAAT,GAAkB;AACrB,QAAI5G,IAAIC,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,KAAKiD,QAAL,CAAcpB,cAA1F;;AAEA,QAAI9B,IAAI,CAAR,EAAW;AACP,SAAI,KAAKiI,SAAT,EAAoB;AAChB,WAAK3B,QAAL,GAAgB,KAAK2B,SAArB;AACA,WAAKA,SAAL,GAAiB,IAAjB;AACH;AACD,SAAI,KAAK3B,QAAT,EAAmB;AACf,WAAKA,QAAL,CAAcC,OAAd,CAAsB,UAAU9H,CAAV,EAAa;AAC/BA,SAAEmI,MAAF,CAAS5G,IAAI,CAAb;AACH,OAFD;AAGH;AACJ;AACJ;AAhBF,GAtDwB,CAA3B,EAuEI,CAAC;AACDI,QAAK,KADJ;AAEDb,UAAO,SAASiN,IAAT,GAAgB;AACnB,QAAIpF,OAAOnH,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAA/E;;AAEA,WAAO,IAAIkM,YAAJ,CAAiB/E,IAAjB,CAAP;AACH;AANA,GAAD,EAOD;AACChH,QAAK,YADN;AAECb,UAAO,SAASgG,UAAT,CAAoB6B,IAApB,EAA0B;AAC7B,WAAOqE,OAAOrM,OAAP,CAAemG,UAAf,CAA0B6B,IAA1B,EAAgC+E,aAAaM,GAA7C,CAAP;AACH;AAJF,GAPC,CAvEJ;;AAqFA,SAAON,YAAP;AACH,EArGkB,CAqGjBV,OAAOrM,OArGU,CAAnB;;AAuGAjB,SAAQiB,OAAR,GAAkB+M,YAAlB;;AAED;AAAO,CArpBG;AAspBV;AACA,KAAM,UAAS/N,MAAT,EAAiBD,OAAjB,EAA0B;;AAE/B;;AAEAkB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIM,WAAWR,OAAOS,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,UAAUC,MAA9B,EAAsCF,GAAtC,EAA2C;AAAE,OAAIG,SAASF,UAAUD,CAAV,CAAb,CAA2B,KAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,QAAId,OAAOO,SAAP,CAAiBS,cAAjB,CAAgC9B,IAAhC,CAAqC4B,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,YAAOK,GAAP,IAAcD,OAAOC,GAAP,CAAd;AAA4B;AAAE;AAAE,GAAC,OAAOL,MAAP;AAAgB,EAAhQ;;AAEA,KAAIgK,eAAe,YAAY;AAAE,WAASC,gBAAT,CAA0BjK,MAA1B,EAAkCkK,KAAlC,EAAyC;AAAE,QAAK,IAAIjK,IAAI,CAAb,EAAgBA,IAAIiK,MAAM/J,MAA1B,EAAkCF,GAAlC,EAAuC;AAAE,QAAIkK,aAAaD,MAAMjK,CAAN,CAAjB,CAA2BkK,WAAWC,UAAX,GAAwBD,WAAWC,UAAX,IAAyB,KAAjD,CAAwDD,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAWG,QAAX,GAAsB,IAAtB,CAA4BhL,OAAOC,cAAP,CAAsBS,MAAtB,EAA8BmK,WAAW9J,GAAzC,EAA8C8J,UAA9C;AAA4D;AAAE,GAAC,OAAO,UAAUJ,WAAV,EAAuBQ,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBN,iBAAiBF,YAAYlK,SAA7B,EAAwC0K,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBP,iBAAiBF,WAAjB,EAA8BS,WAA9B,EAA4C,OAAOT,WAAP;AAAqB,GAAhN;AAAmN,EAA9hB,EAAnB;;AAEA,UAASU,eAAT,CAAyBC,QAAzB,EAAmCX,WAAnC,EAAgD;AAAE,MAAI,EAAEW,oBAAoBX,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAIY,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,KAAIgC,OAAO,YAAY;AACnB,WAASA,IAAT,GAAgB;AACZ,OAAItF,OAAOnH,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAA/E;;AAEAuK,mBAAgB,IAAhB,EAAsBkC,IAAtB;;AAEA,QAAK9L,IAAL,GAAY,EAAZ;AACAf,YAAS,IAAT,EAAeuH,IAAf;AACH;;AAED2C,eAAa2C,IAAb,EAAmB,CAAC;AAChBtM,QAAK,sBADW;;AAIhB;AACAb,UAAO,SAASmH,oBAAT,CAA8BiG,QAA9B,EAAwCpN,KAAxC,EAA+C;AAClD,SAAKoN,QAAL,IAAiBpN,KAAjB;AACA,QAAI,KAAK+G,QAAT,EAAmB;AACf,UAAKA,QAAL,CAAcC,OAAd,CAAsB,UAAU9H,CAAV,EAAa;AAC/BA,QAAEiI,oBAAF,CAAuBiG,QAAvB,EAAiCpN,KAAjC;AACH,MAFD;AAGH,KAJD,MAIO,IAAI,KAAK0I,SAAT,EAAoB;AACvB,UAAKA,SAAL,CAAe1B,OAAf,CAAuB,UAAU9H,CAAV,EAAa;AAChCA,QAAEiI,oBAAF,CAAuBiG,QAAvB,EAAiCpN,KAAjC;AACH,MAFD;AAGH;AACJ;;AAED;;AAlBgB,GAAD,EAoBhB;AACCa,QAAK,QADN;AAECb,UAAO,SAASqI,MAAT,GAAkB;AACrB,WAAO,CAAC,KAAKtB,QAAN,IAAkB,CAAC,KAAK2B,SAAxB,IAAqC,KAAK3B,QAAL,IAAiB,KAAKA,QAAL,CAAcpG,MAAd,KAAyB,CAA/E,IAAoF,KAAK+H,SAAL,IAAkB,KAAKA,SAAL,CAAe/H,MAAf,KAA0B,CAAvI;AACH;AAJF,GApBgB,EAyBhB;AACCE,QAAK,WADN;AAECb,UAAO,SAASqN,SAAT,GAAqB;AACxB,QAAI,KAAKC,OAAL,KAAiB/L,SAArB,EAAgC;AAC5B,SAAI,KAAK8G,MAAL,EAAJ,EAAmB;AACf,WAAKiF,OAAL,GAAe,CAAf;AACH,MAFD,MAEO;AACH,WAAKA,OAAL,GAAetL,GAAGuL,GAAH,CAAO,KAAKxG,QAAZ,EAAsB,UAAU7H,CAAV,EAAa;AAC9C,cAAOA,EAAEmO,SAAF,EAAP;AACH,OAFc,IAEV,CAFL;AAGH;AACJ;AACD,WAAO,KAAKC,OAAZ;AACH;AAbF,GAzBgB,EAuChB;AACCzM,QAAK,UADN;AAECb,UAAO,SAASwN,QAAT,GAAoB;AACvB,QAAI,KAAKC,MAAL,KAAgBlM,SAApB,EAA+B;AAC3B,SAAI,KAAKyD,MAAL,KAAgBzD,SAApB,EAA+B;AAC3B,WAAKkM,MAAL,GAAc,CAAd;AACH,MAFD,MAEO;AACH,WAAKA,MAAL,GAAc,KAAKzI,MAAL,CAAYwI,QAAZ,KAAyB,CAAvC;AACH;AACJ;AACD,WAAO,KAAKC,MAAZ;AACH;AAXF,GAvCgB,CAAnB,EAmDI,CAAC;AACD5M,QAAK,KADJ;AAEDb,UAAO,SAASiN,IAAT,GAAgB;AACnB,QAAIpF,OAAOnH,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAA/E;;AAEA,WAAO,IAAIyM,IAAJ,CAAStF,IAAT,CAAP;AACH;AANA,GAAD,EAOD;AACChH,QAAK,YADN;AAECb,UAAO,SAASgG,UAAT,CAAoB6B,IAApB,EAA0B;AAC7B,QAAI6F,YAAYhN,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoEyM,KAAKD,GAAzF;;AAEA,QAAIrF,KAAKd,QAAT,EAAmB;AACfc,UAAKd,QAAL,GAAgBc,KAAKd,QAAL,CAAc4G,GAAd,CAAkB,UAAUC,CAAV,EAAa;AAC3C,aAAOT,KAAKnH,UAAL,CAAgB4H,CAAhB,EAAmBF,SAAnB,CAAP;AACH,MAFe,CAAhB;AAGH;AACD,WAAOA,UAAU1O,IAAV,CAAe,IAAf,EAAqB6I,IAArB,CAAP;AACH;AAXF,GAPC,CAnDJ;;AAwEA,SAAOsF,IAAP;AACH,EAnFU,EAAX;;AAqFAvO,SAAQiB,OAAR,GAAkBsN,IAAlB;;AAED;AAAO,CA5vBG;AA6vBV;AACA,KAAM,UAAStO,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;;AAEpD;;AAEAoB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIC,UAAU,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,SAAOA,OAAOC,QAAd,MAA2B,QAA3D,GAAsE,UAAUR,GAAV,EAAe;AAAE,gBAAcA,GAAd,0CAAcA,GAAd;AAAoB,EAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,SAAOA,OAAO,OAAOO,MAAP,KAAkB,UAAzB,IAAuCP,IAAIS,WAAJ,KAAoBF,MAA3D,IAAqEP,QAAQO,OAAOG,SAApF,GAAgG,QAAhG,UAAkHV,GAAlH,0CAAkHA,GAAlH,CAAP;AAA+H,EAA5Q;;AAEA,KAAIW,WAAWR,OAAOS,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,UAAUC,MAA9B,EAAsCF,GAAtC,EAA2C;AAAE,OAAIG,SAASF,UAAUD,CAAV,CAAb,CAA2B,KAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,QAAId,OAAOO,SAAP,CAAiBS,cAAjB,CAAgC9B,IAAhC,CAAqC4B,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,YAAOK,GAAP,IAAcD,OAAOC,GAAP,CAAd;AAA4B;AAAE;AAAE,GAAC,OAAOL,MAAP;AAAgB,EAAhQ,CAVoD,CAU8M;;;;AAKlQ5B,SAAQiB,OAAR,GAAkBgO,OAAlB;;AAEA,KAAI7M,UAAUtC,oBAAoB,CAApB,CAAd;;AAEA,KAAIuC,WAAW3B,uBAAuB0B,OAAvB,CAAf;;AAEA,KAAI8M,eAAepP,oBAAoB,CAApB,CAAnB;;AAEA,KAAIqP,gBAAgBzO,uBAAuBwO,YAAvB,CAApB;;AAEA,UAASxO,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,UAASkO,OAAT,CAAiBzM,OAAjB,EAA0BC,IAA1B,EAAgC;AAC5B,MAAIC,UAAUZ,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAAlF;;AAEA,MAAIc,OAAO,EAAX;;AAEA,MAAIC,SAAS;AACTC,QAAK,CADI;AAETC,UAAO,CAFE;AAGTC,WAAQ,CAHC;AAITC,SAAM;AAJG,GAAb;AAAA,MAMIM,WAAW;AACXC,WAAQ,GADG;AAEXC,UAAO,GAFI;;AAIX2L,cAAW,iBAJA;AAKXC,WAAQ1M,SALG;AAMX2M,aAAU,SAASA,QAAT,CAAkBvL,CAAlB,EAAqB;AAC3B,WAAOA,EAAE6K,QAAF,EAAP;AACH,IARU;;AAUX9K,kBAAe,SAASA,aAAT,CAAuBC,CAAvB,EAA0B;AACrC,WAAOA,EAAEtB,IAAF,CAAOoF,UAAd;AACH,IAZU;AAaX0H,mBAAgB5M,SAbL;;AAeX6M,yBAAsB,SAASA,oBAAT,CAA8BzL,CAA9B,EAAiC;AACnD,WAAOA,EAAEG,IAAT;AACH,IAjBU;AAkBXuL,cAAW,SAlBA;AAmBXC,cAAW,SAnBA;AAoBXC,qBAAkB,SApBP;;AAsBXC,gBAAa,EAtBF;AAuBXlL,aAAU,SAASA,QAAT,CAAkBX,CAAlB,EAAqB;AAC3B,WAAOA,EAAEG,IAAT;AACH,IAzBU;;AA2BXS,mBAAgB,IA3BL;AA4BXC,eAAYA,UA5BD;AA6BXC,oBAAiBxC,SAASpB,OAAT,CAAiB4D,eA7BvB;AA8BXC,mBAAgBzC,SAASpB,OAAT,CAAiB6D;AA9BtB,GANf;;AAuCA,MAAIC,WAAW,KAAK,CAApB;;AAEA,MAAII,OAAO,KAAK,CAAhB;AAAA,MACID,SAAS,CADb;AAAA,MAEI2K,UAAU,KAAK,CAFnB;AAAA,MAGIC,gBAAgB,KAAK,CAHzB;AAAA,MAIIC,cAAc,KAAK,CAJvB;AAAA,MAKIC,UAAU,KAAK,CALnB;AAAA,MAMI3K,UAAU,KAAK,CANnB;AAAA,MAOI4K,aAAa,KAAK,CAPtB;;AASA;;;AAGA,WAAStK,IAAT,GAAgB;AACZZ,cAAWrD,SAAS,EAAT,EAAa6B,QAAb,EAAuBb,OAAvB,CAAX;;AAEAyC,UAAOgK,cAAclO,OAAd,CAAsBmG,UAAtB,CAAiC3E,IAAjC,CAAP;;AAEAsC,YAAStB,KAAT,GAAiBsB,SAAStB,KAAT,GAAiBZ,OAAOE,KAAxB,GAAgCF,OAAOI,IAAxD;AACA8B,YAASvB,MAAT,GAAkBuB,SAASvB,MAAT,GAAkBX,OAAOC,GAAzB,GAA+BD,OAAOG,MAAxD;;AAEA+B,YAASsK,MAAT,GAAkBtK,SAASsK,MAAT,IAAmBlK,KAAKsJ,SAAL,EAArC;;AAEA,OAAI1J,SAASJ,cAAb,EAA6B;AACzBiB;AACH;;AAEDsK;;AAEA;AACA/I,QAAKhC,IAAL;AACAuF,UAAOvF,IAAP,EAAa,KAAb;AACH;;AAED,WAASS,WAAT,GAAuB;AACnBP,aAAUjC,GAAG6D,MAAH,CAAU,MAAV,EAAkBC,MAAlB,CAAyB,KAAzB,EAAgCJ,IAAhC,CAAqC,IAArC,EAA2CtE,QAAQtC,EAAR,GAAa,UAAxD,EAAoE4G,IAApE,CAAyE,OAAzE,EAAkF,KAAlF,EAAyFO,KAAzF,CAA+F,UAA/F,EAA2G,UAA3G,EAAuHA,KAAvH,CAA6H,SAA7H,EAAwI,IAAxI,EAA8IA,KAA9I,CAAoJ,YAApJ,EAAkK,QAAlK,EAA4KA,KAA5K,CAAkL,kBAAlL,EAAsM,OAAtM,EAA+MA,KAA/M,CAAqN,SAArN,EAAgO,KAAhO,EAAuOA,KAAvO,CAA6O,QAA7O,EAAuP,mBAAvP,EAA4QA,KAA5Q,CAAkR,eAAlR,EAAmS,MAAnS,CAAV;AACH;;AAED,WAAS6I,OAAT,GAAmB;AACf,OAAIC,eAAepL,SAASqK,SAA5B;AACA7D,KAAE/I,OAAF,EAAW4N,QAAX,CAAoBD,YAApB;AACA5E,KAAE,SAAF,EAAa8E,IAAb,CAAkB,MAAlB,EAA0B,UAA1B,EAAsCzF,IAAtC,CAA2C,4BAA4BuF,YAA5B,GAA2C,4IAA3C,GAA0LA,YAA1L,GAAyM,yZAAzM,GAAqmBA,YAArmB,GAAonB,iHAApnB,GAAwuBA,YAAxuB,GAAuvB,kVAAvvB,GAA4kCA,YAA5kC,GAA2lC,gHAA3lC,GAA8sCA,YAA9sC,GAA6tC,mGAA7tC,GAAm0CA,YAAn0C,GAAk1C,0HAAl1C,GAA+8CA,YAA/8C,GAA89C,uKAAzgD,EAAkrDG,QAAlrD,CAA2rD,MAA3rD;AACH;;AAED,WAASnJ,IAAT,CAAc1E,IAAd,EAAoB;AAChB8I,KAAE/I,OAAF,EAAW+N,KAAX;;AAEAT,mBAAgB1M,GAAG0C,MAAH,CAAUkK,OAAV,GAAoBQ,IAApB,CAAyB,CAACzL,SAAStB,KAAT,GAAiB,CAAlB,EAAqBsB,SAASvB,MAAT,GAAkB,CAAvC,CAAzB,EAAoEiN,OAApE,CAA4E,CAAC1L,SAAS6K,WAAV,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CAA5E,EAA6GxO,KAA7G,CAAmH2D,SAASjB,aAA5H,CAAhB;;AAEAmM,gBAAa7M,GAAGC,KAAH,CAASmD,MAAT,GAAkBuB,MAAlB,CAAyB,CAAC,CAAD,EAAIhD,SAASsK,MAAb,CAAzB,EAA+C5I,KAA/C,CAAqD,CAAC1B,SAAS0K,SAAV,EAAqB1K,SAAS2K,SAA9B,CAArD,EAA+FgB,WAA/F,CAA2GtN,GAAGuN,cAA9G,CAAb;;AAEAZ,iBAAc3M,GAAG6D,MAAH,CAAUzE,OAAV,EAAmB0E,MAAnB,CAA0B,KAA1B,EAAiCJ,IAAjC,CAAsC,OAAtC,EAA+C,aAA/C,EAA8DO,KAA9D,CAAoE,UAApE,EAAgF,UAAhF,EAA4FA,KAA5F,CAAkG,OAAlG,EAA2GtC,SAAStB,KAAT,GAAiB,IAA5H,EAAkI4D,KAAlI,CAAwI,QAAxI,EAAkJ,MAAlJ,EAA0JA,KAA1J,CAAgK,kBAAhK,EAAoLtC,SAAS4K,gBAA7L,CAAd;;AAEAK,aAAU5M,GAAG6D,MAAH,CAAUzE,OAAV,EAAmB0E,MAAnB,CAA0B,KAA1B,EAAiCG,KAAjC,CAAuC,UAAvC,EAAmD,UAAnD,EAA+DA,KAA/D,CAAqE,OAArE,EAA8EtC,SAAStB,KAAT,GAAiB,IAA/F,EAAqG4D,KAArG,CAA2G,QAA3G,EAAqHtC,SAASvB,MAAT,GAAkB,IAAvI,EAA6I6D,KAA7I,CAAmJ,MAAnJ,EAA2JxE,OAAOI,IAAP,GAAc,IAAzK,EAA+KoE,KAA/K,CAAqL,KAArL,EAA4LxE,OAAOC,GAAP,GAAa,IAAzM,CAAV;AACH;;AAED,WAAS8N,cAAT,GAA0B;AACtB,OAAIC,SAAS,EAAb;AACA,OAAIC,OAAOjB,OAAX;AACA,UAAOiB,IAAP,EAAa;AACTD,WAAOE,IAAP,CAAYD,IAAZ;AACAA,WAAOA,KAAK1K,MAAZ;AACH;AACDyK,UAAO/H,OAAP;AACAiH,eAAYnF,IAAZ,CAAiB,EAAjB;AACAmF,eAAY7G,SAAZ,CAAsB,QAAtB,EAAgCzG,IAAhC,CAAqCoO,MAArC,EAA6CzH,KAA7C,GAAqDlC,MAArD,CAA4D,MAA5D,EAAoEJ,IAApE,CAAyE,OAAzE,EAAkF,OAAlF,EAA2FA,IAA3F,CAAgG,OAAhG,EAAyG/B,SAASyK,oBAAlH,EAAwI5E,IAAxI,CAA6I,UAAU7G,CAAV,EAAa;AACtJ,WAAO,wBAAwBA,EAAEG,IAA1B,GAAiC,SAAxC;AACH,IAFD,EAEG2C,EAFH,CAEM,OAFN,EAEe,UAAU9C,CAAV,EAAa;AACxB2G,WAAO3G,CAAP;AACH,IAJD;AAKH;;AAED,WAAS2G,MAAT,CAAgBjI,IAAhB,EAAsB;AAClB,OAAIuO,kBAAkBlP,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,IAA1F;;AAEA+N,aAAUpN,IAAV;;AAEAmO;;AAEA,OAAI/H,QAAQmH,QAAQ9G,SAAR,CAAkB,OAAlB,EAA2BzG,IAA3B,CAAgCqN,cAAcjH,KAAd,CAAoBpG,IAApB,CAAhC,EAA2D,UAAUsB,CAAV,EAAa;AAChF,WAAOA,EAAE7D,EAAF,KAAS6D,EAAE7D,EAAF,GAAO,EAAEgF,MAAlB,CAAP;AACH,IAFW,CAAZ;;AAIA2D,SAAMO,KAAN,GAAclC,MAAd,CAAqB,KAArB,EAA4BJ,IAA5B,CAAiC,OAAjC,EAA0C,MAA1C,EAAkDO,KAAlD,CAAwD,YAAxD,EAAsE,UAAUtD,CAAV,EAAa;AAC/E,WAAOkM,WAAWlL,SAASuK,QAAT,CAAkBvL,CAAlB,CAAX,CAAP;AACH,IAFD,EAEGsD,KAFH,CAES,OAFT,EAEkB,UAAUtD,CAAV,EAAa;AAC3B,WAAO1B,SAASpB,OAAT,CAAiB6L,mBAAjB,CAAqCmD,WAAWlL,SAASuK,QAAT,CAAkBvL,CAAlB,CAAX,CAArC,CAAP;AACH,IAJD,EAIGsD,KAJH,CAIS,MAJT,EAIiB,KAJjB,EAIwBA,KAJxB,CAI8B,KAJ9B,EAIqC,KAJrC,EAI4CA,KAJ5C,CAIkD,OAJlD,EAI2D,KAJ3D,EAIkEA,KAJlE,CAIwE,QAJxE,EAIkF,KAJlF,EAIyFqC,IAJzF,CAI8F3E,SAASL,QAJvG,EAIiHmC,EAJjH,CAIoH,OAJpH,EAI6H,UAAU9C,CAAV,EAAa;AACtI2G,WAAO3G,CAAP;AACH,IAND,EAMG8C,EANH,CAMM,aANN,EAMqB,UAAU9C,CAAV,EAAa;AAC9BX,OAAG2D,KAAH,CAAS4D,cAAT;AACA,QAAIkF,QAAQzJ,MAAZ,EAAoB;AAChBsE,YAAOmF,QAAQzJ,MAAf;AACH;AACJ,IAXD,EAWGS,EAXH,CAWM,WAXN,EAWmByC,SAXnB,EAW8BzC,EAX9B,CAWiC,WAXjC,EAW8CoK,WAX9C,EAW2DpK,EAX3D,CAW8D,UAX9D,EAW0E0C,UAX1E;;AAaAV,SAAMqI,KAAN,GAActH,UAAd,GAA2BxJ,IAA3B,CAAgC+Q,QAAhC;;AAEAtI,SAAMmB,IAAN,GAAaC,MAAb;;AAEA,OAAI+G,mBAAmBjM,SAASwK,cAAhC,EAAgD;AAC5CxK,aAASwK,cAAT,CAAwBnP,IAAxB,CAA6B,IAA7B,EAAmCyP,OAAnC;AACH;AACJ;;AAED,WAASlH,MAAT,GAAkB;AACd,OAAIE,QAAQmH,QAAQ9G,SAAR,CAAkB,OAAlB,EAA2BzG,IAA3B,CAAgCqN,cAAcjH,KAAd,CAAoBpG,IAApB,CAAhC,EAA2D,UAAUsB,CAAV,EAAa;AAChF,WAAOA,EAAE7D,EAAT;AACH,IAFW,EAETgR,KAFS,GAEDtH,UAFC,GAEYxJ,IAFZ,CAEiB+Q,QAFjB,CAAZ;AAGH;;AAED;;;AAGA,WAASA,QAAT,GAAoB;AAChB,QAAK9J,KAAL,CAAW,MAAX,EAAmB,UAAUtD,CAAV,EAAa;AAC5B,WAAOA,EAAEwC,CAAF,GAAM,IAAb;AACH,IAFD,EAEGc,KAFH,CAES,KAFT,EAEgB,UAAUtD,CAAV,EAAa;AACzB,WAAOA,EAAEuC,CAAF,GAAM,IAAb;AACH,IAJD,EAIGe,KAJH,CAIS,OAJT,EAIkB,UAAUtD,CAAV,EAAa;AAC3B,WAAOwD,KAAKoH,GAAL,CAAS,CAAT,EAAY5K,EAAEqN,EAAF,GAAO,CAAnB,IAAwB,IAA/B;AACH,IAND,EAMG/J,KANH,CAMS,QANT,EAMmB,UAAUtD,CAAV,EAAa;AAC5B,WAAOwD,KAAKoH,GAAL,CAAS,CAAT,EAAY5K,EAAEsN,EAAF,GAAO,CAAnB,IAAwB,IAA/B;AACH,IARD;AASH;;AAED;;;AAGA,WAASC,MAAT,CAAgB7N,KAAhB,EAAuBD,MAAvB,EAA+B;AAC3BsM,mBAAgB1M,GAAG0C,MAAH,CAAUkK,OAAV,GAAoBQ,IAApB,CAAyB,CAAC/M,QAAQ,CAAT,EAAYD,SAAS,CAArB,CAAzB,EAAkDiN,OAAlD,CAA0D,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,CAA1D,EAAyErP,KAAzE,CAA+E2D,SAASjB,aAAxF,CAAhB;AACA6E;AACH;;AAED;AACA,WAASW,SAAT,CAAmBvF,CAAnB,EAAsBlC,CAAtB,EAAyB;AACrB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACDU,WAAQuF,IAAR,CAAa7F,SAASH,UAAT,CAAoBb,CAApB,CAAb,EAAqCsD,KAArC,CAA2C,KAA3C,EAAkDjE,GAAG2D,KAAH,CAAS8D,KAAT,GAAiB,CAAjB,GAAqB,IAAvE,EAA6ExD,KAA7E,CAAmF,MAAnF,EAA2FjE,GAAG2D,KAAH,CAAS+D,KAAT,GAAiB,EAAjB,GAAsB,IAAjH,EAAuHzD,KAAvH,CAA6H,YAA7H,EAA2I,SAA3I;AACH;;AAED,WAASkC,UAAT,CAAoBxF,CAApB,EAAuBlC,CAAvB,EAA0B;AACtB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACDU,WAAQgC,KAAR,CAAc,YAAd,EAA4B,QAA5B;AACH;;AAED,WAAS4J,WAAT,CAAqBlN,CAArB,EAAwBlC,CAAxB,EAA2B;AACvB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACDU,WAAQgC,KAAR,CAAc,KAAd,EAAqBjE,GAAG2D,KAAH,CAAS8D,KAAT,GAAiB,CAAjB,GAAqB,IAA1C,EAAgDxD,KAAhD,CAAsD,MAAtD,EAA8DjE,GAAG2D,KAAH,CAAS+D,KAAT,GAAiB,EAAjB,GAAsB,IAApF;AACH;;AAED,WAASlG,UAAT,CAAoBb,CAApB,EAAuB;AACnB,UAAO,2BAA2BgB,SAASF,eAAT,CAAyBd,CAAzB,CAA3B,GAAyD,UAAzD,GAAsEgB,SAASD,cAAT,CAAwBf,CAAxB,CAAtE,GAAmG,MAA1G;AACH;;AAED;AACA;;;AAGAnB,OAAKqI,KAAL,GAAa,SAASA,KAAT,GAAiB;AAC1BP,UAAOvF,IAAP;AACH,GAFD;;AAIA;;;;;AAKAvC,OAAK2O,aAAL,GAAqB,SAASA,aAAT,CAAuBC,YAAvB,EAAqC;AACtD;AACA;AACA;AACAzG,cAAW,YAAY;AACnB,QAAIT,OAAO,CAACvF,SAAStB,KAAV,EAAiBsB,SAASvB,MAA1B,CAAX;AAAA,QACIiO,IAAInH,KAAK,CAAL,CADR;AAAA,QAEIoH,IAAIpH,KAAK,CAAL,CAFR;;AAIA,QAAIkH,YAAJ,EAAkB;AACdC,SAAIlG,EAAEoG,MAAF,EAAUlO,KAAV,EAAJ;AACAiO,SAAInG,EAAEoG,MAAF,EAAUnO,MAAV,KAAqB,EAAzB;AACH;AACD8N,WAAOG,CAAP,EAAUC,CAAV;AACH,IAVD,EAUG,IAVH;AAWH,GAfD;;AAiBA;AACA/L;;AAEA,SAAO/C,IAAP;AACH;;AAED,UAASsI,MAAT,CAAgBC,QAAhB,EAA0BC,MAA1B,EAAkC;AAC9B,SAAO,KAAKC,IAAL,CAAU,YAAY;AACzB,OAAIC,QAAQC,EAAE,IAAF,CAAZ;AACA,OAAI9I,OAAO6I,MAAM7I,IAAN,CAAW,aAAX,CAAX;AACA,OAAIC,UAAU6I,EAAEC,MAAF,CAAS,EAAT,EAAaF,MAAM7I,IAAN,EAAb,EAA2B,CAAC,OAAO2I,MAAP,KAAkB,WAAlB,GAAgC,WAAhC,GAA8C/J,QAAQ+J,MAAR,CAA/C,MAAoE,QAApE,IAAgFA,MAA3G,CAAd;;AAEA,OAAI,CAAC3I,IAAL,EAAW;AACP6I,UAAM7I,IAAN,CAAW,aAAX,EAA0BA,OAAO,IAAIwM,OAAJ,CAAY,IAAZ,EAAkB9D,QAAlB,EAA4BzI,OAA5B,CAAjC;AACH;AACD,OAAI,OAAO0I,MAAP,KAAkB,QAAtB,EAAgC;AAC5B3I,SAAK2I,MAAL;AACH;AACJ,GAXM,CAAP;AAYH;;AAEDG,GAAEE,EAAF,CAAKuE,OAAL,GAAe9E,MAAf;AACAK,GAAEE,EAAF,CAAKuE,OAAL,CAAarE,WAAb,GAA2BsD,OAA3B;;AAED;AAAO,CA5hCG;AA6hCV;AACA,KAAM,UAAShP,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;;AAEpD;;AAEAoB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIwK,eAAe,YAAY;AAAE,WAASC,gBAAT,CAA0BjK,MAA1B,EAAkCkK,KAAlC,EAAyC;AAAE,QAAK,IAAIjK,IAAI,CAAb,EAAgBA,IAAIiK,MAAM/J,MAA1B,EAAkCF,GAAlC,EAAuC;AAAE,QAAIkK,aAAaD,MAAMjK,CAAN,CAAjB,CAA2BkK,WAAWC,UAAX,GAAwBD,WAAWC,UAAX,IAAyB,KAAjD,CAAwDD,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAWG,QAAX,GAAsB,IAAtB,CAA4BhL,OAAOC,cAAP,CAAsBS,MAAtB,EAA8BmK,WAAW9J,GAAzC,EAA8C8J,UAA9C;AAA4D;AAAE,GAAC,OAAO,UAAUJ,WAAV,EAAuBQ,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBN,iBAAiBF,YAAYlK,SAA7B,EAAwC0K,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBP,iBAAiBF,WAAjB,EAA8BS,WAA9B,EAA4C,OAAOT,WAAP;AAAqB,GAAhN;AAAmN,EAA9hB,EAAnB;;AAEA,KAAI0B,QAAQvN,oBAAoB,CAApB,CAAZ;;AAEA,KAAIwN,SAAS5M,uBAAuB2M,KAAvB,CAAb;;AAEA,UAAS3M,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,UAASsL,eAAT,CAAyBC,QAAzB,EAAmCX,WAAnC,EAAgD;AAAE,MAAI,EAAEW,oBAAoBX,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAIY,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,UAASgB,0BAAT,CAAoCC,IAApC,EAA0CpN,IAA1C,EAAgD;AAAE,MAAI,CAACoN,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF,GAAC,OAAOrN,SAAS,QAAOA,IAAP,0CAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EoN,IAAjF;AAAwF;;AAEhP,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIrB,SAAJ,CAAc,qEAAoEqB,UAApE,0CAAoEA,UAApE,EAAd,CAAN;AAAsG,GAACD,SAASlM,SAAT,GAAqBP,OAAO2M,MAAP,CAAcD,cAAcA,WAAWnM,SAAvC,EAAkD,EAAED,aAAa,EAAEJ,OAAOuM,QAAT,EAAmB3B,YAAY,KAA/B,EAAsCE,UAAU,IAAhD,EAAsDD,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAI2B,UAAJ,EAAgB1M,OAAO4M,cAAP,GAAwB5M,OAAO4M,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAwG;;AAE9e,KAAIgE,cAAc,UAAU3D,KAAV,EAAiB;AAC/BP,YAAUkE,WAAV,EAAuB3D,KAAvB;;AAEA,WAAS2D,WAAT,GAAuB;AACnBvF,mBAAgB,IAAhB,EAAsBuF,WAAtB;;AAEA,UAAOrE,2BAA2B,IAA3B,EAAiC,CAACqE,YAAY7D,SAAZ,IAAyB7M,OAAOgN,cAAP,CAAsB0D,WAAtB,CAA1B,EAA8DC,KAA9D,CAAoE,IAApE,EAA0E/P,SAA1E,CAAjC,CAAP;AACH;;AAED8J,eAAagG,WAAb,EAA0B,IAA1B,EAAgC,CAAC;AAC7B3P,QAAK,KADwB;AAE7Bb,UAAO,SAASiN,IAAT,GAAgB;AACnB,QAAIpF,OAAOnH,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAA/E;;AAEA,WAAO,IAAI8P,WAAJ,CAAgB3I,IAAhB,CAAP;AACH;AAN4B,GAAD,EAO7B;AACChH,QAAK,YADN;AAECb,UAAO,SAASgG,UAAT,CAAoB6B,IAApB,EAA0B;AAC7B,WAAOqE,OAAOrM,OAAP,CAAemG,UAAf,CAA0B6B,IAA1B,EAAgC2I,YAAYtD,GAA5C,CAAP;AACH;AAJF,GAP6B,CAAhC;;AAcA,SAAOsD,WAAP;AACH,EAxBiB,CAwBhBtE,OAAOrM,OAxBS,CAAlB;;AA0BAjB,SAAQiB,OAAR,GAAkB2Q,WAAlB;;AAED;AAAO,CAhlCG;AAilCV;AACA,KAAM,UAAS3R,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;;AAEpD;;AAEAoB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIC,UAAU,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,SAAOA,OAAOC,QAAd,MAA2B,QAA3D,GAAsE,UAAUR,GAAV,EAAe;AAAE,gBAAcA,GAAd,0CAAcA,GAAd;AAAoB,EAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,SAAOA,OAAO,OAAOO,MAAP,KAAkB,UAAzB,IAAuCP,IAAIS,WAAJ,KAAoBF,MAA3D,IAAqEP,QAAQO,OAAOG,SAApF,GAAgG,QAAhG,UAAkHV,GAAlH,0CAAkHA,GAAlH,CAAP;AAA+H,EAA5Q;;AAEA,KAAIW,WAAWR,OAAOS,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,UAAUC,MAA9B,EAAsCF,GAAtC,EAA2C;AAAE,OAAIG,SAASF,UAAUD,CAAV,CAAb,CAA2B,KAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,QAAId,OAAOO,SAAP,CAAiBS,cAAjB,CAAgC9B,IAAhC,CAAqC4B,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,YAAOK,GAAP,IAAcD,OAAOC,GAAP,CAAd;AAA4B;AAAE;AAAE,GAAC,OAAOL,MAAP;AAAgB,EAAhQ,CAVoD,CAU8M;;;;AAKlQ5B,SAAQiB,OAAR,GAAkB6Q,QAAlB;;AAEA,KAAI1P,UAAUtC,oBAAoB,CAApB,CAAd;;AAEA,KAAIuC,WAAW3B,uBAAuB0B,OAAvB,CAAf;;AAEA,KAAI2P,gBAAgBjS,oBAAoB,CAApB,CAApB;;AAEA,KAAIkS,iBAAiBtR,uBAAuBqR,aAAvB,CAArB;;AAEA,UAASrR,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,UAASkR,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,MAAIC,MAAMC,OAAN,CAAcF,GAAd,CAAJ,EAAwB;AAAE,QAAK,IAAIrQ,IAAI,CAAR,EAAWwQ,OAAOF,MAAMD,IAAInQ,MAAV,CAAvB,EAA0CF,IAAIqQ,IAAInQ,MAAlD,EAA0DF,GAA1D,EAA+D;AAAEwQ,SAAKxQ,CAAL,IAAUqQ,IAAIrQ,CAAJ,CAAV;AAAmB,IAAC,OAAOwQ,IAAP;AAAc,GAA7H,MAAmI;AAAE,UAAOF,MAAMG,IAAN,CAAWJ,GAAX,CAAP;AAAyB;AAAE;;AAEnM,UAASJ,QAAT,CAAkBtP,OAAlB,EAA2BC,IAA3B,EAAiC;AAC7B,MAAIC,UAAUZ,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAAlF;;AAEA,MAAIc,OAAO,EAAX;;AAEA,MAAIC,SAAS;AACTC,QAAK,CADI;AAETC,UAAO,CAFE;AAGTC,WAAQ,CAHC;AAITC,SAAM;AAJG,GAAb;AAAA,MAMIsP,SAAS,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EAAwD,SAAxD,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,EAAoG,SAApG,EAA+G,SAA/G,EAA0H,SAA1H,EAAqI,SAArI,EAAgJ,SAAhJ,EAA2J,SAA3J,EAAsK,SAAtK,EAAiL,SAAjL,EAA4L,SAA5L,EAAuM,SAAvM,EAAkN,SAAlN,EAA6N,SAA7N,EAAwO,SAAxO,EAAmP,SAAnP,EAA8P,SAA9P,EAAyQ,SAAzQ,EAAoR,SAApR,EAA+R,SAA/R,EAA0S,SAA1S,EAAqT,SAArT,EAAgU,SAAhU,EAA2U,SAA3U,EAAsV,SAAtV,EAAiW,SAAjW,EAA4W,SAA5W,EAAuX,SAAvX,EAAkY,SAAlY,EAA6Y,SAA7Y,EAAwZ,SAAxZ,EAAma,SAAna,EAA8a,SAA9a,EAAyb,SAAzb,EAAoc,SAApc,EAA+c,SAA/c,EAA0d,SAA1d,EAAqe,SAAre,EAAgf,SAAhf,EAA2f,SAA3f,EAAsgB,SAAtgB,EAAihB,SAAjhB,EAA4hB,SAA5hB,EAAuiB,SAAviB,EAAkjB,SAAljB,CANb;AAAA,MAOIC,eAAe,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EAAwD,SAAxD,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,EAAoG,SAApG,EAA+G,SAA/G,EAA0H,SAA1H,EAAqI,SAArI,EAAgJ,SAAhJ,EAA2J,SAA3J,EAAsK,SAAtK,EAAiL,SAAjL,EAA4L,SAA5L,EAAuM,SAAvM,EAAkN,SAAlN,EAA6N,SAA7N,EAAwO,SAAxO,EAAmP,SAAnP,EAA8P,SAA9P,EAAyQ,SAAzQ,EAAoR,SAApR,EAA+R,SAA/R,EAA0S,SAA1S,EAAqT,SAArT,EAAgU,SAAhU,EAA2U,SAA3U,EAAsV,SAAtV,EAAiW,SAAjW,EAA4W,SAA5W,EAAuX,SAAvX,EAAkY,SAAlY,EAA6Y,SAA7Y,EAAwZ,SAAxZ,EAAma,SAAna,EAA8a,SAA9a,EAAyb,SAAzb,EAAoc,SAApc,EAA+c,SAA/c,EAA0d,SAA1d,EAAqe,SAAre,EAAgf,SAAhf,EAA2f,SAA3f,EAAsgB,SAAtgB,EAAihB,SAAjhB,EAA4hB,SAA5hB,EAAuiB,SAAviB,EAAkjB,SAAljB,EAA6jB,SAA7jB,EAAwkB,SAAxkB,EAAmlB,SAAnlB,EAA8lB,SAA9lB,EAAymB,SAAzmB,EAAonB,SAApnB,EAA+nB,SAA/nB,EAA0oB,SAA1oB,CAPnB;AAAA,MAQIjP,WAAW;AACXC,WAAQ,GADG;AAEXC,UAAO,GAFI;AAGXgP,oBAAiB,GAHN;AAIXC,WAAQ,GAJG;;AAMXtD,cAAW,kBANA;AAOXC,WAAQ,CAPG;AAQXC,aAAU,SAASA,QAAT,CAAkBvL,CAAlB,EAAqB;AAC3B,WAAOA,EAAE6K,QAAF,EAAP;AACH,IAVU;;AAYX/E,aAAU,IAZC;AAaX5F,WAAQsO,MAbG;AAcXI,gBAAaH,YAdF;AAeXI,mBAAgB,KAfL;;AAiBX9O,kBAAe,SAASA,aAAT,CAAuBC,CAAvB,EAA0B;AACrC,WAAOA,EAAEtB,IAAF,CAAOoF,UAAd;AACH,IAnBU;AAoBX0H,mBAAgB5M,SApBL;;AAsBXiN,gBAAa,EAtBF;AAuBXlL,aAAU,SAASA,QAAT,CAAkBX,CAAlB,EAAqB;AAC3B,WAAOA,EAAEG,IAAT;AACH,IAzBU;;AA2BXS,mBAAgB,IA3BL;AA4BXC,eAAYA,UA5BD;AA6BXC,oBAAiBxC,SAASpB,OAAT,CAAiB4D,eA7BvB;AA8BXC,mBAAgBzC,SAASpB,OAAT,CAAiB6D;AA9BtB,GARf;;AAyCA,MAAIC,WAAW,KAAK,CAApB;;AAEA,MAAI8N,eAAe,CAAC,CAApB;;AAEA;AACA,MAAIxN,UAAU,KAAK,CAAnB;AAAA,MACI0K,cAAc,KAAK,CADvB;AAAA,MAEI+C,OAAO,KAAK,CAFhB;;AAGI;AACJvM,MAAI,KAAK,CAJT;;AAKI;AACJD,MAAI,KAAK,CANT;;AAOI;AACJmB,QAAM,KAAK,CARX;;AASI;AACJiC,SAAO,KAAK,CAVZ;;AAWI;AACJqJ,oBAAkB,KAAK,CAZvB;;AAcA;;AAEA;;;AAGA,WAASpN,IAAT,GAAgB;AACZZ,cAAWrD,SAAS,EAAT,EAAa6B,QAAb,EAAuBb,OAAvB,CAAX;;AAEAqC,YAAStB,KAAT,GAAiBsB,SAAStB,KAAT,GAAiBZ,OAAOE,KAAxB,GAAgCF,OAAOI,IAAxD;AACA8B,YAASvB,MAAT,GAAkBuB,SAASvB,MAAT,GAAkBX,OAAOC,GAAzB,GAA+BD,OAAOG,MAAxD;;AAEA;AACAP,QAAK0F,QAAL,GAAgB6K,iBAAiBvQ,KAAK0F,QAAtB,EAAgC1F,KAAKA,IAAL,CAAUoF,UAA1C,CAAhB;;AAEA,OAAI9C,SAASJ,cAAb,EAA6B;AACzBiB;AACH;;AAEDsK;;AAEA;AACA+C;;AAEA;AACAlI,cAAWnI,KAAKqI,KAAhB,EAAuB,IAAvB;AACH;;AAED,WAASrF,WAAT,GAAuB;AACnBP,aAAUjC,GAAG6D,MAAH,CAAU,MAAV,EAAkBC,MAAlB,CAAyB,KAAzB,EAAgCJ,IAAhC,CAAqC,IAArC,EAA2CtE,QAAQtC,EAAR,GAAa,UAAxD,EAAoE4G,IAApE,CAAyE,OAAzE,EAAkF,KAAlF,EAAyFO,KAAzF,CAA+F,UAA/F,EAA2G,UAA3G,EAAuHA,KAAvH,CAA6H,SAA7H,EAAwI,IAAxI,EAA8IA,KAA9I,CAAoJ,YAApJ,EAAkK,QAAlK,EAA4KA,KAA5K,CAAkL,kBAAlL,EAAsM,OAAtM,EAA+MA,KAA/M,CAAqN,SAArN,EAAgO,KAAhO,EAAuOA,KAAvO,CAA6O,QAA7O,EAAuP,mBAAvP,EAA4QA,KAA5Q,CAAkR,eAAlR,EAAmS,MAAnS,CAAV;AACH;;AAED,WAAS6I,OAAT,GAAmB;AACf,OAAIC,eAAepL,SAASqK,SAA5B;AACA7D,KAAE/I,OAAF,EAAW4N,QAAX,CAAoBD,YAApB;AACA5E,KAAE,SAAF,EAAa8E,IAAb,CAAkB,MAAlB,EAA0B,UAA1B,EAAsCzF,IAAtC,CAA2C,QAAQuF,YAAR,GAAuB,uFAAvB,IAAkHpL,SAAStB,KAAT,GAAiBsB,SAAS0N,eAA5I,IAA+J,WAA/J,GAA6KtC,YAA7K,GAA4L,qHAA5L,GAAoTA,YAApT,GAAmU,gFAAnU,GAAsZA,YAAtZ,GAAqa,sFAAra,GAA8fA,YAA9f,GAA6gB,qFAA7gB,GAAqmBA,YAArmB,GAAonB,8JAApnB,GAAqxBA,YAArxB,GAAoyB,sEAA/0B,EAAu5BG,QAAv5B,CAAg6B,MAAh6B;AACH;;AAED;;;;;;;;;AASA,WAAS0C,gBAAT,CAA0B7K,QAA1B,EAAoCnE,KAApC,EAA2C;AACvC,OAAInC,IAAI,KAAK,CAAb;AACA,QAAKA,IAAI,CAAT,EAAYA,IAAIsG,SAASpG,MAAzB,EAAiCF,GAAjC,EAAsC;AAClC,QAAI,OAAOsG,SAAStG,CAAT,EAAYsG,QAAnB,KAAgC,WAApC,EAAiD;AAC7CA,cAAStG,CAAT,EAAYsG,QAAZ,GAAuB6K,iBAAiB7K,SAAStG,CAAT,EAAYsG,QAA7B,EAAuCA,SAAStG,CAAT,EAAYY,IAAZ,CAAiBoF,UAAxD,CAAvB;AACH;AACJ;AACD,OAAIM,SAASpG,MAAT,GAAkB,CAAlB,IAAuBiC,UAAU,CAAjC,IAAsCA,UAAUrB,SAApD,EAA+D;AAC3DwF,aAAS4I,IAAT,CAAc;AACV7Q,SAAI,CAAC,CADK;AAEVgE,WAAM,OAFI;AAGVzB,WAAM;AACFuB,aAAOA,KADL;AAEF6D,kBAAY7D;AAFV;AAHI,KAAd;AAQH;AACD,UAAOmE,QAAP;AACH;;AAED;;;AAGA,WAAS8K,MAAT,GAAkB;AACd,OAAIC,MAAM,KAAK,CAAf;;AACI;AACJC,eAAY,KAAK,CAFjB;;AAGI;AACJtK,WAAQ,KAAK,CAJb;;AAKI;AACJuK,eAAY,KAAK,CANjB,CADc,CAOM;;AAEpB;AACA7H,KAAE/I,OAAF,EAAW+N,KAAX;;AAEAR,iBAAc3M,GAAG6D,MAAH,CAAUzE,OAAV,EAAmB0E,MAAnB,CAA0B,KAA1B,EAAiCJ,IAAjC,CAAsC,IAAtC,EAA4CtE,QAAQtC,EAAR,GAAa,cAAzD,EAAyE4G,IAAzE,CAA8E,OAA9E,EAAuF,sBAAvF,EAA+GI,MAA/G,CAAsH,IAAtH,CAAd;;AAEAX,OAAInD,GAAGC,KAAH,CAASmD,MAAT,GAAkBC,KAAlB,CAAwB,CAAC,CAAD,EAAI,IAAIc,KAAKC,EAAb,CAAxB,CAAJ,CAdc,CAciC;AAC/ClB,OAAIlD,GAAGC,KAAH,CAASmD,MAAT,GAAkBuB,MAAlB,CAAyB,CAAC,CAAD,EAAI,CAAJ,CAAzB,EAAiCtB,KAAjC,CAAuC,CAAC,CAAD,EAAI1B,SAAS2N,MAAb,CAAvC,CAAJ;AACAK,qBAAkB,CAAlB;;AAEAG,SAAM9P,GAAG6D,MAAH,CAAUzE,OAAV,EAAmB0E,MAAnB,CAA0B,KAA1B,EAAiCJ,IAAjC,CAAsC,SAAtC,EAAiD,KAAjD,EAAwDA,IAAxD,CAA6D,OAA7D,EAAsE,4BAAtE,EAAoGA,IAApG,CAAyG,SAAzG,EAAoH,UAAU/B,SAAStB,KAAT,GAAiBZ,OAAOE,KAAxB,GAAgCF,OAAOI,IAAjD,IAAyD,GAAzD,IAAgE8B,SAASvB,MAAT,GAAkBX,OAAOC,GAAzB,GAA+BD,OAAOG,MAAtG,CAApH,EAAmO8D,IAAnO,CAAwO,OAAxO,EAAiP/B,SAAStB,KAAT,GAAiBZ,OAAOE,KAAxB,GAAgCF,OAAOI,IAAxR,EAA8R6D,IAA9R,CAAmS,QAAnS,EAA6S/B,SAASvB,MAAT,GAAkBX,OAAOC,GAAzB,GAA+BD,OAAOG,MAAnV,EAA2V8D,IAA3V,CAAgW,UAAhW,EAA4W,QAA5W,EAAsXO,KAAtX,CAA4X,aAA5X,EAA2Y,gDAA3Y,CAAN;AACA6L,OAAIhM,MAAJ,CAAW,OAAX,EAAoBJ,IAApB,CAAyB,MAAzB,EAAiC,UAAjC,EAA6C8D,IAA7C,CAAkD,+BAAlD;AACAsI,SAAMA,IAAIhM,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB,WAArB,EAAkC,eAAe/B,SAAS2N,MAAxB,GAAiC,GAAjC,GAAuC3N,SAAS2N,MAAhD,GAAyD,GAA3F,CAAN,CApBc,CAoByF;;AAEvGS,eAAY/P,GAAG0C,MAAH,CAAUqN,SAAV,GAAsB;AAAtB,IACXE,IADW,CACN,IADM,EACA;AADA,IAEXjS,KAFW,CAEL,UAAU2C,CAAV,EAAa;AAChB,WAAOA,EAAEtB,IAAF,CAAOoF,UAAd;AACH,IAJW,CAAZ,CAtBc,CA0BV;;AAEJ;AACAJ,SAAMrE,GAAGsC,GAAH,CAAO+B,GAAP,GAAaE,UAAb,CAAwB,UAAU5D,CAAV,EAAa;AACvC,WAAOwD,KAAKoH,GAAL,CAAS,CAAT,EAAYpH,KAAK+L,GAAL,CAAS,IAAI/L,KAAKC,EAAlB,EAAsBjB,EAAExC,EAAEwC,CAAJ,CAAtB,CAAZ,CAAP;AACH,IAFK,EAEHqB,QAFG,CAEM,UAAU7D,CAAV,EAAa;AACrB,WAAOwD,KAAKoH,GAAL,CAAS,CAAT,EAAYpH,KAAK+L,GAAL,CAAS,IAAI/L,KAAKC,EAAlB,EAAsBjB,EAAExC,EAAEwC,CAAF,GAAMxC,EAAEqN,EAAV,CAAtB,CAAZ,CAAP;AACH,IAJK;AAKN;AALM,IAMLmC,WANK,CAMO,UAAUxP,CAAV,EAAa;AACtB,WAAOwD,KAAKoH,GAAL,CAAS,CAAT,EAAY5K,EAAEuC,CAAF,GAAMA,EAAEvC,EAAEuC,CAAJ,CAAN,GAAevC,EAAEuC,CAA7B,CAAP;AACH,IARK,EAQHoB,WARG,CAQS,UAAU3D,CAAV,EAAa;AACxB,WAAOwD,KAAKoH,GAAL,CAAS,CAAT,EAAYrI,EAAEvC,EAAEuC,CAAF,GAAMvC,EAAEsN,EAAV,CAAZ,IAA6B,CAApC;AACH,IAVK,CAAN;;AAYA;AACAxI,WAAQsK,UAAUtK,KAAV,CAAgBpG,IAAhB,CAAR;;AAEAqQ,UAAOI,IAAIhK,SAAJ,CAAc,MAAd,EAAsBzG,IAAtB,CAA2BoG,KAA3B,CAAP;AACAiK,QAAK1J,KAAL,GAAalC,MAAb,CAAoB,MAApB,EAA4B;AAA5B,IACCJ,IADD,CACM,OADN,EACe,KADf,EACsBA,IADtB,CAC2B,IAD3B,EACiC,UAAU/C,CAAV,EAAalC,CAAb,EAAgB;AAC7C,WAAO,UAAUA,CAAjB;AACH,IAHD,EAGG;AAHH,IAICiF,IAJD,CAIM,GAJN,EAIWW,GAJX,EAIgB;AAJhB,IAKCX,IALD,CAKM,WALN,EAKmB,SALnB,EAK8B;AAL9B,IAMCO,KAND,CAMO,MANP,EAMemM,MANf,EAMuB;AANvB,IAOC3M,EAPD,CAOI,OAPJ,EAOa,UAAU9C,CAAV,EAAa;AACtB,QAAIA,EAAEiF,KAAF,GAAU+J,eAAd,EAA+B;AAC3B1J,WAAMtF,CAAN;AACH;AACJ,IAXD,EAWG;AAXH,IAYC8C,EAZD,CAYI,WAZJ,EAYiByC,SAZjB,EAY4BzC,EAZ5B,CAY+B,WAZ/B,EAY4CoK,WAZ5C,EAYyDpK,EAZzD,CAY4D,UAZ5D,EAYwE0C,UAZxE;;AAcA;AACAG,UAAOwJ,IAAIhK,SAAJ,CAAc,MAAd,EAAsBzG,IAAtB,CAA2BoG,KAA3B,CAAP;;AAEAuK,eAAY1J,KAAKN,KAAL,GAAalC,MAAb,CAAoB,MAApB,EAA4BG,KAA5B,CAAkC,MAAlC,EAA0C,UAAUtD,CAAV,EAAa;AAC/D,WAAO1B,SAASpB,OAAT,CAAiB6L,mBAAjB,CAAqC0G,OAAOzP,CAAP,CAArC,CAAP;AACH,IAFW,EAETsD,KAFS,CAEH,cAFG,EAEa,CAFb,EAEgBA,KAFhB,CAEsB,aAFtB,EAEqC,kDAFrC,EAEyFA,KAFzF,CAE+F,gBAF/F,EAEiH,MAFjH,EAEyH;AAFzH,IAGXP,IAHW,CAGN,IAHM,EAGA,MAHA,CAAZ;;AAKAsM,aAAUlM,MAAV,CAAiB,OAAjB,EAA0BJ,IAA1B,CAA+B,GAA/B,EAAoC,CAApC,EAAuC4C,IAAvC,CAA4C,UAAU3F,CAAV,EAAa;AACrD,WAAOA,EAAEiF,KAAF,IAAWjF,EAAEG,IAAF,KAAW,OAAtB,GAAgCH,EAAEG,IAAF,CAAOyI,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAhC,GAAuD,EAA9D;AACH,IAFD;;AAIAyG,aAAUlM,MAAV,CAAiB,OAAjB,EAA0BJ,IAA1B,CAA+B,GAA/B,EAAoC,CAApC,EAAuCA,IAAvC,CAA4C,IAA5C,EAAkD,KAAlD,EAAyD4C,IAAzD,CAA8D,UAAU3F,CAAV,EAAa;AACvE,WAAOA,EAAEiF,KAAF,IAAWjF,EAAEG,IAAF,KAAW,OAAtB,GAAgCH,EAAEG,IAAF,CAAOyI,KAAP,CAAa,GAAb,EAAkB,CAAlB,KAAwB,EAAxD,GAA6D,EAApE;AACH,IAFD;;AAIAyG,aAAUlM,MAAV,CAAiB,OAAjB,EAA0BJ,IAA1B,CAA+B,GAA/B,EAAoC,CAApC,EAAuCA,IAAvC,CAA4C,IAA5C,EAAkD,KAAlD,EAAyD4C,IAAzD,CAA8D,UAAU3F,CAAV,EAAa;AACvE,WAAOA,EAAEiF,KAAF,IAAWjF,EAAEG,IAAF,KAAW,OAAtB,GAAgCH,EAAEG,IAAF,CAAOyI,KAAP,CAAa,GAAb,EAAkB,CAAlB,KAAwB,EAAxD,GAA6D,EAApE;AACH,IAFD;;AAIAyG,aAAU/L,KAAV,CAAgB,WAAhB,EAA6B,UAAUtD,CAAV,EAAa;AACtC,WAAOwD,KAAK+L,GAAL,CAASvO,SAAS2N,MAAT,GAAkB3N,SAASsK,MAA3B,GAAoC,KAAKoE,qBAAL,EAApC,GAAmE,EAAnE,GAAwE,CAAjF,EAAoF,EAApF,IAA0F,IAAjG;AACH,IAFD;AAGH;;AAED;;;;;;;AAOA,WAASC,QAAT,CAAkB3P,CAAlB,EAAqB;AACjB,OAAI4P,KAAKpM,KAAK+L,GAAL,CAASM,KAAK7P,CAAL,CAAT,EAAkBA,EAAEuC,CAAF,GAAMvB,SAASsK,MAAT,GAAkBtL,EAAEsN,EAA5C,CAAT;AAAA,OACIwC,KAAKzQ,GAAGsN,WAAH,CAAenK,EAAEwB,MAAF,EAAf,EAA2B,CAAChE,EAAEwC,CAAH,EAAMxC,EAAEwC,CAAF,GAAMxC,EAAEqN,EAAd,CAA3B,CADT;AAAA,OAEI0C,KAAK1Q,GAAGsN,WAAH,CAAepK,EAAEyB,MAAF,EAAf,EAA2B,CAAChE,EAAEuC,CAAH,EAAMqN,EAAN,CAA3B,CAFT;AAAA,OAGII,KAAK3Q,GAAGsN,WAAH,CAAepK,EAAEG,KAAF,EAAf,EAA0B,CAAC1C,EAAEuC,CAAF,GAAM,EAAN,GAAW,CAAZ,EAAevB,SAAS2N,MAAxB,CAA1B,CAHT;AAIA,UAAO,UAAU3O,CAAV,EAAa;AAChB,WAAO,UAAUiQ,CAAV,EAAa;AAChBzN,OAAEwB,MAAF,CAAS8L,GAAGG,CAAH,CAAT;AACA1N,OAAEyB,MAAF,CAAS+L,GAAGE,CAAH,CAAT,EAAgBvN,KAAhB,CAAsBsN,GAAGC,CAAH,CAAtB;AACA,YAAOvM,IAAI1D,CAAJ,CAAP;AACH,KAJD;AAKH,IAND;AAOH;;AAED;;;;;;AAMA,WAAS6P,IAAT,CAAc7P,CAAd,EAAiB;AACb,UAAOA,EAAEoE,QAAF,GAAaZ,KAAKoH,GAAL,CAASkD,KAAT,CAAetK,IAAf,EAAqB0K,mBAAmBlO,EAAEoE,QAAF,CAAW4G,GAAX,CAAe6E,IAAf,CAAnB,CAArB,CAAb,GAA8E7P,EAAEuC,CAAF,GAAMvC,EAAEsN,EAA7F;AACH;;AAED,WAAST,cAAT,CAAwB7M,CAAxB,EAA2B;AACvB;AACA,OAAI8M,SAAS,EAAb;AACA,OAAIC,OAAO/M,CAAX;AACA,UAAO+M,IAAP,EAAa;AACTD,WAAOE,IAAP,CAAYD,IAAZ;AACAA,WAAOA,KAAK1K,MAAZ;AACH;AACDyK,UAAO/H,OAAP,GAAiBmL,KAAjB;AACA,OAAIC,WAAW9Q,GAAGsC,GAAH,CAAO+B,GAAP,GAAa8L,WAAb,CAAyB,CAAzB,EAA4B7L,WAA5B,CAAwC,EAAxC,EAA4CC,UAA5C,CAAuD,CAAvD,EAA0DC,QAA1D,CAAmE,UAAU7D,CAAV,EAAa;AAC3F,WAAO,IAAIwD,KAAKC,EAAT,GAAczD,EAAEtB,IAAF,CAAOuB,KAArB,GAA6BD,EAAEqC,MAAF,CAAS3D,IAAT,CAAcuB,KAAlD;AACH,IAFc,CAAf;AAGA,OAAImQ,KAAKpE,YAAY7G,SAAZ,CAAsB,QAAtB,EAAgCzG,IAAhC,CAAqCoO,MAArC,CAAT;AACAsD,MAAG/K,KAAH,GAAWlC,MAAX,CAAkB,IAAlB,EAAwBL,EAAxB,CAA2B,OAA3B,EAAoC,UAAU9C,CAAV,EAAa;AAC7CsF,UAAMtF,EAAEqC,MAAR;AACH,IAFD,EAEGU,IAFH,CAEQ,OAFR,EAEiB,OAFjB,EAE0BO,KAF1B,CAEgC,SAFhC,EAE2C,GAF3C,EAEgDP,IAFhD,CAEqD,OAFrD,EAE8D,UAAU/C,CAAV,EAAa;AACvE,WAAO,MAAMA,EAAEtB,IAAF,CAAO2R,IAAb,GAAoB,IAApB,GAA2BrQ,EAAEG,IAApC;AACH,IAJD,EAIG0G,IAJH,CAIQ,UAAU7G,CAAV,EAAa;AACjB,WAAO,uBAAuBA,EAAEG,IAAzB,GAAgC,8BAAhC,GAAiEqD,KAAK8M,KAAL,CAAW,MAAMtQ,EAAEtB,IAAF,CAAOuB,KAAb,GAAqBD,EAAEqC,MAAF,CAAS3D,IAAT,CAAcuB,KAA9C,CAAjE,GAAwH,OAAxH,GAAkID,EAAEqC,MAAF,CAASlC,IAA3I,GAAkJ,MAAzJ;AACH,IAND,EAMGiG,MANH,CAMU,KANV,EAMiB,cANjB,EAMiCrD,IANjC,CAMsC,OANtC,EAM+C,EAN/C,EAMmDA,IANnD,CAMwD,QANxD,EAMkE,EANlE,EAMsEI,MANtE,CAM6E,MAN7E,EAMqFJ,IANrF,CAM0F,GAN1F,EAM+FoN,QAN/F,EAMyGpN,IANzG,CAM8G,WAN9G,EAM2H,mBAN3H,EAMgJA,IANhJ,CAMqJ,MANrJ,EAM6J0M,MAN7J;AAOAW,MAAGvK,UAAH,GAAgBC,QAAhB,CAAyB9E,SAAS8E,QAAlC,EAA4CxC,KAA5C,CAAkD,SAAlD,EAA6D,GAA7D;AACA8M,MAAGnK,IAAH,GAAUJ,UAAV,GAAuBC,QAAvB,CAAgC9E,SAAS8E,QAAzC,EAAmDxC,KAAnD,CAAyD,SAAzD,EAAoE,GAApE,EAAyE4C,MAAzE;AACH;;AAED;;;;;AAKA,WAASZ,KAAT,CAAetF,CAAf,EAAkB;AACd,OAAI+D,QAAQ,IAAZ;;AAEA,OAAI/D,EAAEG,IAAF,KAAW,OAAf,EAAwB;AACpB;AACH;;AAED0M,kBAAe7M,CAAf;;AAEA,OAAIgB,SAASwK,cAAb,EAA6B;AACzBxK,aAASwK,cAAT,CAAwBnP,IAAxB,CAA6B,IAA7B,EAAmC2D,CAAnC;AACH;;AAED;AACAgP,qBAAkBhP,EAAEiF,KAAF,GAAUjE,SAASsK,MAArC;AACAyD,QAAKlJ,UAAL,GAAkBC,QAAlB,CAA2B9E,SAAS8E,QAApC,EAA8CyK,SAA9C,CAAwD,GAAxD,EAA6DZ,SAAS3P,CAAT,CAA7D,EAA0E+C,IAA1E,CAA+E,OAA/E,EAAwF,UAAU/C,CAAV,EAAa;AACjG,WAAOA,EAAEiF,KAAF,IAAW+J,eAAX,GAA6B,YAA7B,GAA4C,KAAnD;AACH,IAFD,EAEGjM,IAFH,CAEQ,cAFR,EAEwB,UAAU/C,CAAV,EAAa;AACjC,WAAOA,EAAEiF,KAAF,IAAW+J,eAAX,GAA6B,GAA7B,GAAmC,CAA1C;AACH,IAJD;;AAMA;AACArJ,QAAKrC,KAAL,CAAW,YAAX,EAAyB,UAAUkN,CAAV,EAAa;AAClC,WAAOC,WAAWzQ,CAAX,EAAcwQ,CAAd,IAAmB,IAAnB,GAA0BnR,GAAG6D,MAAH,CAAU,IAAV,EAAgBI,KAAhB,CAAsB,YAAtB,CAAjC;AACH,IAFD,EAEGuC,UAFH,GAEgBC,QAFhB,CAEyB9E,SAAS8E,QAFlC,EAE4CyK,SAF5C,CAEsD,aAFtD,EAEqE,UAAUvQ,CAAV,EAAa;AAC9E,WAAO,YAAY;AACf,YAAOwC,EAAExC,EAAEwC,CAAF,GAAMxC,EAAEqN,EAAF,GAAO,CAAf,IAAoB7J,KAAKC,EAAzB,GAA8B,KAA9B,GAAsC,OAA7C;AACH,KAFD;AAGH,IAND,EAMG8M,SANH,CAMa,WANb,EAM0B,UAAUvQ,CAAV,EAAa;AACnC,QAAI0Q,YAAY,CAAC1Q,EAAEG,IAAF,IAAU,EAAX,EAAeyI,KAAf,CAAqB,GAArB,EAA0B5K,MAA1B,GAAmC,CAAnD;AACA,WAAO,YAAY;AACf,SAAI2S,QAAQnO,EAAExC,EAAEwC,CAAF,GAAMxC,EAAEqN,EAAF,GAAO,CAAf,IAAoB,GAApB,GAA0B7J,KAAKC,EAA/B,GAAoC,EAAhD;AAAA,SACImN,SAASD,SAASD,YAAY,CAAC,GAAb,GAAmB,CAA5B,CADb;AAEA,YAAO,YAAYE,MAAZ,GAAqB,aAArB,GAAqCrO,EAAEvC,EAAEuC,CAAJ,CAArC,GAA8C,UAA9C,IAA4DoO,QAAQ,EAAR,GAAa,CAAC,GAAd,GAAoB,CAAhF,IAAqF,GAA5F;AACH,KAJD;AAKH,IAbD,EAaGrN,KAbH,CAaS,cAbT,EAayB,UAAUkN,CAAV,EAAa;AAClC,WAAOC,WAAWzQ,CAAX,EAAcwQ,CAAd,IAAmB,CAAnB,GAAuB,IAA9B;AACH,IAfD,EAeGlJ,IAfH,CAeQ,KAfR,EAee,UAAUkJ,CAAV,EAAa;AACxBnR,OAAG6D,MAAH,CAAUa,KAAV,EAAiBT,KAAjB,CAAuB,YAAvB,EAAqCmN,WAAWzQ,CAAX,EAAcwQ,CAAd,IAAmB,IAAnB,GAA0B,QAA/D;AACH,IAjBD;AAkBH;;AAED;;;;AAIA,WAASC,UAAT,CAAoBjU,CAApB,EAAuBD,CAAvB,EAA0B;AACtB,OAAIA,EAAE0I,KAAF,IAAW+J,eAAf,EAAgC;AAC5B,WAAO,KAAP;AACH;AACD,OAAIxS,MAAMD,CAAV,EAAa;AACT,WAAO,IAAP;AACH;AACD,OAAIC,EAAE4H,QAAN,EAAgB;AACZ,WAAO5H,EAAE4H,QAAF,CAAWyM,IAAX,CAAgB,UAAU7Q,CAAV,EAAa;AAChC,YAAOyQ,WAAWzQ,CAAX,EAAczD,CAAd,CAAP;AACH,KAFM,CAAP;AAGH;AACD,UAAO,KAAP;AACH;;AAED;;;;;;AAMA,WAASkT,MAAT,CAAgBzP,CAAhB,EAAmB;AACf,OAAIA,EAAEG,IAAF,KAAW,OAAf,EAAwB;AACpB,WAAO,OAAP;AACH;AACD,OAAIa,SAAS6N,cAAb,EAA6B;AACzB,WAAO7N,SAAS4N,WAAT,CAAqBpL,KAAKsN,GAAL,CAASxS,SAASpB,OAAT,CAAiBwL,UAAjB,CAA4B1I,EAAEG,IAAF,GAAS,GAAT,GAAeH,EAAEtB,IAAF,CAAO2R,IAAlD,CAAT,IAAoErP,SAAS4N,WAAT,CAAqB5Q,MAA9G,CAAP;AACH,IAFD,MAEO;AACH,QAAIgC,EAAEoE,QAAN,EAAgB;AACZ,SAAI2M,UAAU/Q,EAAEoE,QAAF,CAAW4G,GAAX,CAAeyE,MAAf,CAAd;AAAA,SACIvN,IAAI7C,GAAG2R,GAAH,CAAOD,QAAQ,CAAR,CAAP,CADR;AAAA,SAEI5O,IAAI9C,GAAG2R,GAAH,CAAOD,QAAQ,CAAR,CAAP,CAFR;AAAA,SAGIE,cAAcjR,EAAEoE,QAAF,CAAWpG,MAAX,KAAsB,CAAtB,IAA2BgC,EAAEoE,QAAF,CAAW,CAAX,EAAcjE,IAAd,KAAuB,OAHpE;AAIA;AACA,SAAI8Q,WAAJ,EAAiB;AACb,aAAO5R,GAAG2R,GAAH,CAAO9O,EAAEyL,CAAT,EAAYzL,EAAEyG,CAAd,EAAiBzG,EAAEgP,CAAF,GAAM,IAAvB,CAAP;AACH;AACD;AACA,YAAO7R,GAAG2R,GAAH,CAAO,CAAC9O,EAAEyL,CAAF,GAAMxL,EAAEwL,CAAT,IAAc,CAArB,EAAwB,CAACzL,EAAEyG,CAAF,GAAMxG,EAAEwG,CAAT,IAAc,CAAtC,EAAyC,CAACzG,EAAEgP,CAAF,GAAM/O,EAAE+O,CAAT,IAAc,CAAvD,CAAP;AACH;AACD;AACA,QAAI,CAAClR,EAAEsE,KAAP,EAAc;AACVtE,OAAEsE,KAAF,GAAU6M,UAAV;AACH;AACD,WAAOnR,EAAEsE,KAAT;AACH;AACJ;;AAED;;;;;;AAMA,WAAS6M,QAAT,GAAoB;AAChBrC,kBAAe,CAACA,eAAe,CAAhB,IAAqB9N,SAASd,MAAT,CAAgBlC,MAApD;AACA,UAAOgD,SAASd,MAAT,CAAgB4O,YAAhB,CAAP;AACH;;AAED;AACA,WAASvJ,SAAT,CAAmBvF,CAAnB,EAAsBlC,CAAtB,EAAyB;AACrB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACD,OAAIZ,EAAEiF,KAAF,GAAU+J,eAAV,IAA6BhP,EAAEG,IAAF,KAAW,OAA5C,EAAqD;AACjDmB,YAAQuF,IAAR,CAAa7F,SAASH,UAAT,CAAoBb,CAApB,CAAb,EAAqCsD,KAArC,CAA2C,KAA3C,EAAkDjE,GAAG2D,KAAH,CAAS8D,KAAT,GAAiB,CAAjB,GAAqB,IAAvE,EAA6ExD,KAA7E,CAAmF,MAAnF,EAA2FjE,GAAG2D,KAAH,CAAS+D,KAAT,GAAiB,EAAjB,GAAsB,IAAjH,EAAuHzD,KAAvH,CAA6H,YAA7H,EAA2I,SAA3I;AACH;AACJ;;AAED,WAASkC,UAAT,CAAoBxF,CAApB,EAAuBlC,CAAvB,EAA0B;AACtB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACDU,WAAQgC,KAAR,CAAc,YAAd,EAA4B,QAA5B;AACH;;AAED,WAAS4J,WAAT,CAAqBlN,CAArB,EAAwBlC,CAAxB,EAA2B;AACvB,OAAI,CAACkD,SAASJ,cAAd,EAA8B;AAC1B;AACH;AACDU,WAAQgC,KAAR,CAAc,KAAd,EAAqBjE,GAAG2D,KAAH,CAAS8D,KAAT,GAAiB,CAAjB,GAAqB,IAA1C,EAAgDxD,KAAhD,CAAsD,MAAtD,EAA8DjE,GAAG2D,KAAH,CAAS+D,KAAT,GAAiB,EAAjB,GAAsB,IAApF;AACH;;AAED,WAASlG,UAAT,CAAoBb,CAApB,EAAuB;AACnB,UAAO,2BAA2BgB,SAASF,eAAT,CAAyBd,CAAzB,CAA3B,GAAyD,UAAzD,GAAsEgB,SAASD,cAAT,CAAwBf,CAAxB,CAAtE,GAAmG,MAA1G;AACH;;AAED;;AAEA;;;AAGAnB,OAAKqI,KAAL,GAAa,SAASA,KAAT,GAAiB;AAC1B5B,SAAM5G,IAAN;AACH,GAFD;;AAIA;;;AAGAG,OAAKuS,YAAL,GAAoB,SAASA,YAAT,GAAwB;AACxC/R,MAAG8F,SAAH,CAAa,aAAb,EAA4BU,UAA5B,GAAyCvC,KAAzC,CAA+C,MAA/C,EAAuDmM,MAAvD;AACAV,QAAKlJ,UAAL,GAAkBvC,KAAlB,CAAwB,MAAxB,EAAgCmM,MAAhC;AACA9J,QAAKE,UAAL,GAAkBvC,KAAlB,CAAwB,MAAxB,EAAgC,UAAUtD,CAAV,EAAa;AACzC,WAAO1B,SAASpB,OAAT,CAAiB6L,mBAAjB,CAAqC0G,OAAOzP,CAAP,CAArC,CAAP;AACH,IAFD;AAGH,GAND;;AAQA;;;;;AAKAnB,OAAK2O,aAAL,GAAqB,SAASA,aAAT,CAAuBC,YAAvB,EAAqC;AACtD;AACA;AACA;AACAzG,cAAW,YAAY;AACnB,QAAIyF,OAAO,GAAX;AACA,QAAIgB,YAAJ,EAAkB;AACdhB,YAAOjJ,KAAK+L,GAAL,CAAS/H,EAAEoG,MAAF,EAAUnO,MAAV,KAAqB,EAA9B,EAAkC+H,EAAEoG,MAAF,EAAUlO,KAAV,KAAoB,GAAtD,CAAP;AACH;AACD8H,MAAE/I,OAAF,EAAW2F,QAAX,CAAoB,KAApB,EAA2BrB,IAA3B,CAAgC,OAAhC,EAAyC0J,IAAzC,EAA+C1J,IAA/C,CAAoD,QAApD,EAA8D0J,IAA9D;AACH,IAND,EAMG,IANH;AAOH,GAXD;;AAaA;AACA7K;;AAEA,SAAO/C,IAAP;AACH;;AAED,UAASsI,MAAT,CAAgBC,QAAhB,EAA0BC,MAA1B,EAAkC;AAC9B,SAAO,KAAKC,IAAL,CAAU,YAAY;AACzB,OAAIC,QAAQC,EAAE,IAAF,CAAZ;AACA,OAAI9I,OAAO6I,MAAM7I,IAAN,CAAW,cAAX,CAAX;AACA,OAAIC,UAAU6I,EAAEC,MAAF,CAAS,EAAT,EAAaF,MAAM7I,IAAN,EAAb,EAA2B,CAAC,OAAO2I,MAAP,KAAkB,WAAlB,GAAgC,WAAhC,GAA8C/J,QAAQ+J,MAAR,CAA/C,MAAoE,QAApE,IAAgFA,MAA3G,CAAd;;AAEA,OAAI,CAAC3I,IAAL,EAAW;AACP6I,UAAM7I,IAAN,CAAW,cAAX,EAA2BA,OAAO,IAAIqP,QAAJ,CAAa,IAAb,EAAmB3G,QAAnB,EAA6BzI,OAA7B,CAAlC;AACH;AACD,OAAI,OAAO0I,MAAP,KAAkB,QAAtB,EAAgC;AAC5B3I,SAAK2I,MAAL;AACH;AACJ,GAXM,CAAP;AAYH;;AAEDG,GAAEE,EAAF,CAAK2J,QAAL,GAAgBlK,MAAhB;AACAK,GAAEE,EAAF,CAAK2J,QAAL,CAAczJ,WAAd,GAA4BmG,QAA5B;;AAED;AAAO,CAxkDG;AAykDV;AACA,KAAM,UAAS7R,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;;AAEpD;;AAEAoB,QAAOC,cAAP,CAAsBnB,OAAtB,EAA+B,YAA/B,EAA6C;AACzCoB,SAAO;AADkC,EAA7C;;AAIA,KAAIwK,eAAe,YAAY;AAAE,WAASC,gBAAT,CAA0BjK,MAA1B,EAAkCkK,KAAlC,EAAyC;AAAE,QAAK,IAAIjK,IAAI,CAAb,EAAgBA,IAAIiK,MAAM/J,MAA1B,EAAkCF,GAAlC,EAAuC;AAAE,QAAIkK,aAAaD,MAAMjK,CAAN,CAAjB,CAA2BkK,WAAWC,UAAX,GAAwBD,WAAWC,UAAX,IAAyB,KAAjD,CAAwDD,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAWG,QAAX,GAAsB,IAAtB,CAA4BhL,OAAOC,cAAP,CAAsBS,MAAtB,EAA8BmK,WAAW9J,GAAzC,EAA8C8J,UAA9C;AAA4D;AAAE,GAAC,OAAO,UAAUJ,WAAV,EAAuBQ,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBN,iBAAiBF,YAAYlK,SAA7B,EAAwC0K,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBP,iBAAiBF,WAAjB,EAA8BS,WAA9B,EAA4C,OAAOT,WAAP;AAAqB,GAAhN;AAAmN,EAA9hB,EAAnB;;AAEA,KAAI0B,QAAQvN,oBAAoB,CAApB,CAAZ;;AAEA,KAAIwN,SAAS5M,uBAAuB2M,KAAvB,CAAb;;AAEA,UAAS3M,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,UAASsL,eAAT,CAAyBC,QAAzB,EAAmCX,WAAnC,EAAgD;AAAE,MAAI,EAAEW,oBAAoBX,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAIY,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,UAASgB,0BAAT,CAAoCC,IAApC,EAA0CpN,IAA1C,EAAgD;AAAE,MAAI,CAACoN,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF,GAAC,OAAOrN,SAAS,QAAOA,IAAP,0CAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EoN,IAAjF;AAAwF;;AAEhP,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIrB,SAAJ,CAAc,qEAAoEqB,UAApE,0CAAoEA,UAApE,EAAd,CAAN;AAAsG,GAACD,SAASlM,SAAT,GAAqBP,OAAO2M,MAAP,CAAcD,cAAcA,WAAWnM,SAAvC,EAAkD,EAAED,aAAa,EAAEJ,OAAOuM,QAAT,EAAmB3B,YAAY,KAA/B,EAAsCE,UAAU,IAAhD,EAAsDD,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAI2B,UAAJ,EAAgB1M,OAAO4M,cAAP,GAAwB5M,OAAO4M,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAwG;;AAE9e,KAAIyH,eAAe,UAAUpH,KAAV,EAAiB;AAChCP,YAAU2H,YAAV,EAAwBpH,KAAxB;;AAEA,WAASoH,YAAT,GAAwB;AACpBhJ,mBAAgB,IAAhB,EAAsBgJ,YAAtB;;AAEA,UAAO9H,2BAA2B,IAA3B,EAAiC,CAAC8H,aAAatH,SAAb,IAA0B7M,OAAOgN,cAAP,CAAsBmH,YAAtB,CAA3B,EAAgExD,KAAhE,CAAsE,IAAtE,EAA4E/P,SAA5E,CAAjC,CAAP;AACH;;AAED8J,eAAayJ,YAAb,EAA2B,IAA3B,EAAiC,CAAC;AAC9BpT,QAAK,KADyB;AAE9Bb,UAAO,SAASiN,IAAT,GAAgB;AACnB,QAAIpF,OAAOnH,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBa,SAAzC,GAAqDb,UAAU,CAAV,CAArD,GAAoE,EAA/E;;AAEA,WAAO,IAAIuT,YAAJ,CAAiBpM,IAAjB,CAAP;AACH;AAN6B,GAAD,EAO9B;AACChH,QAAK,YADN;AAECb,UAAO,SAASgG,UAAT,CAAoB6B,IAApB,EAA0B;AAC7B,WAAOqE,OAAOrM,OAAP,CAAemG,UAAf,CAA0B6B,IAA1B,EAAgCoM,aAAa/G,GAA7C,CAAP;AACH;AAJF,GAP8B,CAAjC;;AAcA,SAAO+G,YAAP;AACH,EAxBkB,CAwBjB/H,OAAOrM,OAxBU,CAAnB;;AA0BAjB,SAAQiB,OAAR,GAAkBoU,YAAlB;;AAED;AAAO;AACP,QA7nDU,CA1CD;AAwqDT","file":"unipept-visualizations.es5.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _treeview = __webpack_require__(1);\n\t\n\tvar _treeview2 = _interopRequireDefault(_treeview);\n\t\n\tvar _treemap = __webpack_require__(5);\n\t\n\tvar _treemap2 = _interopRequireDefault(_treemap);\n\t\n\tvar _sunburst = __webpack_require__(7);\n\t\n\tvar _sunburst2 = _interopRequireDefault(_sunburst);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\n\t                                                                                                                                                                                                                                                                   * Zoomable treeview, inspiration from\n\t                                                                                                                                                                                                                                                                   * - http://bl.ocks.org/mbostock/4339083\n\t                                                                                                                                                                                                                                                                   * - https://gist.github.com/robschmuecker/7880033\n\t                                                                                                                                                                                                                                                                   * - http://www.brightpointinc.com/interactive/budget/index.html?source=d3js\n\t                                                                                                                                                                                                                                                                   */\n\t\n\t\n\texports.default = TreeView;\n\t\n\tvar _univis = __webpack_require__(2);\n\t\n\tvar _univis2 = _interopRequireDefault(_univis);\n\t\n\tvar _treeviewNode = __webpack_require__(3);\n\t\n\tvar _treeviewNode2 = _interopRequireDefault(_treeviewNode);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction TreeView(element, data) {\n\t    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var that = {};\n\t\n\t    var MARGIN = {\n\t        top: 5,\n\t        right: 5,\n\t        bottom: 5,\n\t        left: 5\n\t    },\n\t        DURATION = 750,\n\t        COLOR_SCALE = d3.scale.category10(),\n\t        DEFAULTS = {\n\t        height: 300,\n\t        width: 600,\n\t        nodeDistance: 180,\n\t        levelsToExpand: 2,\n\t        minNodeSize: 2,\n\t        maxNodeSize: 105,\n\t\n\t        countAccessor: function countAccessor(d) {\n\t            return d.data.count;\n\t        },\n\t\n\t        colors: function colors(d) {\n\t            return COLOR_SCALE(d.name);\n\t        },\n\t        nodeFillColor: nodeFillColor,\n\t        nodeStrokeColor: nodeStrokeColor,\n\t        linkStrokeColor: linkStrokeColor,\n\t\n\t        enableInnerArcs: true,\n\t        enableExpandOnClick: true,\n\t        enableRightClick: true,\n\t\n\t        enableLabels: true,\n\t        getLabel: function getLabel(d) {\n\t            return d.name;\n\t        },\n\t\n\t        enableTooltips: true,\n\t        getTooltip: getTooltip,\n\t        getTooltipTitle: _univis2.default.getTooltipTitle,\n\t        getTooltipText: _univis2.default.getTooltipText\n\t    };\n\t\n\t    var settings = void 0;\n\t\n\t    var visibleRoot = void 0,\n\t        tooltipTimer = void 0;\n\t\n\t    var nodeId = 0,\n\t        root = void 0;\n\t\n\t    var tree = void 0,\n\t        tooltip = void 0,\n\t        diagonal = void 0,\n\t        widthScale = void 0,\n\t        innerArc = void 0,\n\t        zoomListener = void 0,\n\t        svg = void 0;\n\t\n\t    function init() {\n\t        settings = _extends({}, DEFAULTS, options);\n\t        _treeviewNode2.default.settings = settings;\n\t\n\t        settings.width = settings.width - MARGIN.right - MARGIN.left;\n\t        settings.height = settings.height - MARGIN.top - MARGIN.bottom;\n\t\n\t        if (settings.enableTooltips) {\n\t            initTooltip();\n\t        }\n\t\n\t        if (settings.enableInnerArcs) {\n\t            initInnerArcs();\n\t        }\n\t\n\t        tree = d3.layout.tree().nodeSize([2, 10]).separation(function (a, b) {\n\t            var width = nodeSize(a) + nodeSize(b),\n\t                distance = width / 2 + 4;\n\t            return a.parent === b.parent ? distance : distance + 4;\n\t        });\n\t\n\t        diagonal = d3.svg.diagonal().projection(function (d) {\n\t            return [d.y, d.x];\n\t        });\n\t\n\t        widthScale = d3.scale.linear().range([settings.minNodeSize, settings.maxNodeSize]);\n\t\n\t        // define the zoomListener which calls the zoom function on the \"zoom\" event constrained within the scaleExtents\n\t        zoomListener = d3.behavior.zoom().scaleExtent([0.1, 3]).on(\"zoom\", function () {\n\t            svg.attr(\"transform\", \"translate(\" + d3.event.translate + \")scale(\" + d3.event.scale + \")\");\n\t        });\n\t\n\t        svg = d3.select(element).append(\"svg\").attr(\"version\", \"1.1\").attr(\"xmlns\", \"http://www.w3.org/2000/svg\").attr(\"viewBox\", \"0 0 \" + (settings.width + MARGIN.right + MARGIN.left) + \" \" + (settings.height + MARGIN.top + MARGIN.bottom)).attr(\"width\", settings.width + MARGIN.right + MARGIN.left).attr(\"height\", settings.height + MARGIN.top + MARGIN.bottom).call(zoomListener).append(\"g\").attr(\"transform\", \"translate(\" + MARGIN.left + \",\" + MARGIN.top + \")\").append(\"g\");\n\t\n\t        draw(_treeviewNode2.default.createNode(data));\n\t    }\n\t\n\t    function initTooltip() {\n\t        tooltip = d3.select(\"body\").append(\"div\").attr(\"id\", element.id + \"-tooltip\").attr(\"class\", \"tip\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"padding\", \"2px\").style(\"border\", \"1px solid #dddddd\").style(\"border-radius\", \"3px;\");\n\t    }\n\t\n\t    function initInnerArcs() {\n\t        var arcScale = d3.scale.linear().range([0, 2 * Math.PI]);\n\t\n\t        innerArc = d3.svg.arc().outerRadius(nodeSize).startAngle(0).endAngle(function (d) {\n\t            return arcScale(d.data.self_count / d.data.count) || 0;\n\t        });\n\t    }\n\t\n\t    function draw(data) {\n\t        var _this = this;\n\t\n\t        widthScale.domain([0, data.data.count]);\n\t\n\t        root = data;\n\t        root.x0 = settings.height / 2;\n\t        root.y0 = 0;\n\t\n\t        // set everything visible\n\t        root.setSelected(true);\n\t\n\t        root.children.forEach(function (d, i) {\n\t            d.color = d3.functor(settings.colors).call(_this, d, i);\n\t            d.setRecursiveProperty(\"color\", d.color);\n\t        });\n\t\n\t        if (settings.enableExpandOnClick) {\n\t            root.collapseAll();\n\t            root.expand();\n\t        } else {\n\t            root.expandAll();\n\t        }\n\t\n\t        update(root);\n\t        centerNode(root);\n\t    }\n\t\n\t    function update(source) {\n\t        // Compute the new tree layout.\n\t        var nodes = tree.nodes(root).reverse(),\n\t            links = tree.links(nodes);\n\t\n\t        // Normalize for fixed-depth.\n\t        nodes.forEach(function (d) {\n\t            d.y = d.depth * settings.nodeDistance;\n\t        });\n\t\n\t        // Update the nodes…\n\t        var node = svg.selectAll(\"g.node\").data(nodes, function (d) {\n\t            return d.id || (d.id = ++nodeId);\n\t        });\n\t\n\t        // Enter any new nodes at the parent's previous position.\n\t        var nodeEnter = node.enter().append(\"g\").attr(\"class\", \"node\").style(\"cursor\", \"pointer\").attr(\"transform\", function (d) {\n\t            return \"translate(\" + (source.y || 0) + \",\" + (source.x0 || 0) + \")\";\n\t        }).on(\"click\", click).on(\"mouseover\", tooltipIn).on(\"mouseout\", tooltipOut).on(\"contextmenu\", rightClick);\n\t\n\t        nodeEnter.append(\"circle\").attr(\"r\", 1e-6).style(\"stroke-width\", \"1.5px\").style(\"stroke\", settings.nodeStrokeColor).style(\"fill\", settings.nodeFillColor);\n\t\n\t        if (settings.enableInnerArcs) {\n\t            nodeEnter.append(\"path\").attr(\"d\", innerArc).style(\"fill\", settings.nodeStrokeColor).style(\"fill-opacity\", 0);\n\t        }\n\t\n\t        if (settings.enableLabels) {\n\t            nodeEnter.append(\"text\").attr(\"x\", function (d) {\n\t                return d.isLeaf() ? 10 : -10;\n\t            }).attr(\"dy\", \".35em\").attr(\"text-anchor\", function (d) {\n\t                return d.isLeaf() ? \"start\" : \"end\";\n\t            }).text(settings.getLabel).style(\"font\", \"10px sans-serif\").style(\"fill-opacity\", 1e-6);\n\t        }\n\t\n\t        // Transition nodes to their new position.\n\t        var nodeUpdate = node.transition().duration(DURATION).attr(\"transform\", function (d) {\n\t            return \"translate(\" + d.y + \",\" + d.x + \")\";\n\t        });\n\t\n\t        nodeUpdate.select(\"circle\").attr(\"r\", nodeSize).style(\"fill-opacity\", function (d) {\n\t            return d._children ? 1 : 0;\n\t        }).style(\"stroke\", settings.nodeStrokeColor).style(\"fill\", settings.nodeFillColor);\n\t\n\t        if (settings.enableLabels) {\n\t            nodeUpdate.select(\"text\").style(\"fill-opacity\", 1);\n\t        }\n\t\n\t        if (settings.enableInnerArcs) {\n\t            nodeUpdate.select(\"path\").duration(DURATION).attr(\"d\", innerArc).style(\"fill-opacity\", 0.8);\n\t        }\n\t\n\t        // Transition exiting nodes to the parent's new position.\n\t        var nodeExit = node.exit().transition().duration(DURATION).attr(\"transform\", function (d) {\n\t            return \"translate(\" + source.y + \",\" + source.x + \")\";\n\t        }).remove();\n\t\n\t        nodeExit.select(\"circle\").attr(\"r\", 1e-6);\n\t\n\t        nodeExit.select(\"path\").style(\"fill-opacity\", 1e-6);\n\t\n\t        nodeExit.select(\"text\").style(\"fill-opacity\", 1e-6);\n\t\n\t        // Update the links…\n\t        var link = svg.selectAll(\"path.link\").data(links, function (d) {\n\t            return d.target.id;\n\t        });\n\t\n\t        // Enter any new links at the parent's previous position.\n\t        link.enter().insert(\"path\", \"g\").attr(\"class\", \"link\").style(\"fill\", \"none\").style(\"stroke-opacity\", \"0.5\").style(\"stroke-linecap\", \"round\").style(\"stroke\", settings.linkStrokeColor).style(\"stroke-width\", 1e-6).attr(\"d\", function (d) {\n\t            var o = {\n\t                x: source.x0 || 0,\n\t                y: source.y0 || 0\n\t            };\n\t            return diagonal({\n\t                source: o,\n\t                target: o\n\t            });\n\t        });\n\t\n\t        // Transition links to their new position.\n\t        link.transition().duration(DURATION).attr(\"d\", diagonal).style(\"stroke\", settings.linkStrokeColor).style(\"stroke-width\", function (d) {\n\t            if (d.source.selected) {\n\t                return widthScale(d.target.data.count) + \"px\";\n\t            } else {\n\t                return \"4px\";\n\t            }\n\t        });\n\t\n\t        // Transition exiting nodes to the parent's new position.\n\t        link.exit().transition().duration(DURATION).style(\"stroke-width\", 1e-6).attr(\"d\", function (d) {\n\t            var o = {\n\t                x: source.x,\n\t                y: source.y\n\t            };\n\t            return diagonal({\n\t                source: o,\n\t                target: o\n\t            });\n\t        }).remove();\n\t\n\t        // Stash the old positions for transition.\n\t        nodes.forEach(function (d) {\n\t            var _ref = [d.x, d.y];\n\t            d.x0 = _ref[0];\n\t            d.y0 = _ref[1];\n\t        });\n\t    }\n\t\n\t    function nodeSize(d) {\n\t        if (d.selected) {\n\t            return widthScale(d.data.count) / 2;\n\t        } else {\n\t            return 2;\n\t        }\n\t    }\n\t\n\t    // Toggle children on click.\n\t    function click(d) {\n\t        if (!settings.enableExpandOnClick) {\n\t            return;\n\t        }\n\t\n\t        // check if click is triggered by panning on a node\n\t        if (d3.event.defaultPrevented) {\n\t            return;\n\t        }\n\t\n\t        if (d3.event.shiftKey) {\n\t            d.expandAll();\n\t        } else if (d.children) {\n\t            d.collapse();\n\t        } else {\n\t            d.expand();\n\t        }\n\t        update(d);\n\t        centerNode(d);\n\t    }\n\t\n\t    function rightClick(d) {\n\t        if (settings.enableRightClick) {\n\t            reroot(d);\n\t        }\n\t    }\n\t\n\t    // Sets the width of the right clicked node to 100%\n\t    function reroot(d) {\n\t        if (d === visibleRoot && d !== root) {\n\t            reroot(root);\n\t            return;\n\t        }\n\t        visibleRoot = d;\n\t\n\t        // set Selection properties\n\t        root.setSelected(false);\n\t        d.setSelected(true);\n\t\n\t        // scale the lines\n\t        widthScale.domain([0, d.data.count]);\n\t\n\t        d.expand();\n\t\n\t        // redraw\n\t        if (d3.event !== null) {\n\t            d3.event.preventDefault();\n\t        }\n\t        update(d);\n\t        centerNode(d);\n\t    }\n\t\n\t    // Center a node\n\t    function centerNode(source) {\n\t        var scale = zoomListener.scale(),\n\t            x = -source.y0,\n\t            y = -source.x0;\n\t\n\t        x = x * scale + settings.width / 4;\n\t        y = y * scale + settings.height / 2;\n\t        svg.transition().duration(DURATION).attr(\"transform\", \"translate(\" + x + \",\" + y + \")scale(\" + scale + \")\");\n\t        zoomListener.scale(scale);\n\t        zoomListener.translate([x, y]);\n\t    }\n\t\n\t    // tooltip functions\n\t    function tooltipIn(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.html(settings.getTooltip(d)).style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\");\n\t\n\t        tooltipTimer = setTimeout(function () {\n\t            tooltip.style(\"visibility\", \"visible\");\n\t        }, 1000);\n\t    }\n\t\n\t    function tooltipOut(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        clearTimeout(tooltipTimer);\n\t        tooltip.style(\"visibility\", \"hidden\");\n\t    }\n\t\n\t    /** ************ Default methods ***************/\n\t    // set fill color\n\t    function nodeFillColor(d) {\n\t        if (d.selected) {\n\t            return d._children ? d.color || \"#aaa\" : \"#fff\";\n\t        } else {\n\t            return \"#aaa\";\n\t        }\n\t    }\n\t\n\t    // set node stroke color\n\t    function nodeStrokeColor(d) {\n\t        if (d.selected) {\n\t            return d.color || \"#aaa\";\n\t        } else {\n\t            return \"#aaa\";\n\t        }\n\t    }\n\t\n\t    // set link stroke color\n\t    function linkStrokeColor(d) {\n\t        if (d.source.selected) {\n\t            return d.target.color;\n\t        } else {\n\t            return \"#aaa\";\n\t        }\n\t    }\n\t\n\t    function getTooltip(d) {\n\t        return \"<h3 class='tip-title'>\" + settings.getTooltipTitle(d) + \"</h3><p>\" + settings.getTooltipText(d) + \"</p>\";\n\t    }\n\t\n\t    /** ************* Public methods ***************/\n\t    that.reset = function reset() {\n\t        zoomListener.scale(1);\n\t        reroot(root);\n\t    };\n\t\n\t    // initialize the object\n\t    init();\n\t\n\t    // return the object\n\t    return that;\n\t}\n\t\n\tfunction Plugin(userData, option) {\n\t    return this.each(function () {\n\t        var $this = $(this);\n\t        var data = $this.data(\"vis.treeview\");\n\t        var options = $.extend({}, $this.data(), (typeof option === \"undefined\" ? \"undefined\" : _typeof(option)) === \"object\" && option);\n\t\n\t        if (!data) {\n\t            $this.data(\"vis.treeview\", data = new TreeView(this, userData, options));\n\t        }\n\t        if (typeof option === \"string\") {\n\t            data[option]();\n\t        }\n\t    });\n\t}\n\t\n\t$.fn.treeview = Plugin;\n\t$.fn.treeview.Constructor = TreeView;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Univis = function () {\n\t    function Univis() {\n\t        _classCallCheck(this, Univis);\n\t    }\n\t\n\t    _createClass(Univis, null, [{\n\t        key: \"stringHash\",\n\t\n\t\n\t        /**\n\t         * Hash function for strings from\n\t         * http://stackoverflow.com/a/15710692/865696\n\t         */\n\t        value: function stringHash(s) {\n\t            return s.split(\"\").reduce(function (a, b) {\n\t                var c = (a << 5) - a + b.charCodeAt(0);\n\t                return c & c;\n\t            }, 0);\n\t        }\n\t\n\t        /*\n\t         * Returns the readable text color based on the brightness of a given backgroud color\n\t         */\n\t\n\t    }, {\n\t        key: \"getReadableColorFor\",\n\t        value: function getReadableColorFor(color) {\n\t            var textColor = \"#000\";\n\t            try {\n\t                textColor = Univis.brightness(d3.rgb(color)) < 125 ? \"#eee\" : \"#000\";\n\t            } catch (err) {/* go on */}\n\t            return textColor;\n\t        }\n\t\n\t        /*\n\t         * Returns the brightness of an rgb-color\n\t         * from: http:// www.w3.org/WAI/ER/WD-AERT/#color-contrast\n\t         */\n\t\n\t    }, {\n\t        key: \"brightness\",\n\t        value: function brightness(rgb) {\n\t            return rgb.r * 0.299 + rgb.g * 0.587 + rgb.b * 0.114;\n\t        }\n\t    }, {\n\t        key: \"getTooltipTitle\",\n\t        value: function getTooltipTitle(d) {\n\t            return d.name;\n\t        }\n\t    }, {\n\t        key: \"getTooltipText\",\n\t        value: function getTooltipText(d) {\n\t            return d.data.count + \" hits\";\n\t        }\n\t    }]);\n\t\n\t    return Univis;\n\t}();\n\t\n\texports.default = Univis;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _node = __webpack_require__(4);\n\t\n\tvar _node2 = _interopRequireDefault(_node);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar TreeviewNode = function (_Node) {\n\t    _inherits(TreeviewNode, _Node);\n\t\n\t    function TreeviewNode() {\n\t        var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t        _classCallCheck(this, TreeviewNode);\n\t\n\t        var _this = _possibleConstructorReturn(this, (TreeviewNode.__proto__ || Object.getPrototypeOf(TreeviewNode)).call(this, node));\n\t\n\t        _this.settings = TreeviewNode.settings;\n\t        _this.setCount();\n\t        return _this;\n\t    }\n\t\n\t    _createClass(TreeviewNode, [{\n\t        key: \"setCount\",\n\t        value: function setCount() {\n\t            if (this.settings.countAccessor(this)) {\n\t                this.data.count = this.settings.countAccessor(this);\n\t            } else if (this.children) {\n\t                this.data.count = this.children.reduce(function (sum, c) {\n\t                    return sum + c.data.count;\n\t                }, 0);\n\t            } else {\n\t                this.data.count = 0;\n\t            }\n\t        }\n\t    }, {\n\t        key: \"setSelected\",\n\t        value: function setSelected(value) {\n\t            this.setRecursiveProperty(\"selected\", value);\n\t        }\n\t\n\t        // collapse everything\n\t\n\t    }, {\n\t        key: \"collapseAll\",\n\t        value: function collapseAll() {\n\t            if (this.children && this.children.length === 0) {\n\t                this.children = null;\n\t            }\n\t            if (this.children) {\n\t                this._children = this.children;\n\t                this._children.forEach(function (c) {\n\t                    c.collapseAll();\n\t                });\n\t                this.children = null;\n\t            }\n\t        }\n\t\n\t        // Collapses a node\n\t\n\t    }, {\n\t        key: \"collapse\",\n\t        value: function collapse() {\n\t            if (this.children) {\n\t                this._children = this.children;\n\t                this.children = null;\n\t            }\n\t        }\n\t    }, {\n\t        key: \"expandAll\",\n\t        value: function expandAll() {\n\t            this.expand(100);\n\t        }\n\t\n\t        // Expands a node and its children\n\t\n\t    }, {\n\t        key: \"expand\",\n\t        value: function expand() {\n\t            var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.settings.levelsToExpand;\n\t\n\t            if (i > 0) {\n\t                if (this._children) {\n\t                    this.children = this._children;\n\t                    this._children = null;\n\t                }\n\t                if (this.children) {\n\t                    this.children.forEach(function (c) {\n\t                        c.expand(i - 1);\n\t                    });\n\t                }\n\t            }\n\t        }\n\t    }], [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new TreeviewNode(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            return _node2.default.createNode(node, TreeviewNode.new);\n\t        }\n\t    }]);\n\t\n\t    return TreeviewNode;\n\t}(_node2.default);\n\t\n\texports.default = TreeviewNode;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Node = function () {\n\t    function Node() {\n\t        var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t        _classCallCheck(this, Node);\n\t\n\t        this.data = {};\n\t        _extends(this, node);\n\t    }\n\t\n\t    _createClass(Node, [{\n\t        key: \"setRecursiveProperty\",\n\t\n\t\n\t        // sets a property for a node and all its children\n\t        value: function setRecursiveProperty(property, value) {\n\t            this[property] = value;\n\t            if (this.children) {\n\t                this.children.forEach(function (c) {\n\t                    c.setRecursiveProperty(property, value);\n\t                });\n\t            } else if (this._children) {\n\t                this._children.forEach(function (c) {\n\t                    c.setRecursiveProperty(property, value);\n\t                });\n\t            }\n\t        }\n\t\n\t        // Returns true if a node is a leaf\n\t\n\t    }, {\n\t        key: \"isLeaf\",\n\t        value: function isLeaf() {\n\t            return !this.children && !this._children || this.children && this.children.length === 0 || this._children && this._children.length === 0;\n\t        }\n\t    }, {\n\t        key: \"getHeight\",\n\t        value: function getHeight() {\n\t            if (this._height === undefined) {\n\t                if (this.isLeaf()) {\n\t                    this._height = 0;\n\t                } else {\n\t                    this._height = d3.max(this.children, function (c) {\n\t                        return c.getHeight();\n\t                    }) + 1;\n\t                }\n\t            }\n\t            return this._height;\n\t        }\n\t    }, {\n\t        key: \"getDepth\",\n\t        value: function getDepth() {\n\t            if (this._depth === undefined) {\n\t                if (this.parent === undefined) {\n\t                    this._depth = 0;\n\t                } else {\n\t                    this._depth = this.parent.getDepth() + 1;\n\t                }\n\t            }\n\t            return this._depth;\n\t        }\n\t    }], [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new Node(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            var construct = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Node.new;\n\t\n\t            if (node.children) {\n\t                node.children = node.children.map(function (n) {\n\t                    return Node.createNode(n, construct);\n\t                });\n\t            }\n\t            return construct.call(null, node);\n\t        }\n\t    }]);\n\t\n\t    return Node;\n\t}();\n\t\n\texports.default = Node;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\n\t                                                                                                                                                                                                                                                                   * Interactive treemap\n\t                                                                                                                                                                                                                                                                   */\n\t\n\t\n\texports.default = TreeMap;\n\t\n\tvar _univis = __webpack_require__(2);\n\t\n\tvar _univis2 = _interopRequireDefault(_univis);\n\t\n\tvar _treemapNode = __webpack_require__(6);\n\t\n\tvar _treemapNode2 = _interopRequireDefault(_treemapNode);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction TreeMap(element, data) {\n\t    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var that = {};\n\t\n\t    var MARGIN = {\n\t        top: 0,\n\t        right: 0,\n\t        bottom: 0,\n\t        left: 0\n\t    },\n\t        DEFAULTS = {\n\t        height: 300,\n\t        width: 600,\n\t\n\t        className: \"unipept-treemap\",\n\t        levels: undefined,\n\t        getLevel: function getLevel(d) {\n\t            return d.getDepth();\n\t        },\n\t\n\t        countAccessor: function countAccessor(d) {\n\t            return d.data.self_count;\n\t        },\n\t        rerootCallback: undefined,\n\t\n\t        getBreadcrumbTooltip: function getBreadcrumbTooltip(d) {\n\t            return d.name;\n\t        },\n\t        colorRoot: \"#104B7D\",\n\t        colorLeaf: \"#fdffcc\",\n\t        colorBreadcrumbs: \"#FF8F00\",\n\t\n\t        labelHeight: 10,\n\t        getLabel: function getLabel(d) {\n\t            return d.name;\n\t        },\n\t\n\t        enableTooltips: true,\n\t        getTooltip: getTooltip,\n\t        getTooltipTitle: _univis2.default.getTooltipTitle,\n\t        getTooltipText: _univis2.default.getTooltipText\n\t    };\n\t\n\t    var settings = void 0;\n\t\n\t    var root = void 0,\n\t        nodeId = 0,\n\t        current = void 0,\n\t        treemapLayout = void 0,\n\t        breadcrumbs = void 0,\n\t        treemap = void 0,\n\t        tooltip = void 0,\n\t        colorScale = void 0;\n\t\n\t    /**\n\t     * Initializes Treemap\n\t     */\n\t    function init() {\n\t        settings = _extends({}, DEFAULTS, options);\n\t\n\t        root = _treemapNode2.default.createNode(data);\n\t\n\t        settings.width = settings.width - MARGIN.right - MARGIN.left;\n\t        settings.height = settings.height - MARGIN.top - MARGIN.bottom;\n\t\n\t        settings.levels = settings.levels || root.getHeight();\n\t\n\t        if (settings.enableTooltips) {\n\t            initTooltip();\n\t        }\n\t\n\t        initCSS();\n\t\n\t        // setup the visualisation\n\t        draw(root);\n\t        reroot(root, false);\n\t    }\n\t\n\t    function initTooltip() {\n\t        tooltip = d3.select(\"body\").append(\"div\").attr(\"id\", element.id + \"-tooltip\").attr(\"class\", \"tip\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"padding\", \"2px\").style(\"border\", \"1px solid #dddddd\").style(\"border-radius\", \"3px;\");\n\t    }\n\t\n\t    function initCSS() {\n\t        var elementClass = settings.className;\n\t        $(element).addClass(elementClass);\n\t        $(\"<style>\").prop(\"type\", \"text/css\").html(\"\\n                    .\" + elementClass + \" {\\n                        font-family: Roboto,'Helvetica Neue',Helvetica,Arial,sans-serif;\\n                    }\\n                    .\" + elementClass + \" .node {\\n                        font-size: 9px;\\n                        line-height: 10px;\\n                        overflow: hidden;\\n                        position: absolute;\\n                        text-indent: 2px;\\n                        text-align: center;\\n                        text-overflow: ellipsis;\\n                        cursor: pointer;\\n                    }\\n                    .\" + elementClass + \" .node:hover {\\n                        outline: 1px solid white;\\n                    }\\n                    .\" + elementClass + \" .breadcrumbs {\\n                        font-size: 11px;\\n                        line-height: 20px;\\n                        padding-left: 5px;\\n                        font-weight: bold;\\n                        color: white;\\n                        box-sizing: border-box;\\n                    }\\n                    .full-screen .\" + elementClass + \" .breadcrumbs {\\n                        width: 100% !important;\\n                    }\\n                    .\" + elementClass + \" .crumb {\\n                        cursor: pointer;\\n                    }\\n                    .\" + elementClass + \" .crumb .link:hover {\\n                        text-decoration: underline;\\n                    }\\n                    .\" + elementClass + \" .breadcrumbs .crumb + .crumb::before {\\n                        content: \\\" > \\\";\\n                        cursor: default;\\n                    }\\n                \").appendTo(\"head\");\n\t    }\n\t\n\t    function draw(data) {\n\t        $(element).empty();\n\t\n\t        treemapLayout = d3.layout.treemap().size([settings.width + 1, settings.height + 1]).padding([settings.labelHeight, 0, 0, 0]).value(settings.countAccessor);\n\t\n\t        colorScale = d3.scale.linear().domain([0, settings.levels]).range([settings.colorRoot, settings.colorLeaf]).interpolate(d3.interpolateLab);\n\t\n\t        breadcrumbs = d3.select(element).append(\"div\").attr(\"class\", \"breadcrumbs\").style(\"position\", \"relative\").style(\"width\", settings.width + \"px\").style(\"height\", \"20px\").style(\"background-color\", settings.colorBreadcrumbs);\n\t\n\t        treemap = d3.select(element).append(\"div\").style(\"position\", \"relative\").style(\"width\", settings.width + \"px\").style(\"height\", settings.height + \"px\").style(\"left\", MARGIN.left + \"px\").style(\"top\", MARGIN.top + \"px\");\n\t    }\n\t\n\t    function setBreadcrumbs() {\n\t        var crumbs = [];\n\t        var temp = current;\n\t        while (temp) {\n\t            crumbs.push(temp);\n\t            temp = temp.parent;\n\t        }\n\t        crumbs.reverse();\n\t        breadcrumbs.html(\"\");\n\t        breadcrumbs.selectAll(\".crumb\").data(crumbs).enter().append(\"span\").attr(\"class\", \"crumb\").attr(\"title\", settings.getBreadcrumbTooltip).html(function (d) {\n\t            return \"<span class='link'>\" + d.name + \"</span>\";\n\t        }).on(\"click\", function (d) {\n\t            reroot(d);\n\t        });\n\t    }\n\t\n\t    function reroot(data) {\n\t        var triggerCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t        current = data;\n\t\n\t        setBreadcrumbs();\n\t\n\t        var nodes = treemap.selectAll(\".node\").data(treemapLayout.nodes(data), function (d) {\n\t            return d.id || (d.id = ++nodeId);\n\t        });\n\t\n\t        nodes.enter().append(\"div\").attr(\"class\", \"node\").style(\"background\", function (d) {\n\t            return colorScale(settings.getLevel(d));\n\t        }).style(\"color\", function (d) {\n\t            return _univis2.default.getReadableColorFor(colorScale(settings.getLevel(d)));\n\t        }).style(\"left\", \"0px\").style(\"top\", \"0px\").style(\"width\", \"0px\").style(\"height\", \"0px\").text(settings.getLabel).on(\"click\", function (d) {\n\t            reroot(d);\n\t        }).on(\"contextmenu\", function (d) {\n\t            d3.event.preventDefault();\n\t            if (current.parent) {\n\t                reroot(current.parent);\n\t            }\n\t        }).on(\"mouseover\", tooltipIn).on(\"mousemove\", tooltipMove).on(\"mouseout\", tooltipOut);\n\t\n\t        nodes.order().transition().call(position);\n\t\n\t        nodes.exit().remove();\n\t\n\t        if (triggerCallback && settings.rerootCallback) {\n\t            settings.rerootCallback.call(null, current);\n\t        }\n\t    }\n\t\n\t    function update() {\n\t        var nodes = treemap.selectAll(\".node\").data(treemapLayout.nodes(data), function (d) {\n\t            return d.id;\n\t        }).order().transition().call(position);\n\t    }\n\t\n\t    /**\n\t     * sets the position of a square\n\t     */\n\t    function position() {\n\t        this.style(\"left\", function (d) {\n\t            return d.x + \"px\";\n\t        }).style(\"top\", function (d) {\n\t            return d.y + \"px\";\n\t        }).style(\"width\", function (d) {\n\t            return Math.max(0, d.dx - 1) + \"px\";\n\t        }).style(\"height\", function (d) {\n\t            return Math.max(0, d.dy - 1) + \"px\";\n\t        });\n\t    }\n\t\n\t    /**\n\t     * Resizes the treemap for a given width and height\n\t     */\n\t    function resize(width, height) {\n\t        treemapLayout = d3.layout.treemap().size([width + 1, height + 1]).padding([10, 0, 0, 0]).value(settings.countAccessor);\n\t        update();\n\t    }\n\t\n\t    // tooltip functions\n\t    function tooltipIn(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.html(settings.getTooltip(d)).style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\").style(\"visibility\", \"visible\");\n\t    }\n\t\n\t    function tooltipOut(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.style(\"visibility\", \"hidden\");\n\t    }\n\t\n\t    function tooltipMove(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\");\n\t    }\n\t\n\t    function getTooltip(d) {\n\t        return \"<h3 class='tip-title'>\" + settings.getTooltipTitle(d) + \"</h3><p>\" + settings.getTooltipText(d) + \"</p>\";\n\t    }\n\t\n\t    /** ************* Public methods ***************/\n\t    /**\n\t     * Resets the treemap to its initial position\n\t     */\n\t    that.reset = function reset() {\n\t        reroot(root);\n\t    };\n\t\n\t    /**\n\t     * Sets the visualisation in full screen mode\n\t     *\n\t     * @param <boolean> isFullScreen indicates if we're in full screen mode\n\t     */\n\t    that.setFullScreen = function setFullScreen(isFullScreen) {\n\t        // the delay is because the event fires before we're in fullscreen\n\t        // so the height en width functions don't give a correct result\n\t        // without the delay\n\t        setTimeout(function () {\n\t            var _ref = [settings.width, settings.height],\n\t                w = _ref[0],\n\t                h = _ref[1];\n\t\n\t            if (isFullScreen) {\n\t                w = $(window).width();\n\t                h = $(window).height() - 44;\n\t            }\n\t            resize(w, h);\n\t        }, 1000);\n\t    };\n\t\n\t    // initialize the object\n\t    init();\n\t\n\t    return that;\n\t}\n\t\n\tfunction Plugin(userData, option) {\n\t    return this.each(function () {\n\t        var $this = $(this);\n\t        var data = $this.data(\"vis.treemap\");\n\t        var options = $.extend({}, $this.data(), (typeof option === \"undefined\" ? \"undefined\" : _typeof(option)) === \"object\" && option);\n\t\n\t        if (!data) {\n\t            $this.data(\"vis.treemap\", data = new TreeMap(this, userData, options));\n\t        }\n\t        if (typeof option === \"string\") {\n\t            data[option]();\n\t        }\n\t    });\n\t}\n\t\n\t$.fn.treemap = Plugin;\n\t$.fn.treemap.Constructor = TreeMap;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _node = __webpack_require__(4);\n\t\n\tvar _node2 = _interopRequireDefault(_node);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar TreemapNode = function (_Node) {\n\t    _inherits(TreemapNode, _Node);\n\t\n\t    function TreemapNode() {\n\t        _classCallCheck(this, TreemapNode);\n\t\n\t        return _possibleConstructorReturn(this, (TreemapNode.__proto__ || Object.getPrototypeOf(TreemapNode)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(TreemapNode, null, [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new TreemapNode(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            return _node2.default.createNode(node, TreemapNode.new);\n\t        }\n\t    }]);\n\t\n\t    return TreemapNode;\n\t}(_node2.default);\n\t\n\texports.default = TreemapNode;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\n\t                                                                                                                                                                                                                                                                   * Interactive Sunburst\n\t                                                                                                                                                                                                                                                                   */\n\t\n\t\n\texports.default = Sunburst;\n\t\n\tvar _univis = __webpack_require__(2);\n\t\n\tvar _univis2 = _interopRequireDefault(_univis);\n\t\n\tvar _sunburstNode = __webpack_require__(8);\n\t\n\tvar _sunburstNode2 = _interopRequireDefault(_sunburstNode);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction Sunburst(element, data) {\n\t    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var that = {};\n\t\n\t    var MARGIN = {\n\t        top: 0,\n\t        right: 0,\n\t        bottom: 0,\n\t        left: 0\n\t    },\n\t        COLORS = [\"#f9f0ab\", \"#e8e596\", \"#f0e2a3\", \"#ede487\", \"#efd580\", \"#f1cb82\", \"#f1c298\", \"#e8b598\", \"#d5dda1\", \"#c9d2b5\", \"#aec1ad\", \"#a7b8a8\", \"#b49a3d\", \"#b28647\", \"#a97d32\", \"#b68334\", \"#d6a680\", \"#dfad70\", \"#a2765d\", \"#9f6652\", \"#b9763f\", \"#bf6e5d\", \"#af643c\", \"#9b4c3f\", \"#72659d\", \"#8a6e9e\", \"#8f5c85\", \"#934b8b\", \"#9d4e87\", \"#92538c\", \"#8b6397\", \"#716084\", \"#2e6093\", \"#3a5988\", \"#4a5072\", \"#393e64\", \"#aaa1cc\", \"#e0b5c9\", \"#e098b0\", \"#ee82a2\", \"#ef91ac\", \"#eda994\", \"#eeb798\", \"#ecc099\", \"#f6d5aa\", \"#f0d48a\", \"#efd95f\", \"#eee469\", \"#dbdc7f\", \"#dfd961\", \"#ebe378\", \"#f5e351\"],\n\t        FIXED_COLORS = [\"#1f77b4\", \"#aec7e8\", \"#ff7f0e\", \"#ffbb78\", \"#2ca02c\", \"#98df8a\", \"#d62728\", \"#ff9896\", \"#9467bd\", \"#c5b0d5\", \"#8c564b\", \"#c49c94\", \"#e377c2\", \"#f7b6d2\", \"#7f7f7f\", \"#c7c7c7\", \"#bcbd22\", \"#dbdb8d\", \"#17becf\", \"#9edae5\", \"#393b79\", \"#5254a3\", \"#6b6ecf\", \"#9c9ede\", \"#637939\", \"#8ca252\", \"#b5cf6b\", \"#cedb9c\", \"#8c6d31\", \"#bd9e39\", \"#e7ba52\", \"#e7cb94\", \"#843c39\", \"#ad494a\", \"#d6616b\", \"#e7969c\", \"#7b4173\", \"#a55194\", \"#ce6dbd\", \"#de9ed6\", \"#3182bd\", \"#6baed6\", \"#9ecae1\", \"#c6dbef\", \"#e6550d\", \"#fd8d3c\", \"#fdae6b\", \"#fdd0a2\", \"#31a354\", \"#74c476\", \"#a1d99b\", \"#c7e9c0\", \"#756bb1\", \"#9e9ac8\", \"#bcbddc\", \"#dadaeb\", \"#636363\", \"#969696\", \"#bdbdbd\", \"#d9d9d9\"],\n\t        DEFAULTS = {\n\t        height: 600,\n\t        width: 600,\n\t        breadcrumbWidth: 200,\n\t        radius: 300,\n\t\n\t        className: \"unipept-sunburst\",\n\t        levels: 4,\n\t        getLevel: function getLevel(d) {\n\t            return d.getDepth();\n\t        },\n\t\n\t        duration: 1000,\n\t        colors: COLORS,\n\t        fixedColors: FIXED_COLORS,\n\t        useFixedColors: false,\n\t\n\t        countAccessor: function countAccessor(d) {\n\t            return d.data.self_count;\n\t        },\n\t        rerootCallback: undefined,\n\t\n\t        labelHeight: 10,\n\t        getLabel: function getLabel(d) {\n\t            return d.name;\n\t        },\n\t\n\t        enableTooltips: true,\n\t        getTooltip: getTooltip,\n\t        getTooltipTitle: _univis2.default.getTooltipTitle,\n\t        getTooltipText: _univis2.default.getTooltipText\n\t    };\n\t\n\t    var settings = void 0;\n\t\n\t    var colorCounter = -1;\n\t\n\t    // components\n\t    var tooltip = void 0,\n\t        breadcrumbs = void 0,\n\t        path = void 0,\n\t        // the arcs\n\t    x = void 0,\n\t        // the x-scale\n\t    y = void 0,\n\t        // the y-scale\n\t    arc = void 0,\n\t        // the arc function\n\t    text = void 0,\n\t        // all text nodes\n\t    currentMaxLevel = void 0;\n\t\n\t    /** ************* Private methods ***************/\n\t\n\t    /**\n\t     * Initializes Sunburst\n\t     */\n\t    function init() {\n\t        settings = _extends({}, DEFAULTS, options);\n\t\n\t        settings.width = settings.width - MARGIN.right - MARGIN.left;\n\t        settings.height = settings.height - MARGIN.top - MARGIN.bottom;\n\t\n\t        // prepare data\n\t        data.children = addEmptyChildren(data.children, data.data.self_count);\n\t\n\t        if (settings.enableTooltips) {\n\t            initTooltip();\n\t        }\n\t\n\t        initCSS();\n\t\n\t        // draw everything\n\t        redraw();\n\t\n\t        // fake click on the center node\n\t        setTimeout(that.reset, 1000);\n\t    }\n\t\n\t    function initTooltip() {\n\t        tooltip = d3.select(\"body\").append(\"div\").attr(\"id\", element.id + \"-tooltip\").attr(\"class\", \"tip\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"padding\", \"2px\").style(\"border\", \"1px solid #dddddd\").style(\"border-radius\", \"3px;\");\n\t    }\n\t\n\t    function initCSS() {\n\t        var elementClass = settings.className;\n\t        $(element).addClass(elementClass);\n\t        $(\"<style>\").prop(\"type\", \"text/css\").html(\"\\n.\" + elementClass + \" {\\n    font-family: Roboto,'Helvetica Neue',Helvetica,Arial,sans-serif;\\n    width: \" + (settings.width + settings.breadcrumbWidth) + \"px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs {\\n    width: 176px;\\n    float: right;\\n    margin-top: 10px;\\n    padding-left: 5px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs ul {\\n    padding-left: 0;\\n    list-style: none;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb {\\n    margin-bottom: 5px;\\n    cursor: pointer;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb svg {\\n    float: left;\\n    margin-right: 3px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb p {\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    margin: 0;\\n    font-size: 14px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb .percentage {\\n    font-size: 11px;\\n}\").appendTo(\"head\");\n\t    }\n\t\n\t    /**\n\t     * Adds data for the peptides on the self level\n\t     * Is called recursively\n\t     *\n\t     * @param <Array> children A list of children\n\t     * @param <int> count The number of peptides that should be the sum of the\n\t     *          children count\n\t     * @return <Array> The modified list of children\n\t     */\n\t    function addEmptyChildren(children, count) {\n\t        var i = void 0;\n\t        for (i = 0; i < children.length; i++) {\n\t            if (typeof children[i].children !== \"undefined\") {\n\t                children[i].children = addEmptyChildren(children[i].children, children[i].data.self_count);\n\t            }\n\t        }\n\t        if (children.length > 0 && count !== 0 && count !== undefined) {\n\t            children.push({\n\t                id: -1,\n\t                name: \"empty\",\n\t                data: {\n\t                    count: count,\n\t                    self_count: count\n\t                }\n\t            });\n\t        }\n\t        return children;\n\t    }\n\t\n\t    /**\n\t     * Redraws the pancore graph\n\t     */\n\t    function redraw() {\n\t        var vis = void 0,\n\t            // the visualisation\n\t        partition = void 0,\n\t            // the partition layout\n\t        nodes = void 0,\n\t            // the result of the partition layout\n\t        textEnter = void 0; // new text nodes\n\t\n\t        // clear everything\n\t        $(element).empty();\n\t\n\t        breadcrumbs = d3.select(element).append(\"div\").attr(\"id\", element.id + \"-breadcrumbs\").attr(\"class\", \"sunburst-breadcrumbs\").append(\"ul\");\n\t\n\t        x = d3.scale.linear().range([0, 2 * Math.PI]); // use full circle\n\t        y = d3.scale.linear().domain([0, 1]).range([0, settings.radius]);\n\t        currentMaxLevel = 4;\n\t\n\t        vis = d3.select(element).append(\"svg\").attr(\"version\", \"1.1\").attr(\"xmlns\", \"http://www.w3.org/2000/svg\").attr(\"viewBox\", \"0 0 \" + (settings.width + MARGIN.right + MARGIN.left) + \" \" + (settings.height + MARGIN.top + MARGIN.bottom)).attr(\"width\", settings.width + MARGIN.right + MARGIN.left).attr(\"height\", settings.height + MARGIN.top + MARGIN.bottom).attr(\"overflow\", \"hidden\").style(\"font-family\", \"'Helvetica Neue', Helvetica, Arial, sans-serif\");\n\t        vis.append(\"style\").attr(\"type\", \"text/css\").html(\".hidden{ visibility: hidden;}\");\n\t        vis = vis.append(\"g\").attr(\"transform\", \"translate(\" + settings.radius + \",\" + settings.radius + \")\"); // set origin to radius center\n\t\n\t        partition = d3.layout.partition() // creates a new partition layout\n\t        .sort(null) // don't sort,  use tree traversal order\n\t        .value(function (d) {\n\t            return d.data.self_count;\n\t        }); // set the size of the pieces\n\t\n\t        // calculate arcs out of partition coordinates\n\t        arc = d3.svg.arc().startAngle(function (d) {\n\t            return Math.max(0, Math.min(2 * Math.PI, x(d.x)));\n\t        }).endAngle(function (d) {\n\t            return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));\n\t        })\n\t        // prevent y-calculation on 0\n\t        .innerRadius(function (d) {\n\t            return Math.max(0, d.y ? y(d.y) : d.y);\n\t        }).outerRadius(function (d) {\n\t            return Math.max(0, y(d.y + d.dy)) + 1;\n\t        });\n\t\n\t        // run the partition layout\n\t        nodes = partition.nodes(data);\n\t\n\t        path = vis.selectAll(\"path\").data(nodes);\n\t        path.enter().append(\"path\") // for every node, draw an arc\n\t        .attr(\"class\", \"arc\").attr(\"id\", function (d, i) {\n\t            return \"path-\" + i;\n\t        }) // id based on index\n\t        .attr(\"d\", arc) // path data\n\t        .attr(\"fill-rule\", \"evenodd\") // fill rule\n\t        .style(\"fill\", colour) // call function for colour\n\t        .on(\"click\", function (d) {\n\t            if (d.depth < currentMaxLevel) {\n\t                click(d);\n\t            }\n\t        }) // call function on click\n\t        .on(\"mouseover\", tooltipIn).on(\"mousemove\", tooltipMove).on(\"mouseout\", tooltipOut);\n\t\n\t        // put labels on the nodes\n\t        text = vis.selectAll(\"text\").data(nodes);\n\t\n\t        textEnter = text.enter().append(\"text\").style(\"fill\", function (d) {\n\t            return _univis2.default.getReadableColorFor(colour(d));\n\t        }).style(\"fill-opacity\", 0).style(\"font-family\", \"font-family: Helvetica, 'Super Sans', sans-serif\").style(\"pointer-events\", \"none\") // don't invoke mouse events\n\t        .attr(\"dy\", \".2em\");\n\t\n\t        textEnter.append(\"tspan\").attr(\"x\", 0).text(function (d) {\n\t            return d.depth && d.name !== \"empty\" ? d.name.split(\" \")[0] : \"\";\n\t        });\n\t\n\t        textEnter.append(\"tspan\").attr(\"x\", 0).attr(\"dy\", \"1em\").text(function (d) {\n\t            return d.depth && d.name !== \"empty\" ? d.name.split(\" \")[1] || \"\" : \"\";\n\t        });\n\t\n\t        textEnter.append(\"tspan\").attr(\"x\", 0).attr(\"dy\", \"1em\").text(function (d) {\n\t            return d.depth && d.name !== \"empty\" ? d.name.split(\" \")[2] || \"\" : \"\";\n\t        });\n\t\n\t        textEnter.style(\"font-size\", function (d) {\n\t            return Math.min(settings.radius / settings.levels / this.getComputedTextLength() * 10 + 1, 12) + \"px\";\n\t        });\n\t    }\n\t\n\t    /**\n\t     *  Interpolate the scales!\n\t     * Defines new scales based on the clicked item\n\t     *\n\t     * @param <Object> d The clicked item\n\t     * @return <Scale> new scales\n\t     */\n\t    function arcTween(d) {\n\t        var my = Math.min(maxY(d), d.y + settings.levels * d.dy),\n\t            xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),\n\t            yd = d3.interpolate(y.domain(), [d.y, my]),\n\t            yr = d3.interpolate(y.range(), [d.y ? 20 : 0, settings.radius]);\n\t        return function (d) {\n\t            return function (t) {\n\t                x.domain(xd(t));\n\t                y.domain(yd(t)).range(yr(t));\n\t                return arc(d);\n\t            };\n\t        };\n\t    }\n\t\n\t    /**\n\t     * calculate the max-y of the clicked item\n\t     *\n\t     * @param <Object> d The clicked item\n\t     * @return <Number> The maximal y-value\n\t     */\n\t    function maxY(d) {\n\t        return d.children ? Math.max.apply(Math, _toConsumableArray(d.children.map(maxY))) : d.y + d.dy;\n\t    }\n\t\n\t    function setBreadcrumbs(d) {\n\t        // breadcrumbs\n\t        var crumbs = [];\n\t        var temp = d;\n\t        while (temp) {\n\t            crumbs.push(temp);\n\t            temp = temp.parent;\n\t        }\n\t        crumbs.reverse().shift();\n\t        var breadArc = d3.svg.arc().innerRadius(0).outerRadius(15).startAngle(0).endAngle(function (d) {\n\t            return 2 * Math.PI * d.data.count / d.parent.data.count;\n\t        });\n\t        var bc = breadcrumbs.selectAll(\".crumb\").data(crumbs);\n\t        bc.enter().append(\"li\").on(\"click\", function (d) {\n\t            click(d.parent);\n\t        }).attr(\"class\", \"crumb\").style(\"opacity\", \"0\").attr(\"title\", function (d) {\n\t            return \"[\" + d.data.rank + \"] \" + d.name;\n\t        }).html(function (d) {\n\t            return \"\\n<p class='name'>\" + d.name + \"</p>\\n<p class='percentage'>\" + Math.round(100 * d.data.count / d.parent.data.count) + \"% of \" + d.parent.name + \"</p>\";\n\t        }).insert(\"svg\", \":first-child\").attr(\"width\", 30).attr(\"height\", 30).append(\"path\").attr(\"d\", breadArc).attr(\"transform\", \"translate(15, 15)\").attr(\"fill\", colour);\n\t        bc.transition().duration(settings.duration).style(\"opacity\", \"1\");\n\t        bc.exit().transition().duration(settings.duration).style(\"opacity\", \"0\").remove();\n\t    }\n\t\n\t    /**\n\t     * Defines what happens after a node is clicked\n\t     *\n\t     * @param <Object> d The data object of the clicked arc\n\t     */\n\t    function click(d) {\n\t        var _this = this;\n\t\n\t        if (d.name === \"empty\") {\n\t            return;\n\t        }\n\t\n\t        setBreadcrumbs(d);\n\t\n\t        if (settings.rerootCallback) {\n\t            settings.rerootCallback.call(null, d);\n\t        }\n\t\n\t        // perform animation\n\t        currentMaxLevel = d.depth + settings.levels;\n\t        path.transition().duration(settings.duration).attrTween(\"d\", arcTween(d)).attr(\"class\", function (d) {\n\t            return d.depth >= currentMaxLevel ? \"arc toHide\" : \"arc\";\n\t        }).attr(\"fill-opacity\", function (d) {\n\t            return d.depth >= currentMaxLevel ? 0.2 : 1;\n\t        });\n\t\n\t        // Somewhat of a hack as we rely on arcTween updating the scales.\n\t        text.style(\"visibility\", function (e) {\n\t            return isParentOf(d, e) ? null : d3.select(this).style(\"visibility\");\n\t        }).transition().duration(settings.duration).attrTween(\"text-anchor\", function (d) {\n\t            return function () {\n\t                return x(d.x + d.dx / 2) > Math.PI ? \"end\" : \"start\";\n\t            };\n\t        }).attrTween(\"transform\", function (d) {\n\t            var multiline = (d.name || \"\").split(\" \").length > 1;\n\t            return function () {\n\t                var angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90,\n\t                    rotate = angle + (multiline ? -0.5 : 0);\n\t                return \"rotate(\" + rotate + \")translate(\" + y(d.y) + \")rotate(\" + (angle > 90 ? -180 : 0) + \")\";\n\t            };\n\t        }).style(\"fill-opacity\", function (e) {\n\t            return isParentOf(d, e) ? 1 : 1e-6;\n\t        }).each(\"end\", function (e) {\n\t            d3.select(_this).style(\"visibility\", isParentOf(d, e) ? null : \"hidden\");\n\t        });\n\t    }\n\t\n\t    /**\n\t     * Calculates if p is a parent of c\n\t     * Returns true is label must be drawn\n\t     */\n\t    function isParentOf(p, c) {\n\t        if (c.depth >= currentMaxLevel) {\n\t            return false;\n\t        }\n\t        if (p === c) {\n\t            return true;\n\t        }\n\t        if (p.children) {\n\t            return p.children.some(function (d) {\n\t                return isParentOf(d, c);\n\t            });\n\t        }\n\t        return false;\n\t    }\n\t\n\t    /**\n\t     * Calculates the color of an arc based on the color of his children\n\t     *\n\t     * @param <Object> d The node for which we want the color\n\t     * @return <Color> The calculated color\n\t     */\n\t    function colour(d) {\n\t        if (d.name === \"empty\") {\n\t            return \"white\";\n\t        }\n\t        if (settings.useFixedColors) {\n\t            return settings.fixedColors[Math.abs(_univis2.default.stringHash(d.name + \" \" + d.data.rank)) % settings.fixedColors.length];\n\t        } else {\n\t            if (d.children) {\n\t                var colours = d.children.map(colour),\n\t                    a = d3.hsl(colours[0]),\n\t                    b = d3.hsl(colours[1]),\n\t                    singleChild = d.children.length === 1 || d.children[1].name === \"empty\";\n\t                // if we only have one child, return a slightly darker variant of the child color\n\t                if (singleChild) {\n\t                    return d3.hsl(a.h, a.s, a.l * 0.98);\n\t                }\n\t                // if we have 2 children or more, take the average of the first two children\n\t                return d3.hsl((a.h + b.h) / 2, (a.s + b.s) / 2, (a.l + b.l) / 2);\n\t            }\n\t            // if we don't have children, pick a new color\n\t            if (!d.color) {\n\t                d.color = getColor();\n\t            }\n\t            return d.color;\n\t        }\n\t    }\n\t\n\t    /**\n\t     * color generation function\n\t     * iterates over fixed list of colors\n\t     *\n\t     * @return <Color> The generated color\n\t     */\n\t    function getColor() {\n\t        colorCounter = (colorCounter + 1) % settings.colors.length;\n\t        return settings.colors[colorCounter];\n\t    }\n\t\n\t    // tooltip functions\n\t    function tooltipIn(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        if (d.depth < currentMaxLevel && d.name !== \"empty\") {\n\t            tooltip.html(settings.getTooltip(d)).style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\").style(\"visibility\", \"visible\");\n\t        }\n\t    }\n\t\n\t    function tooltipOut(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.style(\"visibility\", \"hidden\");\n\t    }\n\t\n\t    function tooltipMove(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\");\n\t    }\n\t\n\t    function getTooltip(d) {\n\t        return \"<h3 class='tip-title'>\" + settings.getTooltipTitle(d) + \"</h3><p>\" + settings.getTooltipText(d) + \"</p>\";\n\t    }\n\t\n\t    /** ************* Public methods ***************/\n\t\n\t    /**\n\t     * Resets the sunburst to its initial position\n\t     */\n\t    that.reset = function reset() {\n\t        click(data);\n\t    };\n\t\n\t    /**\n\t     * redraws the colors of the sunburst\n\t     */\n\t    that.redrawColors = function redrawColors() {\n\t        d3.selectAll(\".crumb path\").transition().style(\"fill\", colour);\n\t        path.transition().style(\"fill\", colour);\n\t        text.transition().style(\"fill\", function (d) {\n\t            return _univis2.default.getReadableColorFor(colour(d));\n\t        });\n\t    };\n\t\n\t    /**\n\t     * Sets the visualisation in full screen mode\n\t     *\n\t     * @param <boolean> isFullScreen indicates if we're in full screen mode\n\t     */\n\t    that.setFullScreen = function setFullScreen(isFullScreen) {\n\t        // the delay is because the event fires before we're in fullscreen\n\t        // so the height en width functions don't give a correct result\n\t        // without the delay\n\t        setTimeout(function () {\n\t            var size = 740;\n\t            if (isFullScreen) {\n\t                size = Math.min($(window).height() - 44, $(window).width() - 250);\n\t            }\n\t            $(element).children(\"svg\").attr(\"width\", size).attr(\"height\", size);\n\t        }, 1000);\n\t    };\n\t\n\t    // initialize the object\n\t    init();\n\t\n\t    return that;\n\t}\n\t\n\tfunction Plugin(userData, option) {\n\t    return this.each(function () {\n\t        var $this = $(this);\n\t        var data = $this.data(\"vis.sunburst\");\n\t        var options = $.extend({}, $this.data(), (typeof option === \"undefined\" ? \"undefined\" : _typeof(option)) === \"object\" && option);\n\t\n\t        if (!data) {\n\t            $this.data(\"vis.sunburst\", data = new Sunburst(this, userData, options));\n\t        }\n\t        if (typeof option === \"string\") {\n\t            data[option]();\n\t        }\n\t    });\n\t}\n\t\n\t$.fn.sunburst = Plugin;\n\t$.fn.sunburst.Constructor = Sunburst;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _node = __webpack_require__(4);\n\t\n\tvar _node2 = _interopRequireDefault(_node);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar SunburstNode = function (_Node) {\n\t    _inherits(SunburstNode, _Node);\n\t\n\t    function SunburstNode() {\n\t        _classCallCheck(this, SunburstNode);\n\t\n\t        return _possibleConstructorReturn(this, (SunburstNode.__proto__ || Object.getPrototypeOf(SunburstNode)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(SunburstNode, null, [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new SunburstNode(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            return _node2.default.createNode(node, SunburstNode.new);\n\t        }\n\t    }]);\n\t\n\t    return SunburstNode;\n\t}(_node2.default);\n\t\n\texports.default = SunburstNode;\n\n/***/ }\n/******/ ]);\n//# sourceMappingURL=unipept-visualizations.js.map"]}