{"version":3,"sources":["unipept-visualizations.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","id","loaded","call","m","c","p","_treeview","_treeview2","_interopRequireDefault","_treemap","_treemap2","_sunburst","_sunburst2","obj","__esModule","default","Object","defineProperty","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","TreeView","_univis","_univis2","_maxcountheap","_maxcountheap2","_treeviewNode","_treeviewNode2","element","data","options","undefined","that","MARGIN","top","right","bottom","left","DURATION","COLOR_SCALE","d3","scale","category10","DEFAULTS","height","width","nodeDistance","levelsToExpand","minNodeSize","maxNodeSize","countAccessor","d","count","rerootCallback","colors","name","nodeFillColor","nodeStrokeColor","linkStrokeColor","enableInnerArcs","enableExpandOnClick","enableRightClick","enableLabels","getLabel","enableTooltips","getTooltip","getTooltipTitle","getTooltipText","enableAutoExpand","settings","visibleRoot","tooltipTimer","nodeId","root","tree","tooltip","diagonal","widthScale","innerArc","zoomListener","svg","init","initTooltip","initInnerArcs","layout","nodeSize","separation","a","b","distance","parent","projection","y","x","linear","range","behavior","zoom","scaleExtent","on","attr","event","translate","select","append","style","draw","createNode","arcScale","Math","PI","arc","outerRadius","startAngle","endAngle","self_count","_this","domain","x0","y0","setSelected","children","forEach","color","functor","setRecursiveProperty","collapseAll","initialExpand","expandAll","update","centerNode","expand","allowedCount","Number","isFinite","pq","size","toExpand","remove","add","nodes","reverse","links","depth","node","selectAll","nodeEnter","enter","click","tooltipIn","tooltipOut","rightClick","isLeaf","text","nodeUpdate","transition","duration","_children","nodeExit","exit","link","insert","o","selected","_ref","defaultPrevented","shiftKey","collapse","reroot","preventDefault","html","pageY","pageX","setTimeout","clearTimeout","reset","setFullScreen","isFullScreen","_ref2","w","h","$","window","getRoot","fn","treeview","get","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","Univis","stringHash","s","split","reduce","charCodeAt","getReadableColorFor","textColor","brightness","rgb","err","r","g","comp","heapify","floor","sink","bubbleUp","index","parentIndex","targetIndex","MaxCountHeap","iterable","_data","Array","from","item","push","peek","output","pop","clear","_node","_node2","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","TreeviewNode","_Node","getPrototypeOf","setCount","sum","_new","new","Node","property","getHeight","_height","max","getDepth","_depth","construct","map","n","TreeMap","_treemapNode","_treemapNode2","className","levels","getLevel","getBreadcrumbTooltip","colorRoot","colorLeaf","colorBreadcrumbs","labelHeight","current","treemapLayout","breadcrumbs","treemap","colorScale","initCSS","elementClass","addClass","prop","appendTo","empty","padding","interpolate","interpolateLab","setBreadcrumbs","crumbs","temp","triggerCallback","tooltipMove","order","position","dx","dy","resize","TreemapNode","apply","_sunburstNode","_sunburstNode2","_toConsumableArray","arr","isArray","arr2","Sunburst","colorCounter","addEmptyChildren","redraw","breadcrumbWidth","_this2","radius","currentMaxLevel","vis","partition","sort","min","innerRadius","path","colour","getComputedTextLength","arcTween","my","maxY","xd","yd","yr","t","_this3","shift","breadArc","bc","getTitleText","round","_this4","enableBreadcrumbs","attrTween","e","isParentOf","angle","each","useFixedColors","fixedColors","abs","rank","colours","hsl","singleChild","l","getColor","redrawColors","_this5","_this6","_this7","COLORS","FIXED_COLORS","ml","some","sunburst","SunburstNode"],"mappings":"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","file":"unipept-visualizations.es5.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _treeview = __webpack_require__(1);\n\t\n\tvar _treeview2 = _interopRequireDefault(_treeview);\n\t\n\tvar _treemap = __webpack_require__(6);\n\t\n\tvar _treemap2 = _interopRequireDefault(_treemap);\n\t\n\tvar _sunburst = __webpack_require__(8);\n\t\n\tvar _sunburst2 = _interopRequireDefault(_sunburst);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\n\t                                                                                                                                                                                                                                                                   * Zoomable treeview, inspiration from\n\t                                                                                                                                                                                                                                                                   * - http://bl.ocks.org/mbostock/4339083\n\t                                                                                                                                                                                                                                                                   * - https://gist.github.com/robschmuecker/7880033\n\t                                                                                                                                                                                                                                                                   * - http://www.brightpointinc.com/interactive/budget/index.html?source=d3js\n\t                                                                                                                                                                                                                                                                   */\n\t\n\t\n\texports.default = TreeView;\n\t\n\tvar _univis = __webpack_require__(2);\n\t\n\tvar _univis2 = _interopRequireDefault(_univis);\n\t\n\tvar _maxcountheap = __webpack_require__(3);\n\t\n\tvar _maxcountheap2 = _interopRequireDefault(_maxcountheap);\n\t\n\tvar _treeviewNode = __webpack_require__(4);\n\t\n\tvar _treeviewNode2 = _interopRequireDefault(_treeviewNode);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction TreeView(element, data) {\n\t    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var that = {};\n\t\n\t    var MARGIN = {\n\t        top: 5,\n\t        right: 5,\n\t        bottom: 5,\n\t        left: 5\n\t    },\n\t        DURATION = 750,\n\t        COLOR_SCALE = d3.scale.category10(),\n\t        DEFAULTS = {\n\t        height: 300,\n\t        width: 600,\n\t        nodeDistance: 180,\n\t        levelsToExpand: 2,\n\t        minNodeSize: 2,\n\t        maxNodeSize: 105,\n\t\n\t        countAccessor: function countAccessor(d) {\n\t            return d.data.count;\n\t        },\n\t        rerootCallback: undefined,\n\t\n\t        colors: function colors(d) {\n\t            return COLOR_SCALE(d.name);\n\t        },\n\t        nodeFillColor: nodeFillColor,\n\t        nodeStrokeColor: nodeStrokeColor,\n\t        linkStrokeColor: linkStrokeColor,\n\t\n\t        enableInnerArcs: true,\n\t        enableExpandOnClick: true,\n\t        enableRightClick: true,\n\t\n\t        enableLabels: true,\n\t        getLabel: function getLabel(d) {\n\t            return d.name;\n\t        },\n\t\n\t        enableTooltips: true,\n\t        getTooltip: getTooltip,\n\t        getTooltipTitle: _univis2.default.getTooltipTitle,\n\t        getTooltipText: _univis2.default.getTooltipText,\n\t        enableAutoExpand: false\n\t    };\n\t\n\t    var settings = void 0;\n\t\n\t    var visibleRoot = void 0,\n\t        tooltipTimer = void 0;\n\t\n\t    var nodeId = 0,\n\t        root = void 0;\n\t\n\t    var tree = void 0,\n\t        tooltip = void 0,\n\t        diagonal = void 0,\n\t        widthScale = void 0,\n\t        innerArc = void 0,\n\t        zoomListener = void 0,\n\t        svg = void 0;\n\t\n\t    function init() {\n\t        settings = _extends({}, DEFAULTS, options);\n\t        _treeviewNode2.default.settings = settings;\n\t\n\t        settings.width = settings.width - MARGIN.right - MARGIN.left;\n\t        settings.height = settings.height - MARGIN.top - MARGIN.bottom;\n\t\n\t        if (settings.enableTooltips) {\n\t            initTooltip();\n\t        }\n\t\n\t        if (settings.enableInnerArcs) {\n\t            initInnerArcs();\n\t        }\n\t\n\t        tree = d3.layout.tree().nodeSize([2, 10]).separation(function (a, b) {\n\t            var width = nodeSize(a) + nodeSize(b),\n\t                distance = width / 2 + 4;\n\t            return a.parent === b.parent ? distance : distance + 4;\n\t        });\n\t\n\t        diagonal = d3.svg.diagonal().projection(function (d) {\n\t            return [d.y, d.x];\n\t        });\n\t\n\t        widthScale = d3.scale.linear().range([settings.minNodeSize, settings.maxNodeSize]);\n\t\n\t        // define the zoomListener which calls the zoom function on the \"zoom\" event constrained within the scaleExtents\n\t        zoomListener = d3.behavior.zoom().scaleExtent([0.1, 3]).on(\"zoom\", function () {\n\t            svg.attr(\"transform\", \"translate(\" + d3.event.translate + \")scale(\" + d3.event.scale + \")\");\n\t        });\n\t\n\t        svg = d3.select(element).append(\"svg\").attr(\"version\", \"1.1\").attr(\"xmlns\", \"http://www.w3.org/2000/svg\").attr(\"viewBox\", \"0 0 \" + (settings.width + MARGIN.right + MARGIN.left) + \" \" + (settings.height + MARGIN.top + MARGIN.bottom)).attr(\"width\", settings.width + MARGIN.right + MARGIN.left).attr(\"height\", settings.height + MARGIN.top + MARGIN.bottom).style(\"font-family\", \"'Helvetica Neue', Helvetica, Arial, sans-serif\").call(zoomListener).append(\"g\").attr(\"transform\", \"translate(\" + MARGIN.left + \",\" + MARGIN.top + \")\").append(\"g\");\n\t\n\t        draw(_treeviewNode2.default.createNode(data));\n\t    }\n\t\n\t    function initTooltip() {\n\t        tooltip = d3.select(\"body\").append(\"div\").attr(\"id\", element.id + \"-tooltip\").attr(\"class\", \"tip\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"padding\", \"2px\").style(\"border\", \"1px solid #dddddd\").style(\"border-radius\", \"3px;\");\n\t    }\n\t\n\t    function initInnerArcs() {\n\t        var arcScale = d3.scale.linear().range([0, 2 * Math.PI]);\n\t\n\t        innerArc = d3.svg.arc().outerRadius(nodeSize).startAngle(0).endAngle(function (d) {\n\t            return arcScale(d.data.self_count / d.data.count) || 0;\n\t        });\n\t    }\n\t\n\t    function draw(data) {\n\t        var _this = this;\n\t\n\t        widthScale.domain([0, data.data.count]);\n\t\n\t        root = data;\n\t        root.x0 = settings.height / 2;\n\t        root.y0 = 0;\n\t\n\t        // set everything visible\n\t        root.setSelected(true);\n\t\n\t        root.children.forEach(function (d, i) {\n\t            d.color = d3.functor(settings.colors).call(_this, d, i);\n\t            d.setRecursiveProperty(\"color\", d.color);\n\t        });\n\t\n\t        if (settings.enableExpandOnClick) {\n\t            root.collapseAll();\n\t            initialExpand(root);\n\t        } else {\n\t            root.expandAll();\n\t        }\n\t\n\t        update(root);\n\t        centerNode(root);\n\t    }\n\t\n\t    function initialExpand(root) {\n\t        if (!settings.enableAutoExpand) {\n\t            root.expand();\n\t            return;\n\t        }\n\t\n\t        root.expand(1);\n\t        var allowedCount = root.data.count * (Number.isFinite(settings.enableAutoExpand) ? settings.enableAutoExpand : 0.8);\n\t        var pq = new _maxcountheap2.default(root.children || []);\n\t        while (allowedCount > 0 && pq.size > 0) {\n\t            var toExpand = pq.remove();\n\t            allowedCount -= toExpand.data.count;\n\t            toExpand.expand(1);\n\t            (toExpand.children || []).forEach(function (c) {\n\t                return pq.add(c);\n\t            });\n\t        }\n\t    }\n\t\n\t    function update(source) {\n\t        // Compute the new tree layout.\n\t        var nodes = tree.nodes(root).reverse(),\n\t            links = tree.links(nodes);\n\t\n\t        // Normalize for fixed-depth.\n\t        nodes.forEach(function (d) {\n\t            d.y = d.depth * settings.nodeDistance;\n\t        });\n\t\n\t        // Update the nodes…\n\t        var node = svg.selectAll(\"g.node\").data(nodes, function (d) {\n\t            return d.id || (d.id = ++nodeId);\n\t        });\n\t\n\t        // Enter any new nodes at the parent's previous position.\n\t        var nodeEnter = node.enter().append(\"g\").attr(\"class\", \"node\").style(\"cursor\", \"pointer\").attr(\"transform\", function (d) {\n\t            return \"translate(\" + (source.y || 0) + \",\" + (source.x0 || 0) + \")\";\n\t        }).on(\"click\", click).on(\"mouseover\", tooltipIn).on(\"mouseout\", tooltipOut).on(\"contextmenu\", rightClick);\n\t\n\t        nodeEnter.append(\"circle\").attr(\"r\", 1e-6).style(\"stroke-width\", \"1.5px\").style(\"stroke\", settings.nodeStrokeColor).style(\"fill\", settings.nodeFillColor);\n\t\n\t        if (settings.enableInnerArcs) {\n\t            nodeEnter.append(\"path\").attr(\"d\", innerArc).style(\"fill\", settings.nodeStrokeColor).style(\"fill-opacity\", 0);\n\t        }\n\t\n\t        if (settings.enableLabels) {\n\t            nodeEnter.append(\"text\").attr(\"x\", function (d) {\n\t                return d.isLeaf() ? 10 : -10;\n\t            }).attr(\"dy\", \".35em\").attr(\"text-anchor\", function (d) {\n\t                return d.isLeaf() ? \"start\" : \"end\";\n\t            }).text(settings.getLabel).style(\"font\", \"10px sans-serif\").style(\"fill-opacity\", 1e-6);\n\t        }\n\t\n\t        // Transition nodes to their new position.\n\t        var nodeUpdate = node.transition().duration(DURATION).attr(\"transform\", function (d) {\n\t            return \"translate(\" + d.y + \",\" + d.x + \")\";\n\t        });\n\t\n\t        nodeUpdate.select(\"circle\").attr(\"r\", nodeSize).style(\"fill-opacity\", function (d) {\n\t            return d._children ? 1 : 0;\n\t        }).style(\"stroke\", settings.nodeStrokeColor).style(\"fill\", settings.nodeFillColor);\n\t\n\t        if (settings.enableLabels) {\n\t            nodeUpdate.select(\"text\").style(\"fill-opacity\", 1);\n\t        }\n\t\n\t        if (settings.enableInnerArcs) {\n\t            nodeUpdate.select(\"path\").duration(DURATION).attr(\"d\", innerArc).style(\"fill-opacity\", 0.8);\n\t        }\n\t\n\t        // Transition exiting nodes to the parent's new position.\n\t        var nodeExit = node.exit().transition().duration(DURATION).attr(\"transform\", function (d) {\n\t            return \"translate(\" + source.y + \",\" + source.x + \")\";\n\t        }).remove();\n\t\n\t        nodeExit.select(\"circle\").attr(\"r\", 1e-6);\n\t\n\t        nodeExit.select(\"path\").style(\"fill-opacity\", 1e-6);\n\t\n\t        nodeExit.select(\"text\").style(\"fill-opacity\", 1e-6);\n\t\n\t        // Update the links…\n\t        var link = svg.selectAll(\"path.link\").data(links, function (d) {\n\t            return d.target.id;\n\t        });\n\t\n\t        // Enter any new links at the parent's previous position.\n\t        link.enter().insert(\"path\", \"g\").attr(\"class\", \"link\").style(\"fill\", \"none\").style(\"stroke-opacity\", \"0.5\").style(\"stroke-linecap\", \"round\").style(\"stroke\", settings.linkStrokeColor).style(\"stroke-width\", 1e-6).attr(\"d\", function (d) {\n\t            var o = {\n\t                x: source.x0 || 0,\n\t                y: source.y0 || 0\n\t            };\n\t            return diagonal({\n\t                source: o,\n\t                target: o\n\t            });\n\t        });\n\t\n\t        // Transition links to their new position.\n\t        link.transition().duration(DURATION).attr(\"d\", diagonal).style(\"stroke\", settings.linkStrokeColor).style(\"stroke-width\", function (d) {\n\t            if (d.source.selected) {\n\t                return widthScale(d.target.data.count) + \"px\";\n\t            } else {\n\t                return \"4px\";\n\t            }\n\t        });\n\t\n\t        // Transition exiting nodes to the parent's new position.\n\t        link.exit().transition().duration(DURATION).style(\"stroke-width\", 1e-6).attr(\"d\", function (d) {\n\t            var o = {\n\t                x: source.x,\n\t                y: source.y\n\t            };\n\t            return diagonal({\n\t                source: o,\n\t                target: o\n\t            });\n\t        }).remove();\n\t\n\t        // Stash the old positions for transition.\n\t        nodes.forEach(function (d) {\n\t            var _ref = [d.x, d.y];\n\t            d.x0 = _ref[0];\n\t            d.y0 = _ref[1];\n\t        });\n\t    }\n\t\n\t    function nodeSize(d) {\n\t        if (d.selected) {\n\t            return widthScale(d.data.count) / 2;\n\t        } else {\n\t            return 2;\n\t        }\n\t    }\n\t\n\t    // Toggle children on click.\n\t    function click(d) {\n\t        if (!settings.enableExpandOnClick) {\n\t            return;\n\t        }\n\t\n\t        // check if click is triggered by panning on a node\n\t        if (d3.event.defaultPrevented) {\n\t            return;\n\t        }\n\t\n\t        if (d3.event.shiftKey) {\n\t            d.expandAll();\n\t        } else if (d.children) {\n\t            d.collapse();\n\t        } else {\n\t            d.expand();\n\t        }\n\t        update(d);\n\t        centerNode(d);\n\t    }\n\t\n\t    function rightClick(d) {\n\t        if (settings.enableRightClick) {\n\t            reroot(d);\n\t        }\n\t    }\n\t\n\t    // Sets the width of the right clicked node to 100%\n\t    function reroot(d) {\n\t        if (d === visibleRoot && d !== root) {\n\t            reroot(root);\n\t            return;\n\t        }\n\t        visibleRoot = d;\n\t\n\t        // set Selection properties\n\t        root.setSelected(false);\n\t        d.setSelected(true);\n\t\n\t        // scale the lines\n\t        widthScale.domain([0, d.data.count]);\n\t\n\t        d.expand();\n\t\n\t        // redraw\n\t        if (d3.event !== null) {\n\t            d3.event.preventDefault();\n\t        }\n\t        update(d);\n\t        centerNode(d);\n\t\n\t        if (settings.rerootCallback) {\n\t            settings.rerootCallback.call(null, d);\n\t        }\n\t    }\n\t\n\t    // Center a node\n\t    function centerNode(source) {\n\t        var scale = zoomListener.scale(),\n\t            x = -source.y0,\n\t            y = -source.x0;\n\t\n\t        x = x * scale + settings.width / 4;\n\t        y = y * scale + settings.height / 2;\n\t        svg.transition().duration(DURATION).attr(\"transform\", \"translate(\" + x + \",\" + y + \")scale(\" + scale + \")\");\n\t        zoomListener.scale(scale);\n\t        zoomListener.translate([x, y]);\n\t    }\n\t\n\t    // tooltip functions\n\t    function tooltipIn(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.html(settings.getTooltip(d)).style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\");\n\t\n\t        tooltipTimer = setTimeout(function () {\n\t            tooltip.style(\"visibility\", \"visible\");\n\t        }, 1000);\n\t    }\n\t\n\t    function tooltipOut(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        clearTimeout(tooltipTimer);\n\t        tooltip.style(\"visibility\", \"hidden\");\n\t    }\n\t\n\t    /** ************ Default methods ***************/\n\t    // set fill color\n\t    function nodeFillColor(d) {\n\t        if (d.selected) {\n\t            return d._children ? d.color || \"#aaa\" : \"#fff\";\n\t        } else {\n\t            return \"#aaa\";\n\t        }\n\t    }\n\t\n\t    // set node stroke color\n\t    function nodeStrokeColor(d) {\n\t        if (d.selected) {\n\t            return d.color || \"#aaa\";\n\t        } else {\n\t            return \"#aaa\";\n\t        }\n\t    }\n\t\n\t    // set link stroke color\n\t    function linkStrokeColor(d) {\n\t        if (d.source.selected) {\n\t            return d.target.color;\n\t        } else {\n\t            return \"#aaa\";\n\t        }\n\t    }\n\t\n\t    function getTooltip(d) {\n\t        return \"<h3 class='tip-title'>\" + settings.getTooltipTitle(d) + \"</h3><p>\" + settings.getTooltipText(d) + \"</p>\";\n\t    }\n\t\n\t    /** ************* Public methods ***************/\n\t    that.reset = function reset() {\n\t        zoomListener.scale(1);\n\t        reroot(root);\n\t    };\n\t\n\t    /**\n\t     * Sets the visualisation in full screen mode\n\t     *\n\t     * @param <boolean> isFullScreen indicates if we're in full screen mode\n\t     */\n\t    that.setFullScreen = function setFullScreen(isFullScreen) {\n\t        // the delay is because the event fires before we're in fullscreen\n\t        // so the height en width functions don't give a correct result\n\t        // without the delay\n\t        setTimeout(function () {\n\t            var _ref2 = [settings.width, settings.height],\n\t                w = _ref2[0],\n\t                h = _ref2[1];\n\t\n\t            if (isFullScreen) {\n\t                w = $(window).width();\n\t                h = $(window).height() - 44;\n\t            }\n\t            $(element).children(\"svg\").attr(\"width\", w).attr(\"height\", h);\n\t        }, 1000);\n\t    };\n\t\n\t    /**\n\t     * Get the root of the visual tree\n\t     *\n\t     * @return {TreeviewNode}   The root node of the visualisation\n\t     */\n\t    that.getRoot = function getRoot() {\n\t        return root;\n\t    };\n\t\n\t    /**\n\t     * Apply changes made to the tree or its data\n\t     */\n\t    that.update = update;\n\t\n\t    /**\n\t     * Center a node of the tree\n\t     */\n\t    that.centerNode = centerNode;\n\t\n\t    // initialize the object\n\t    init();\n\t\n\t    // return the object\n\t    return that;\n\t}\n\t\n\t$.fn.treeview = function (data, options) {\n\t    return new TreeView(this.get(0), data, options);\n\t};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Univis = function () {\n\t    function Univis() {\n\t        _classCallCheck(this, Univis);\n\t    }\n\t\n\t    _createClass(Univis, null, [{\n\t        key: \"stringHash\",\n\t\n\t\n\t        /**\n\t         * Hash function for strings from\n\t         * http://stackoverflow.com/a/15710692/865696\n\t         */\n\t        value: function stringHash(s) {\n\t            return s.split(\"\").reduce(function (a, b) {\n\t                var c = (a << 5) - a + b.charCodeAt(0);\n\t                return c & c;\n\t            }, 0);\n\t        }\n\t\n\t        /*\n\t         * Returns the readable text color based on the brightness of a given backgroud color\n\t         */\n\t\n\t    }, {\n\t        key: \"getReadableColorFor\",\n\t        value: function getReadableColorFor(color) {\n\t            var textColor = \"#000\";\n\t            try {\n\t                textColor = Univis.brightness(d3.rgb(color)) < 125 ? \"#eee\" : \"#000\";\n\t            } catch (err) {/* go on */}\n\t            return textColor;\n\t        }\n\t\n\t        /*\n\t         * Returns the brightness of an rgb-color\n\t         * from: http:// www.w3.org/WAI/ER/WD-AERT/#color-contrast\n\t         */\n\t\n\t    }, {\n\t        key: \"brightness\",\n\t        value: function brightness(rgb) {\n\t            return rgb.r * 0.299 + rgb.g * 0.587 + rgb.b * 0.114;\n\t        }\n\t    }, {\n\t        key: \"getTooltipTitle\",\n\t        value: function getTooltipTitle(d) {\n\t            return d.name;\n\t        }\n\t    }, {\n\t        key: \"getTooltipText\",\n\t        value: function getTooltipText(d) {\n\t            return d.data.count + \" hits\";\n\t        }\n\t    }]);\n\t\n\t    return Univis;\n\t}();\n\t\n\texports.default = Univis;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*\n\t * A priority qeueue that works with Nodes.\n\t * Based on https://github.com/gkz/es-collections\n\t */\n\t\n\t/* eslint-disable require-jsdoc, no-param-reassign */\n\t\n\tvar comp = function comp(a, b) {\n\t    return b.data.count - a.data.count;\n\t};\n\t\n\tfunction heapify(data) {\n\t    for (var i = Math.floor((data.length - 2) / 2); i >= 0; i--) {\n\t        sink(data, i);\n\t    }\n\t    return data;\n\t}\n\t\n\tfunction bubbleUp(data, index) {\n\t    var value = data[index];\n\t\n\t    while (index > 0) {\n\t        var parentIndex = Math.floor((index - 1) / 2);\n\t        var parent = data[parentIndex];\n\t        if (comp(value, parent) < 0) {\n\t            data[index] = parent;\n\t        } else {\n\t            break;\n\t        }\n\t        index = parentIndex;\n\t    }\n\t    data[index] = value;\n\t    return index;\n\t}\n\t\n\tfunction sink(data, index) {\n\t    var value = data[index];\n\t    var size = data.length;\n\t\n\t    while (2 * index + 1 < size) {\n\t        var targetIndex = 2 * index + 1;\n\t        if (targetIndex < size - 1 && comp(data[targetIndex + 1], data[targetIndex]) < 0) {\n\t            targetIndex++;\n\t        }\n\t        if (comp(value, data[targetIndex]) <= 0) {\n\t            break;\n\t        }\n\t        data[index] = data[targetIndex];\n\t        index = targetIndex;\n\t    }\n\t    data[index] = value;\n\t    return index;\n\t}\n\t\n\tvar MaxCountHeap = function () {\n\t    function MaxCountHeap() {\n\t        var iterable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\n\t        _classCallCheck(this, MaxCountHeap);\n\t\n\t        this._data = heapify(Array.from(iterable));\n\t    }\n\t\n\t    _createClass(MaxCountHeap, [{\n\t        key: \"add\",\n\t        value: function add(item) {\n\t            this._data.push(item);\n\t            bubbleUp(this._data, this.size - 1);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: \"peek\",\n\t        value: function peek() {\n\t            return this._data[0];\n\t        }\n\t    }, {\n\t        key: \"remove\",\n\t        value: function remove() {\n\t            var output = this._data[0];\n\t            if (this.size > 1) {\n\t                this._data[0] = this._data.pop();\n\t                sink(this._data, 0);\n\t            } else {\n\t                this._data.pop();\n\t            }\n\t            return output;\n\t        }\n\t    }, {\n\t        key: \"clear\",\n\t        value: function clear() {\n\t            this._data = [];\n\t        }\n\t    }, {\n\t        key: \"size\",\n\t        get: function get() {\n\t            return this._data.length;\n\t        }\n\t    }]);\n\t\n\t    return MaxCountHeap;\n\t}();\n\t\n\texports.default = MaxCountHeap;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _node = __webpack_require__(5);\n\t\n\tvar _node2 = _interopRequireDefault(_node);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar TreeviewNode = function (_Node) {\n\t    _inherits(TreeviewNode, _Node);\n\t\n\t    function TreeviewNode() {\n\t        var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t        _classCallCheck(this, TreeviewNode);\n\t\n\t        var _this = _possibleConstructorReturn(this, (TreeviewNode.__proto__ || Object.getPrototypeOf(TreeviewNode)).call(this, node));\n\t\n\t        _this.settings = TreeviewNode.settings;\n\t        _this.setCount();\n\t        return _this;\n\t    }\n\t\n\t    _createClass(TreeviewNode, [{\n\t        key: \"setCount\",\n\t        value: function setCount() {\n\t            if (this.settings.countAccessor(this)) {\n\t                this.data.count = this.settings.countAccessor(this);\n\t            } else if (this.children) {\n\t                this.data.count = this.children.reduce(function (sum, c) {\n\t                    return sum + c.data.count;\n\t                }, 0);\n\t            } else {\n\t                this.data.count = 0;\n\t            }\n\t        }\n\t    }, {\n\t        key: \"setSelected\",\n\t        value: function setSelected(value) {\n\t            this.setRecursiveProperty(\"selected\", value);\n\t        }\n\t\n\t        // collapse everything\n\t\n\t    }, {\n\t        key: \"collapseAll\",\n\t        value: function collapseAll() {\n\t            if (this.children && this.children.length === 0) {\n\t                this.children = null;\n\t            }\n\t            if (this.children) {\n\t                this._children = this.children;\n\t                this._children.forEach(function (c) {\n\t                    c.collapseAll();\n\t                });\n\t                this.children = null;\n\t            }\n\t        }\n\t\n\t        // Collapses a node\n\t\n\t    }, {\n\t        key: \"collapse\",\n\t        value: function collapse() {\n\t            if (this.children) {\n\t                this._children = this.children;\n\t                this.children = null;\n\t            }\n\t        }\n\t    }, {\n\t        key: \"expandAll\",\n\t        value: function expandAll() {\n\t            this.expand(100);\n\t        }\n\t\n\t        // Expands a node and its children\n\t\n\t    }, {\n\t        key: \"expand\",\n\t        value: function expand() {\n\t            var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.settings.levelsToExpand;\n\t\n\t            if (i > 0) {\n\t                if (this._children) {\n\t                    this.children = this._children;\n\t                    this._children = null;\n\t                }\n\t                if (this.children) {\n\t                    this.children.forEach(function (c) {\n\t                        c.expand(i - 1);\n\t                    });\n\t                }\n\t            }\n\t        }\n\t    }], [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new TreeviewNode(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            return _node2.default.createNode(node, TreeviewNode.new);\n\t        }\n\t    }]);\n\t\n\t    return TreeviewNode;\n\t}(_node2.default);\n\t\n\texports.default = TreeviewNode;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Node = function () {\n\t    function Node() {\n\t        var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t        _classCallCheck(this, Node);\n\t\n\t        this.data = {};\n\t        _extends(this, node);\n\t    }\n\t\n\t    _createClass(Node, [{\n\t        key: \"setRecursiveProperty\",\n\t\n\t\n\t        // sets a property for a node and all its children\n\t        value: function setRecursiveProperty(property, value) {\n\t            this[property] = value;\n\t            if (this.children) {\n\t                this.children.forEach(function (c) {\n\t                    c.setRecursiveProperty(property, value);\n\t                });\n\t            } else if (this._children) {\n\t                this._children.forEach(function (c) {\n\t                    c.setRecursiveProperty(property, value);\n\t                });\n\t            }\n\t        }\n\t\n\t        // Returns true if a node is a leaf\n\t\n\t    }, {\n\t        key: \"isLeaf\",\n\t        value: function isLeaf() {\n\t            return !this.children && !this._children || this.children && this.children.length === 0 || this._children && this._children.length === 0;\n\t        }\n\t    }, {\n\t        key: \"getHeight\",\n\t        value: function getHeight() {\n\t            if (this._height === undefined) {\n\t                if (this.isLeaf()) {\n\t                    this._height = 0;\n\t                } else {\n\t                    this._height = d3.max(this.children, function (c) {\n\t                        return c.getHeight();\n\t                    }) + 1;\n\t                }\n\t            }\n\t            return this._height;\n\t        }\n\t    }, {\n\t        key: \"getDepth\",\n\t        value: function getDepth() {\n\t            if (this._depth === undefined) {\n\t                if (this.parent === undefined) {\n\t                    this._depth = 0;\n\t                } else {\n\t                    this._depth = this.parent.getDepth() + 1;\n\t                }\n\t            }\n\t            return this._depth;\n\t        }\n\t    }], [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new Node(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            var construct = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Node.new;\n\t\n\t            if (node.children) {\n\t                node.children = node.children.map(function (n) {\n\t                    return Node.createNode(n, construct);\n\t                });\n\t            }\n\t            return construct.call(null, node);\n\t        }\n\t    }]);\n\t\n\t    return Node;\n\t}();\n\t\n\texports.default = Node;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\n\t                                                                                                                                                                                                                                                                   * Interactive treemap\n\t                                                                                                                                                                                                                                                                   */\n\t\n\t\n\texports.default = TreeMap;\n\t\n\tvar _univis = __webpack_require__(2);\n\t\n\tvar _univis2 = _interopRequireDefault(_univis);\n\t\n\tvar _treemapNode = __webpack_require__(7);\n\t\n\tvar _treemapNode2 = _interopRequireDefault(_treemapNode);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction TreeMap(element, data) {\n\t    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    var that = {};\n\t\n\t    var MARGIN = {\n\t        top: 0,\n\t        right: 0,\n\t        bottom: 0,\n\t        left: 0\n\t    },\n\t        DEFAULTS = {\n\t        height: 300,\n\t        width: 600,\n\t\n\t        className: \"unipept-treemap\",\n\t        levels: undefined,\n\t        getLevel: function getLevel(d) {\n\t            return d.getDepth();\n\t        },\n\t\n\t        countAccessor: function countAccessor(d) {\n\t            return d.data.self_count;\n\t        },\n\t        rerootCallback: undefined,\n\t\n\t        getBreadcrumbTooltip: function getBreadcrumbTooltip(d) {\n\t            return d.name;\n\t        },\n\t        colorRoot: \"#104B7D\",\n\t        colorLeaf: \"#fdffcc\",\n\t        colorBreadcrumbs: \"#FF8F00\",\n\t\n\t        labelHeight: 10,\n\t        getLabel: function getLabel(d) {\n\t            return d.name;\n\t        },\n\t\n\t        enableTooltips: true,\n\t        getTooltip: getTooltip,\n\t        getTooltipTitle: _univis2.default.getTooltipTitle,\n\t        getTooltipText: _univis2.default.getTooltipText\n\t    };\n\t\n\t    var settings = void 0;\n\t\n\t    var root = void 0,\n\t        nodeId = 0,\n\t        current = void 0,\n\t        treemapLayout = void 0,\n\t        breadcrumbs = void 0,\n\t        treemap = void 0,\n\t        tooltip = void 0,\n\t        colorScale = void 0;\n\t\n\t    /**\n\t     * Initializes Treemap\n\t     */\n\t    function init() {\n\t        settings = _extends({}, DEFAULTS, options);\n\t\n\t        root = _treemapNode2.default.createNode(data);\n\t\n\t        settings.width = settings.width - MARGIN.right - MARGIN.left;\n\t        settings.height = settings.height - MARGIN.top - MARGIN.bottom;\n\t\n\t        settings.levels = settings.levels || root.getHeight();\n\t\n\t        if (settings.enableTooltips) {\n\t            initTooltip();\n\t        }\n\t\n\t        initCSS();\n\t\n\t        // setup the visualisation\n\t        draw(root);\n\t        reroot(root, false);\n\t    }\n\t\n\t    function initTooltip() {\n\t        tooltip = d3.select(\"body\").append(\"div\").attr(\"id\", element.id + \"-tooltip\").attr(\"class\", \"tip\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"padding\", \"2px\").style(\"border\", \"1px solid #dddddd\").style(\"border-radius\", \"3px;\");\n\t    }\n\t\n\t    function initCSS() {\n\t        var elementClass = settings.className;\n\t        $(element).addClass(elementClass);\n\t        $(\"<style>\").prop(\"type\", \"text/css\").html(\"\\n                    .\" + elementClass + \" {\\n                        font-family: Roboto,'Helvetica Neue',Helvetica,Arial,sans-serif;\\n                    }\\n                    .\" + elementClass + \" .node {\\n                        font-size: 9px;\\n                        line-height: 10px;\\n                        overflow: hidden;\\n                        position: absolute;\\n                        text-indent: 2px;\\n                        text-align: center;\\n                        text-overflow: ellipsis;\\n                        cursor: pointer;\\n                    }\\n                    .\" + elementClass + \" .node:hover {\\n                        outline: 1px solid white;\\n                    }\\n                    .\" + elementClass + \" .breadcrumbs {\\n                        font-size: 11px;\\n                        line-height: 20px;\\n                        padding-left: 5px;\\n                        font-weight: bold;\\n                        color: white;\\n                        box-sizing: border-box;\\n                    }\\n                    .full-screen .\" + elementClass + \" .breadcrumbs {\\n                        width: 100% !important;\\n                    }\\n                    .\" + elementClass + \" .crumb {\\n                        cursor: pointer;\\n                    }\\n                    .\" + elementClass + \" .crumb .link:hover {\\n                        text-decoration: underline;\\n                    }\\n                    .\" + elementClass + \" .breadcrumbs .crumb + .crumb::before {\\n                        content: \\\" > \\\";\\n                        cursor: default;\\n                    }\\n                \").appendTo(\"head\");\n\t    }\n\t\n\t    function draw(data) {\n\t        $(element).empty();\n\t\n\t        treemapLayout = d3.layout.treemap().size([settings.width + 1, settings.height + 1]).padding([settings.labelHeight, 0, 0, 0]).value(settings.countAccessor);\n\t\n\t        colorScale = d3.scale.linear().domain([0, settings.levels]).range([settings.colorRoot, settings.colorLeaf]).interpolate(d3.interpolateLab);\n\t\n\t        breadcrumbs = d3.select(element).append(\"div\").attr(\"class\", \"breadcrumbs\").style(\"position\", \"relative\").style(\"width\", settings.width + \"px\").style(\"height\", \"20px\").style(\"background-color\", settings.colorBreadcrumbs);\n\t\n\t        treemap = d3.select(element).append(\"div\").style(\"position\", \"relative\").style(\"width\", settings.width + \"px\").style(\"height\", settings.height + \"px\").style(\"left\", MARGIN.left + \"px\").style(\"top\", MARGIN.top + \"px\");\n\t    }\n\t\n\t    function setBreadcrumbs() {\n\t        var crumbs = [];\n\t        var temp = current;\n\t        while (temp) {\n\t            crumbs.push(temp);\n\t            temp = temp.parent;\n\t        }\n\t        crumbs.reverse();\n\t        breadcrumbs.html(\"\");\n\t        breadcrumbs.selectAll(\".crumb\").data(crumbs).enter().append(\"span\").attr(\"class\", \"crumb\").attr(\"title\", settings.getBreadcrumbTooltip).html(function (d) {\n\t            return \"<span class='link'>\" + d.name + \"</span>\";\n\t        }).on(\"click\", function (d) {\n\t            reroot(d);\n\t        });\n\t    }\n\t\n\t    function reroot(data) {\n\t        var triggerCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t        current = data;\n\t\n\t        setBreadcrumbs();\n\t\n\t        var nodes = treemap.selectAll(\".node\").data(treemapLayout.nodes(data), function (d) {\n\t            return d.id || (d.id = ++nodeId);\n\t        });\n\t\n\t        nodes.enter().append(\"div\").attr(\"class\", \"node\").style(\"background\", function (d) {\n\t            return colorScale(settings.getLevel(d));\n\t        }).style(\"color\", function (d) {\n\t            return _univis2.default.getReadableColorFor(colorScale(settings.getLevel(d)));\n\t        }).style(\"left\", \"0px\").style(\"top\", \"0px\").style(\"width\", \"0px\").style(\"height\", \"0px\").text(settings.getLabel).on(\"click\", function (d) {\n\t            reroot(d);\n\t        }).on(\"contextmenu\", function (d) {\n\t            d3.event.preventDefault();\n\t            if (current.parent) {\n\t                reroot(current.parent);\n\t            }\n\t        }).on(\"mouseover\", tooltipIn).on(\"mousemove\", tooltipMove).on(\"mouseout\", tooltipOut);\n\t\n\t        nodes.order().transition().call(position);\n\t\n\t        nodes.exit().remove();\n\t\n\t        if (triggerCallback && settings.rerootCallback) {\n\t            settings.rerootCallback.call(null, current);\n\t        }\n\t    }\n\t\n\t    function update() {\n\t        var nodes = treemap.selectAll(\".node\").data(treemapLayout.nodes(data), function (d) {\n\t            return d.id;\n\t        }).order().transition().call(position);\n\t    }\n\t\n\t    /**\n\t     * sets the position of a square\n\t     */\n\t    function position() {\n\t        this.style(\"left\", function (d) {\n\t            return d.x + \"px\";\n\t        }).style(\"top\", function (d) {\n\t            return d.y + \"px\";\n\t        }).style(\"width\", function (d) {\n\t            return Math.max(0, d.dx - 1) + \"px\";\n\t        }).style(\"height\", function (d) {\n\t            return Math.max(0, d.dy - 1) + \"px\";\n\t        });\n\t    }\n\t\n\t    /**\n\t     * Resizes the treemap for a given width and height\n\t     */\n\t    function resize(width, height) {\n\t        treemapLayout = d3.layout.treemap().size([width + 1, height + 1]).padding([10, 0, 0, 0]).value(settings.countAccessor);\n\t        update();\n\t    }\n\t\n\t    // tooltip functions\n\t    function tooltipIn(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.html(settings.getTooltip(d)).style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\").style(\"visibility\", \"visible\");\n\t    }\n\t\n\t    function tooltipOut(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.style(\"visibility\", \"hidden\");\n\t    }\n\t\n\t    function tooltipMove(d, i) {\n\t        if (!settings.enableTooltips) {\n\t            return;\n\t        }\n\t        tooltip.style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\");\n\t    }\n\t\n\t    function getTooltip(d) {\n\t        return \"<h3 class='tip-title'>\" + settings.getTooltipTitle(d) + \"</h3><p>\" + settings.getTooltipText(d) + \"</p>\";\n\t    }\n\t\n\t    /** ************* Public methods ***************/\n\t    /**\n\t     * Resets the treemap to its initial position\n\t     */\n\t    that.reset = function reset() {\n\t        reroot(root);\n\t    };\n\t\n\t    /**\n\t     * Sets the visualisation in full screen mode\n\t     *\n\t     * @param <boolean> isFullScreen indicates if we're in full screen mode\n\t     */\n\t    that.setFullScreen = function setFullScreen(isFullScreen) {\n\t        // the delay is because the event fires before we're in fullscreen\n\t        // so the height en width functions don't give a correct result\n\t        // without the delay\n\t        setTimeout(function () {\n\t            var _ref = [settings.width, settings.height],\n\t                w = _ref[0],\n\t                h = _ref[1];\n\t\n\t            if (isFullScreen) {\n\t                w = $(window).width();\n\t                h = $(window).height() - 44;\n\t            }\n\t            resize(w, h);\n\t        }, 1000);\n\t    };\n\t\n\t    /**\n\t     * Get the root of the visual tree\n\t     *\n\t     * @return {TreeviewNode}   The root node of the visualisation\n\t     */\n\t    that.getRoot = function getRoot() {\n\t        return root;\n\t    };\n\t\n\t    /**\n\t     * Apply changes made to the tree or its data\n\t     */\n\t    that.update = update;\n\t\n\t    // initialize the object\n\t    init();\n\t\n\t    return that;\n\t}\n\t\n\t$.fn.treemap = function (data, options) {\n\t    return new TreeMap(this.get(0), data, options);\n\t};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _node = __webpack_require__(5);\n\t\n\tvar _node2 = _interopRequireDefault(_node);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar TreemapNode = function (_Node) {\n\t    _inherits(TreemapNode, _Node);\n\t\n\t    function TreemapNode() {\n\t        _classCallCheck(this, TreemapNode);\n\t\n\t        return _possibleConstructorReturn(this, (TreemapNode.__proto__ || Object.getPrototypeOf(TreemapNode)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(TreemapNode, null, [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new TreemapNode(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            return _node2.default.createNode(node, TreemapNode.new);\n\t        }\n\t    }]);\n\t\n\t    return TreemapNode;\n\t}(_node2.default);\n\t\n\texports.default = TreemapNode;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Interactive Sunburst\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\t\n\tvar _univis = __webpack_require__(2);\n\t\n\tvar _univis2 = _interopRequireDefault(_univis);\n\t\n\tvar _sunburstNode = __webpack_require__(9);\n\t\n\tvar _sunburstNode2 = _interopRequireDefault(_sunburstNode);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Sunburst = function () {\n\t    function Sunburst(element, data) {\n\t        var _this = this;\n\t\n\t        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t        _classCallCheck(this, Sunburst);\n\t\n\t        this.element = element;\n\t        this.data = data;\n\t        this.settings = _extends({}, this.DEFAULTS, options);\n\t\n\t        this.settings.width = this.settings.width - Sunburst.MARGIN.right - Sunburst.MARGIN.left;\n\t        this.settings.height = this.settings.height - Sunburst.MARGIN.top - Sunburst.MARGIN.bottom;\n\t\n\t        this.colorCounter = -1;\n\t\n\t        // prepare data\n\t        this.data.children = this.addEmptyChildren(this.data.children, this.settings.countAccessor.call(null, this.data));\n\t\n\t        if (this.settings.enableTooltips) {\n\t            this.initTooltip();\n\t        }\n\t\n\t        this.initCSS();\n\t\n\t        // draw everything\n\t        this.redraw();\n\t\n\t        // fake click on the center node\n\t        setTimeout(function () {\n\t            return _this.reset();\n\t        }, 1000);\n\t    }\n\t\n\t    _createClass(Sunburst, [{\n\t        key: \"initTooltip\",\n\t        value: function initTooltip() {\n\t            this.tooltip = d3.select(\"body\").append(\"div\").attr(\"id\", this.element.id + \"-tooltip\").attr(\"class\", \"tip\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"padding\", \"2px\").style(\"border\", \"1px solid #dddddd\").style(\"border-radius\", \"3px;\");\n\t        }\n\t    }, {\n\t        key: \"initCSS\",\n\t        value: function initCSS() {\n\t            var elementClass = this.settings.className;\n\t            $(this.element).addClass(elementClass);\n\t            $(\"<style>\").prop(\"type\", \"text/css\").html(\"\\n.\" + elementClass + \" {\\n    font-family: Roboto,'Helvetica Neue',Helvetica,Arial,sans-serif;\\n    width: \" + (this.settings.width + this.settings.breadcrumbWidth) + \"px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs {\\n    width: 176px;\\n    float: right;\\n    margin-right: 15px;\\n    margin-top: 10px;\\n    padding-left: 5px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs ul {\\n    padding-left: 0;\\n    list-style: none;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb {\\n    margin-bottom: 5px;\\n    cursor: pointer;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb svg {\\n    float: left;\\n    margin-right: 3px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb p {\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    margin: 0;\\n    font-size: 14px;\\n}\\n.\" + elementClass + \" .sunburst-breadcrumbs .crumb .percentage {\\n    font-size: 11px;\\n}\").appendTo(\"head\");\n\t        }\n\t\n\t        /** ****** private functions ********/\n\t        /**\n\t         * Adds data for the peptides on the self level\n\t         * Is called recursively\n\t         *\n\t         * @param <Array> children A list of children\n\t         * @param <int> count The number of peptides that should be the sum of the\n\t         *          children count\n\t         * @return <Array> The modified list of children\n\t         */\n\t\n\t    }, {\n\t        key: \"addEmptyChildren\",\n\t        value: function addEmptyChildren(children, count) {\n\t            for (var i = 0; i < children.length; i++) {\n\t                if (typeof children[i].children !== \"undefined\") {\n\t                    children[i].children = this.addEmptyChildren(children[i].children, this.settings.countAccessor.call(null, children[i]));\n\t                }\n\t            }\n\t            if (children.length > 0 && count !== 0 && count !== undefined) {\n\t                children.push({\n\t                    id: -1,\n\t                    name: \"empty\",\n\t                    data: {\n\t                        count: count,\n\t                        self_count: count\n\t                    }\n\t                });\n\t            }\n\t            return children;\n\t        }\n\t\n\t        /**\n\t         * Redraws the pancore graph\n\t         */\n\t\n\t    }, {\n\t        key: \"redraw\",\n\t        value: function redraw() {\n\t            var _this2 = this;\n\t\n\t            // clear everything\n\t            $(this.element).empty();\n\t\n\t            this.breadcrumbs = d3.select(this.element).append(\"div\").attr(\"id\", this.element.id + \"-breadcrumbs\").attr(\"class\", \"sunburst-breadcrumbs\").append(\"ul\");\n\t\n\t            this.x = d3.scale.linear().range([0, 2 * Math.PI]); // use full circle\n\t            this.y = d3.scale.linear().domain([0, 1]).range([0, this.settings.radius]);\n\t            this.currentMaxLevel = 4;\n\t\n\t            var vis = d3.select(this.element).append(\"svg\").attr(\"version\", \"1.1\").attr(\"xmlns\", \"http://www.w3.org/2000/svg\").attr(\"viewBox\", \"0 0 \" + (this.settings.width + Sunburst.MARGIN.right + Sunburst.MARGIN.left) + \" \" + (this.settings.height + Sunburst.MARGIN.top + Sunburst.MARGIN.bottom)).attr(\"width\", this.settings.width + Sunburst.MARGIN.right + Sunburst.MARGIN.left).attr(\"height\", this.settings.height + Sunburst.MARGIN.top + Sunburst.MARGIN.bottom).attr(\"overflow\", \"hidden\").style(\"font-family\", \"'Helvetica Neue', Helvetica, Arial, sans-serif\");\n\t            vis.append(\"style\").attr(\"type\", \"text/css\").html(\".hidden{ visibility: hidden;}\");\n\t            vis = vis.append(\"g\").attr(\"transform\", \"translate(\" + this.settings.radius + \",\" + this.settings.radius + \")\"); // set origin to radius center\n\t\n\t            var partition = d3.layout.partition() // creates a new partition layout\n\t            .sort(null) // don't sort,  use tree traversal order\n\t            .value(this.settings.countAccessor); // set the size of the pieces\n\t\n\t            // calculate arcs out of partition coordinates\n\t            this.arc = d3.svg.arc().startAngle(function (d) {\n\t                return Math.max(0, Math.min(2 * Math.PI, _this2.x(d.x)));\n\t            }).endAngle(function (d) {\n\t                return Math.max(0, Math.min(2 * Math.PI, _this2.x(d.x + d.dx)));\n\t            })\n\t            // prevent y-calculation on 0\n\t            .innerRadius(function (d) {\n\t                return Math.max(0, d.y ? _this2.y(d.y) : d.y);\n\t            }).outerRadius(function (d) {\n\t                return Math.max(0, _this2.y(d.y + d.dy)) + 1;\n\t            });\n\t\n\t            // run the partition layout\n\t            var nodes = partition.nodes(this.data);\n\t\n\t            this.path = vis.selectAll(\"path\").data(nodes);\n\t            this.path.enter().append(\"path\") // for every node, draw an arc\n\t            .attr(\"class\", \"arc\").attr(\"id\", function (d, i) {\n\t                return \"path-\" + i;\n\t            }) // id based on index\n\t            .attr(\"d\", this.arc) // path data\n\t            .attr(\"fill-rule\", \"evenodd\") // fill rule\n\t            .style(\"fill\", function (d) {\n\t                return _this2.colour(d, _this2);\n\t            }) // call function for colour\n\t            .on(\"click\", function (d) {\n\t                if (d.depth < _this2.currentMaxLevel) {\n\t                    _this2.click(d);\n\t                }\n\t            }) // call function on click\n\t            .on(\"mouseover\", function (d, i) {\n\t                return _this2.tooltipIn(d, i);\n\t            }).on(\"mousemove\", function (d, i) {\n\t                return _this2.tooltipMove(d, i);\n\t            }).on(\"mouseout\", function (d, i) {\n\t                return _this2.tooltipOut(d, i);\n\t            });\n\t\n\t            // put labels on the nodes\n\t            this.text = vis.selectAll(\"text\").data(nodes);\n\t\n\t            // hack for the getComputedTextLength\n\t            var that = this;\n\t\n\t            this.text.enter().append(\"text\").style(\"fill\", function (d) {\n\t                return _univis2.default.getReadableColorFor(_this2.colour(d, _this2));\n\t            }).style(\"fill-opacity\", 0).style(\"font-family\", \"font-family: Helvetica, 'Super Sans', sans-serif\").style(\"pointer-events\", \"none\") // don't invoke mouse events\n\t            .attr(\"dy\", \".2em\").text(this.settings.getLabel).style(\"font-size\", function (d) {\n\t                return Math.floor(Math.min(that.settings.radius / that.settings.levels / this.getComputedTextLength() * 10 + 1, 12)) + \"px\";\n\t            });\n\t        }\n\t\n\t        /**\n\t         *  Interpolate the scales!\n\t         * Defines new scales based on the clicked item\n\t         *\n\t         * @param <Object> d The clicked item\n\t         * @return <Scale> new scales\n\t         */\n\t\n\t    }, {\n\t        key: \"arcTween\",\n\t        value: function arcTween(d, that) {\n\t            var my = Math.min(Sunburst.maxY(d), d.y + that.settings.levels * d.dy),\n\t                xd = d3.interpolate(that.x.domain(), [d.x, d.x + d.dx]),\n\t                yd = d3.interpolate(that.y.domain(), [d.y, my]),\n\t                yr = d3.interpolate(that.y.range(), [d.y ? 20 : 0, that.settings.radius]);\n\t            return function (d) {\n\t                return function (t) {\n\t                    that.x.domain(xd(t));\n\t                    that.y.domain(yd(t)).range(yr(t));\n\t                    return that.arc(d);\n\t                };\n\t            };\n\t        }\n\t    }, {\n\t        key: \"setBreadcrumbs\",\n\t        value: function setBreadcrumbs(d) {\n\t            var _this3 = this;\n\t\n\t            // breadcrumbs\n\t            var crumbs = [];\n\t            var temp = d;\n\t            while (temp) {\n\t                crumbs.push(temp);\n\t                temp = temp.parent;\n\t            }\n\t            crumbs.reverse().shift();\n\t            var breadArc = d3.svg.arc().innerRadius(0).outerRadius(15).startAngle(0).endAngle(function (d) {\n\t                return 2 * Math.PI * d.data.count / d.parent.data.count;\n\t            });\n\t            var bc = this.breadcrumbs.selectAll(\".crumb\").data(crumbs);\n\t            bc.enter().append(\"li\").on(\"click\", function (d) {\n\t                _this3.click(d.parent);\n\t            }).attr(\"class\", \"crumb\").style(\"opacity\", \"0\").attr(\"title\", this.settings.getTitleText).html(function (d) {\n\t                return \"\\n<p class='name'>\" + d.name + \"</p>\\n<p class='percentage'>\" + Math.round(100 * d.data.count / d.parent.data.count) + \"% of \" + d.parent.name + \"</p>\";\n\t            }).insert(\"svg\", \":first-child\").attr(\"width\", 30).attr(\"height\", 30).append(\"path\").attr(\"d\", breadArc).attr(\"transform\", \"translate(15, 15)\").attr(\"fill\", function (d) {\n\t                return _this3.colour(d, _this3);\n\t            });\n\t            bc.transition().duration(this.settings.duration).style(\"opacity\", \"1\");\n\t            bc.exit().transition().duration(this.settings.duration).style(\"opacity\", \"0\").remove();\n\t        }\n\t\n\t        /**\n\t         * Defines what happens after a node is clicked\n\t         *\n\t         * @param <Object> d The data object of the clicked arc\n\t         */\n\t\n\t    }, {\n\t        key: \"click\",\n\t        value: function click(d) {\n\t            var _this4 = this;\n\t\n\t            if (d.name === \"empty\") {\n\t                return;\n\t            }\n\t\n\t            if (this.settings.enableBreadcrumbs) {\n\t                this.setBreadcrumbs(d);\n\t            }\n\t\n\t            if (this.settings.rerootCallback) {\n\t                this.settings.rerootCallback.call(null, d);\n\t            }\n\t\n\t            // perform animation\n\t            this.currentMaxLevel = d.depth + this.settings.levels;\n\t            this.path.transition().duration(this.settings.duration).attrTween(\"d\", this.arcTween(d, this)).attr(\"class\", function (d) {\n\t                return d.depth >= _this4.currentMaxLevel ? \"arc toHide\" : \"arc\";\n\t            }).attr(\"fill-opacity\", function (d) {\n\t                return d.depth >= _this4.currentMaxLevel ? 0.2 : 1;\n\t            });\n\t\n\t            var that = this;\n\t\n\t            // Somewhat of a hack as we rely on arcTween updating the scales.\n\t            this.text.style(\"visibility\", function (e) {\n\t                return Sunburst.isParentOf(d, e, that.currentMaxLevel) ? null : d3.select(this).style(\"visibility\");\n\t            }).transition().duration(this.settings.duration).attrTween(\"text-anchor\", function (d) {\n\t                return function () {\n\t                    return that.x(d.x + d.dx / 2) > Math.PI ? \"end\" : \"start\";\n\t                };\n\t            }).attrTween(\"dx\", function (d) {\n\t                return function () {\n\t                    return that.x(d.x + d.dx / 2) > Math.PI ? \"-4px\" : \"4px\";\n\t                };\n\t            }).attrTween(\"transform\", function (d) {\n\t                return function () {\n\t                    var angle = that.x(d.x + d.dx / 2) * 180 / Math.PI - 90;\n\t                    return \"rotate(\" + angle + \")translate(\" + that.y(d.y) + \")rotate(\" + (angle > 90 ? -180 : 0) + \")\";\n\t                };\n\t            }).style(\"fill-opacity\", function (e) {\n\t                return Sunburst.isParentOf(d, e, that.currentMaxLevel) ? 1 : 1e-6;\n\t            }).each(\"end\", function (e) {\n\t                d3.select(this).style(\"visibility\", Sunburst.isParentOf(d, e, that.currentMaxLevel) ? null : \"hidden\");\n\t            });\n\t        }\n\t\n\t        /**\n\t         * Calculates the color of an arc based on the color of his children\n\t         *\n\t         * @param <Object> d The node for which we want the color\n\t         * @return <Color> The calculated color\n\t         */\n\t\n\t    }, {\n\t        key: \"colour\",\n\t        value: function colour(d, that) {\n\t            if (d.name === \"empty\") {\n\t                return \"white\";\n\t            }\n\t            if (that.settings.useFixedColors) {\n\t                return that.settings.fixedColors[Math.abs(_univis2.default.stringHash(d.name + \" \" + d.data.rank)) % that.settings.fixedColors.length];\n\t            } else {\n\t                if (d.children) {\n\t                    var colours = d.children.map(function (c) {\n\t                        return that.colour(c, that);\n\t                    }),\n\t                        a = d3.hsl(colours[0]),\n\t                        b = d3.hsl(colours[1]),\n\t                        singleChild = d.children.length === 1 || d.children[1].name === \"empty\";\n\t                    // if we only have one child, return a slightly darker variant of the child color\n\t                    if (singleChild) {\n\t                        return d3.hsl(a.h, a.s, a.l * 0.98);\n\t                    }\n\t                    // if we have 2 children or more, take the average of the first two children\n\t                    return d3.hsl((a.h + b.h) / 2, (a.s + b.s) / 2, (a.l + b.l) / 2);\n\t                }\n\t                // if we don't have children, pick a new color\n\t                if (!d.color) {\n\t                    d.color = that.getColor();\n\t                }\n\t                return d.color;\n\t            }\n\t        }\n\t\n\t        /**\n\t         * color generation function\n\t         * iterates over fixed list of colors\n\t         *\n\t         * @return <Color> The generated color\n\t         */\n\t\n\t    }, {\n\t        key: \"getColor\",\n\t        value: function getColor() {\n\t            this.colorCounter = (this.colorCounter + 1) % this.settings.colors.length;\n\t            return this.settings.colors[this.colorCounter];\n\t        }\n\t\n\t        // tooltip functions\n\t\n\t    }, {\n\t        key: \"tooltipIn\",\n\t        value: function tooltipIn(d, i) {\n\t            if (!this.settings.enableTooltips) {\n\t                return;\n\t            }\n\t            if (d.depth < this.currentMaxLevel && d.name !== \"empty\") {\n\t                this.tooltip.html(this.settings.getTooltip(d)).style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\").style(\"visibility\", \"visible\");\n\t            }\n\t        }\n\t    }, {\n\t        key: \"tooltipOut\",\n\t        value: function tooltipOut(d, i) {\n\t            if (!this.settings.enableTooltips) {\n\t                return;\n\t            }\n\t            this.tooltip.style(\"visibility\", \"hidden\");\n\t        }\n\t    }, {\n\t        key: \"tooltipMove\",\n\t        value: function tooltipMove(d, i) {\n\t            if (!this.settings.enableTooltips) {\n\t                return;\n\t            }\n\t            this.tooltip.style(\"top\", d3.event.pageY - 5 + \"px\").style(\"left\", d3.event.pageX + 15 + \"px\");\n\t        }\n\t    }, {\n\t        key: \"getTooltip\",\n\t        value: function getTooltip(d) {\n\t            return \"<h3 class='tip-title'>\" + this.settings.getTooltipTitle(d) + \"</h3><p>\" + this.settings.getTooltipText(d) + \"</p>\";\n\t        }\n\t\n\t        /** ****** util methods *************/\n\t        /**\n\t         * Calculates if p is a parent of c\n\t         * Returns true is label must be drawn\n\t         */\n\t\n\t    }, {\n\t        key: \"reset\",\n\t\n\t\n\t        /** ************* Public methods ***************/\n\t\n\t        /**\n\t         * Resets the sunburst to its initial position\n\t         */\n\t        value: function reset() {\n\t            this.click(this.data);\n\t        }\n\t\n\t        /**\n\t         * redraws the colors of the sunburst\n\t         */\n\t\n\t    }, {\n\t        key: \"redrawColors\",\n\t        value: function redrawColors() {\n\t            var _this5 = this;\n\t\n\t            d3.selectAll(\".crumb path\").transition().style(\"fill\", function (d) {\n\t                return _this5.colour(d, _this5);\n\t            });\n\t            this.path.transition().style(\"fill\", function (d) {\n\t                return _this5.colour(d, _this5);\n\t            });\n\t            this.text.transition().style(\"fill\", function (d) {\n\t                return _univis2.default.getReadableColorFor(_this5.colour(d, _this5));\n\t            });\n\t        }\n\t\n\t        /**\n\t         * Sets the visualisation in full screen mode\n\t         *\n\t         * @param <boolean> isFullScreen indicates if we're in full screen mode\n\t         */\n\t\n\t    }, {\n\t        key: \"setFullScreen\",\n\t        value: function setFullScreen(isFullScreen) {\n\t            var _this6 = this;\n\t\n\t            // the delay is because the event fires before we're in fullscreen\n\t            // so the height en width functions don't give a correct result\n\t            // without the delay\n\t            setTimeout(function () {\n\t                var size = _this6.settings.width;\n\t                if (isFullScreen) {\n\t                    size = Math.min($(window).height() - 44, $(window).width() - 250);\n\t                }\n\t                $(_this6.element).children(\"svg\").attr(\"width\", size).attr(\"height\", size);\n\t            }, 1000);\n\t        }\n\t    }, {\n\t        key: \"DEFAULTS\",\n\t        get: function get() {\n\t            var _this7 = this;\n\t\n\t            return {\n\t                height: 600,\n\t                width: 600,\n\t                breadcrumbWidth: 200,\n\t                radius: 300,\n\t\n\t                className: \"unipept-sunburst\",\n\t                levels: 4,\n\t                getLevel: function getLevel(d) {\n\t                    return d.getDepth();\n\t                },\n\t\n\t                duration: 1000,\n\t                colors: Sunburst.COLORS,\n\t                fixedColors: Sunburst.FIXED_COLORS,\n\t                useFixedColors: false,\n\t\n\t                countAccessor: function countAccessor(d) {\n\t                    return d.data.self_count;\n\t                },\n\t                rerootCallback: undefined,\n\t\n\t                getLabel: function getLabel(d) {\n\t                    return d.name === \"empty\" ? \"\" : d.name;\n\t                },\n\t\n\t                enableTooltips: true,\n\t                getTooltip: function getTooltip(d) {\n\t                    return _this7.getTooltip.call(_this7, d);\n\t                },\n\t                getTooltipTitle: _univis2.default.getTooltipTitle,\n\t                getTooltipText: _univis2.default.getTooltipText,\n\t\n\t                enableBreadcrumbs: true,\n\t                getTitleText: function getTitleText(d) {\n\t                    return _this7.settings.getLabel(d);\n\t                }\n\t            };\n\t        }\n\t    }], [{\n\t        key: \"isParentOf\",\n\t        value: function isParentOf(p, c, ml) {\n\t            if (c.depth >= ml) {\n\t                return false;\n\t            }\n\t            if (p === c) {\n\t                return true;\n\t            }\n\t            if (p.children) {\n\t                return p.children.some(function (d) {\n\t                    return Sunburst.isParentOf(d, c, ml);\n\t                });\n\t            }\n\t            return false;\n\t        }\n\t\n\t        /**\n\t         * calculate the max-y of the clicked item\n\t         *\n\t         * @param <Object> d The clicked item\n\t         * @return <Number> The maximal y-value\n\t         */\n\t\n\t    }, {\n\t        key: \"maxY\",\n\t        value: function maxY(d) {\n\t            return d.children ? Math.max.apply(Math, _toConsumableArray(d.children.map(Sunburst.maxY))) : d.y + d.dy;\n\t        }\n\t\n\t        /** ****** class constants **********/\n\t\n\t    }, {\n\t        key: \"MARGIN\",\n\t        get: function get() {\n\t            return {\n\t                top: 0,\n\t                right: 0,\n\t                bottom: 0,\n\t                left: 0\n\t            };\n\t        }\n\t    }, {\n\t        key: \"COLORS\",\n\t        get: function get() {\n\t            return [\"#f9f0ab\", \"#e8e596\", \"#f0e2a3\", \"#ede487\", \"#efd580\", \"#f1cb82\", \"#f1c298\", \"#e8b598\", \"#d5dda1\", \"#c9d2b5\", \"#aec1ad\", \"#a7b8a8\", \"#b49a3d\", \"#b28647\", \"#a97d32\", \"#b68334\", \"#d6a680\", \"#dfad70\", \"#a2765d\", \"#9f6652\", \"#b9763f\", \"#bf6e5d\", \"#af643c\", \"#9b4c3f\", \"#72659d\", \"#8a6e9e\", \"#8f5c85\", \"#934b8b\", \"#9d4e87\", \"#92538c\", \"#8b6397\", \"#716084\", \"#2e6093\", \"#3a5988\", \"#4a5072\", \"#393e64\", \"#aaa1cc\", \"#e0b5c9\", \"#e098b0\", \"#ee82a2\", \"#ef91ac\", \"#eda994\", \"#eeb798\", \"#ecc099\", \"#f6d5aa\", \"#f0d48a\", \"#efd95f\", \"#eee469\", \"#dbdc7f\", \"#dfd961\", \"#ebe378\", \"#f5e351\"];\n\t        }\n\t    }, {\n\t        key: \"FIXED_COLORS\",\n\t        get: function get() {\n\t            return [\"#1f77b4\", \"#aec7e8\", \"#ff7f0e\", \"#ffbb78\", \"#2ca02c\", \"#98df8a\", \"#d62728\", \"#ff9896\", \"#9467bd\", \"#c5b0d5\", \"#8c564b\", \"#c49c94\", \"#e377c2\", \"#f7b6d2\", \"#7f7f7f\", \"#c7c7c7\", \"#bcbd22\", \"#dbdb8d\", \"#17becf\", \"#9edae5\", \"#393b79\", \"#5254a3\", \"#6b6ecf\", \"#9c9ede\", \"#637939\", \"#8ca252\", \"#b5cf6b\", \"#cedb9c\", \"#8c6d31\", \"#bd9e39\", \"#e7ba52\", \"#e7cb94\", \"#843c39\", \"#ad494a\", \"#d6616b\", \"#e7969c\", \"#7b4173\", \"#a55194\", \"#ce6dbd\", \"#de9ed6\", \"#3182bd\", \"#6baed6\", \"#9ecae1\", \"#c6dbef\", \"#e6550d\", \"#fd8d3c\", \"#fdae6b\", \"#fdd0a2\", \"#31a354\", \"#74c476\", \"#a1d99b\", \"#c7e9c0\", \"#756bb1\", \"#9e9ac8\", \"#bcbddc\", \"#dadaeb\", \"#636363\", \"#969696\", \"#bdbdbd\", \"#d9d9d9\"];\n\t        }\n\t    }]);\n\t\n\t    return Sunburst;\n\t}();\n\t\n\texports.default = Sunburst;\n\t\n\t\n\t$.fn.sunburst = function (data, options) {\n\t    return new Sunburst(this.get(0), data, options);\n\t};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _node = __webpack_require__(5);\n\t\n\tvar _node2 = _interopRequireDefault(_node);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar SunburstNode = function (_Node) {\n\t    _inherits(SunburstNode, _Node);\n\t\n\t    function SunburstNode() {\n\t        _classCallCheck(this, SunburstNode);\n\t\n\t        return _possibleConstructorReturn(this, (SunburstNode.__proto__ || Object.getPrototypeOf(SunburstNode)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(SunburstNode, null, [{\n\t        key: \"new\",\n\t        value: function _new() {\n\t            var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t            return new SunburstNode(node);\n\t        }\n\t    }, {\n\t        key: \"createNode\",\n\t        value: function createNode(node) {\n\t            return _node2.default.createNode(node, SunburstNode.new);\n\t        }\n\t    }]);\n\t\n\t    return SunburstNode;\n\t}(_node2.default);\n\t\n\texports.default = SunburstNode;\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=unipept-visualizations.js.map"]}